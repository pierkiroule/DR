(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const p of d.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function s(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(c){if(c.ep)return;c.ep=!0;const d=s(c);fetch(c.href,d)}})();function Ud(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var ed={exports:{}},gl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tg;function hx(){if(Tg)return gl;Tg=1;var a=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function s(o,c,d){var p=null;if(d!==void 0&&(p=""+d),c.key!==void 0&&(p=""+c.key),"key"in c){d={};for(var b in c)b!=="key"&&(d[b]=c[b])}else d=c;return c=d.ref,{$$typeof:a,type:o,key:p,ref:c!==void 0?c:null,props:d}}return gl.Fragment=n,gl.jsx=s,gl.jsxs=s,gl}var Ag;function fx(){return Ag||(Ag=1,ed.exports=hx()),ed.exports}var S=fx(),nd={exports:{}},Ot={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ng;function dx(){if(Ng)return Ot;Ng=1;var a=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),p=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),T=Symbol.iterator;function C(N){return N===null||typeof N!="object"?null:(N=T&&N[T]||N["@@iterator"],typeof N=="function"?N:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,k={};function B(N,F,it){this.props=N,this.context=F,this.refs=k,this.updater=it||P}B.prototype.isReactComponent={},B.prototype.setState=function(N,F){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,F,"setState")},B.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function U(){}U.prototype=B.prototype;function Q(N,F,it){this.props=N,this.context=F,this.refs=k,this.updater=it||P}var $=Q.prototype=new U;$.constructor=Q,M($,B.prototype),$.isPureReactComponent=!0;var ft=Array.isArray,lt={H:null,A:null,T:null,S:null,V:null},Ct=Object.prototype.hasOwnProperty;function kt(N,F,it,tt,ut,gt){return it=gt.ref,{$$typeof:a,type:N,key:F,ref:it!==void 0?it:null,props:gt}}function dt(N,F){return kt(N.type,F,void 0,void 0,void 0,N.props)}function xt(N){return typeof N=="object"&&N!==null&&N.$$typeof===a}function qt(N){var F={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(it){return F[it]})}var Rt=/\/+/g;function pt(N,F){return typeof N=="object"&&N!==null&&N.key!=null?qt(""+N.key):F.toString(36)}function we(){}function Ft(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(we,we):(N.status="pending",N.then(function(F){N.status==="pending"&&(N.status="fulfilled",N.value=F)},function(F){N.status==="pending"&&(N.status="rejected",N.reason=F)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function Kt(N,F,it,tt,ut){var gt=typeof N;(gt==="undefined"||gt==="boolean")&&(N=null);var rt=!1;if(N===null)rt=!0;else switch(gt){case"bigint":case"string":case"number":rt=!0;break;case"object":switch(N.$$typeof){case a:case n:rt=!0;break;case A:return rt=N._init,Kt(rt(N._payload),F,it,tt,ut)}}if(rt)return ut=ut(N),rt=tt===""?"."+pt(N,0):tt,ft(ut)?(it="",rt!=null&&(it=rt.replace(Rt,"$&/")+"/"),Kt(ut,F,it,"",function(Tn){return Tn})):ut!=null&&(xt(ut)&&(ut=dt(ut,it+(ut.key==null||N&&N.key===ut.key?"":(""+ut.key).replace(Rt,"$&/")+"/")+rt)),F.push(ut)),1;rt=0;var ie=tt===""?".":tt+":";if(ft(N))for(var Gt=0;Gt<N.length;Gt++)tt=N[Gt],gt=ie+pt(tt,Gt),rt+=Kt(tt,F,it,gt,ut);else if(Gt=C(N),typeof Gt=="function")for(N=Gt.call(N),Gt=0;!(tt=N.next()).done;)tt=tt.value,gt=ie+pt(tt,Gt++),rt+=Kt(tt,F,it,gt,ut);else if(gt==="object"){if(typeof N.then=="function")return Kt(Ft(N),F,it,tt,ut);throw F=String(N),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return rt}function Y(N,F,it){if(N==null)return N;var tt=[],ut=0;return Kt(N,tt,"","",function(gt){return F.call(it,gt,ut++)}),tt}function at(N){if(N._status===-1){var F=N._result;F=F(),F.then(function(it){(N._status===0||N._status===-1)&&(N._status=1,N._result=it)},function(it){(N._status===0||N._status===-1)&&(N._status=2,N._result=it)}),N._status===-1&&(N._status=0,N._result=F)}if(N._status===1)return N._result.default;throw N._result}var nt=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function jt(){}return Ot.Children={map:Y,forEach:function(N,F,it){Y(N,function(){F.apply(this,arguments)},it)},count:function(N){var F=0;return Y(N,function(){F++}),F},toArray:function(N){return Y(N,function(F){return F})||[]},only:function(N){if(!xt(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Ot.Component=B,Ot.Fragment=s,Ot.Profiler=c,Ot.PureComponent=Q,Ot.StrictMode=o,Ot.Suspense=g,Ot.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=lt,Ot.__COMPILER_RUNTIME={__proto__:null,c:function(N){return lt.H.useMemoCache(N)}},Ot.cache=function(N){return function(){return N.apply(null,arguments)}},Ot.cloneElement=function(N,F,it){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var tt=M({},N.props),ut=N.key,gt=void 0;if(F!=null)for(rt in F.ref!==void 0&&(gt=void 0),F.key!==void 0&&(ut=""+F.key),F)!Ct.call(F,rt)||rt==="key"||rt==="__self"||rt==="__source"||rt==="ref"&&F.ref===void 0||(tt[rt]=F[rt]);var rt=arguments.length-2;if(rt===1)tt.children=it;else if(1<rt){for(var ie=Array(rt),Gt=0;Gt<rt;Gt++)ie[Gt]=arguments[Gt+2];tt.children=ie}return kt(N.type,ut,void 0,void 0,gt,tt)},Ot.createContext=function(N){return N={$$typeof:p,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:d,_context:N},N},Ot.createElement=function(N,F,it){var tt,ut={},gt=null;if(F!=null)for(tt in F.key!==void 0&&(gt=""+F.key),F)Ct.call(F,tt)&&tt!=="key"&&tt!=="__self"&&tt!=="__source"&&(ut[tt]=F[tt]);var rt=arguments.length-2;if(rt===1)ut.children=it;else if(1<rt){for(var ie=Array(rt),Gt=0;Gt<rt;Gt++)ie[Gt]=arguments[Gt+2];ut.children=ie}if(N&&N.defaultProps)for(tt in rt=N.defaultProps,rt)ut[tt]===void 0&&(ut[tt]=rt[tt]);return kt(N,gt,void 0,void 0,null,ut)},Ot.createRef=function(){return{current:null}},Ot.forwardRef=function(N){return{$$typeof:b,render:N}},Ot.isValidElement=xt,Ot.lazy=function(N){return{$$typeof:A,_payload:{_status:-1,_result:N},_init:at}},Ot.memo=function(N,F){return{$$typeof:v,type:N,compare:F===void 0?null:F}},Ot.startTransition=function(N){var F=lt.T,it={};lt.T=it;try{var tt=N(),ut=lt.S;ut!==null&&ut(it,tt),typeof tt=="object"&&tt!==null&&typeof tt.then=="function"&&tt.then(jt,nt)}catch(gt){nt(gt)}finally{lt.T=F}},Ot.unstable_useCacheRefresh=function(){return lt.H.useCacheRefresh()},Ot.use=function(N){return lt.H.use(N)},Ot.useActionState=function(N,F,it){return lt.H.useActionState(N,F,it)},Ot.useCallback=function(N,F){return lt.H.useCallback(N,F)},Ot.useContext=function(N){return lt.H.useContext(N)},Ot.useDebugValue=function(){},Ot.useDeferredValue=function(N,F){return lt.H.useDeferredValue(N,F)},Ot.useEffect=function(N,F,it){var tt=lt.H;if(typeof it=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return tt.useEffect(N,F)},Ot.useId=function(){return lt.H.useId()},Ot.useImperativeHandle=function(N,F,it){return lt.H.useImperativeHandle(N,F,it)},Ot.useInsertionEffect=function(N,F){return lt.H.useInsertionEffect(N,F)},Ot.useLayoutEffect=function(N,F){return lt.H.useLayoutEffect(N,F)},Ot.useMemo=function(N,F){return lt.H.useMemo(N,F)},Ot.useOptimistic=function(N,F){return lt.H.useOptimistic(N,F)},Ot.useReducer=function(N,F,it){return lt.H.useReducer(N,F,it)},Ot.useRef=function(N){return lt.H.useRef(N)},Ot.useState=function(N){return lt.H.useState(N)},Ot.useSyncExternalStore=function(N,F,it){return lt.H.useSyncExternalStore(N,F,it)},Ot.useTransition=function(){return lt.H.useTransition()},Ot.version="19.1.0",Ot}var Mg;function Hd(){return Mg||(Mg=1,nd.exports=dx()),nd.exports}var R=Hd();const Ac=Ud(R);var id={exports:{}},vl={},sd={exports:{}},ad={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rg;function mx(){return Rg||(Rg=1,function(a){function n(Y,at){var nt=Y.length;Y.push(at);t:for(;0<nt;){var jt=nt-1>>>1,N=Y[jt];if(0<c(N,at))Y[jt]=at,Y[nt]=N,nt=jt;else break t}}function s(Y){return Y.length===0?null:Y[0]}function o(Y){if(Y.length===0)return null;var at=Y[0],nt=Y.pop();if(nt!==at){Y[0]=nt;t:for(var jt=0,N=Y.length,F=N>>>1;jt<F;){var it=2*(jt+1)-1,tt=Y[it],ut=it+1,gt=Y[ut];if(0>c(tt,nt))ut<N&&0>c(gt,tt)?(Y[jt]=gt,Y[ut]=nt,jt=ut):(Y[jt]=tt,Y[it]=nt,jt=it);else if(ut<N&&0>c(gt,nt))Y[jt]=gt,Y[ut]=nt,jt=ut;else break t}}return at}function c(Y,at){var nt=Y.sortIndex-at.sortIndex;return nt!==0?nt:Y.id-at.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;a.unstable_now=function(){return d.now()}}else{var p=Date,b=p.now();a.unstable_now=function(){return p.now()-b}}var g=[],v=[],A=1,T=null,C=3,P=!1,M=!1,k=!1,B=!1,U=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function ft(Y){for(var at=s(v);at!==null;){if(at.callback===null)o(v);else if(at.startTime<=Y)o(v),at.sortIndex=at.expirationTime,n(g,at);else break;at=s(v)}}function lt(Y){if(k=!1,ft(Y),!M)if(s(g)!==null)M=!0,Ct||(Ct=!0,pt());else{var at=s(v);at!==null&&Kt(lt,at.startTime-Y)}}var Ct=!1,kt=-1,dt=5,xt=-1;function qt(){return B?!0:!(a.unstable_now()-xt<dt)}function Rt(){if(B=!1,Ct){var Y=a.unstable_now();xt=Y;var at=!0;try{t:{M=!1,k&&(k=!1,Q(kt),kt=-1),P=!0;var nt=C;try{e:{for(ft(Y),T=s(g);T!==null&&!(T.expirationTime>Y&&qt());){var jt=T.callback;if(typeof jt=="function"){T.callback=null,C=T.priorityLevel;var N=jt(T.expirationTime<=Y);if(Y=a.unstable_now(),typeof N=="function"){T.callback=N,ft(Y),at=!0;break e}T===s(g)&&o(g),ft(Y)}else o(g);T=s(g)}if(T!==null)at=!0;else{var F=s(v);F!==null&&Kt(lt,F.startTime-Y),at=!1}}break t}finally{T=null,C=nt,P=!1}at=void 0}}finally{at?pt():Ct=!1}}}var pt;if(typeof $=="function")pt=function(){$(Rt)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,Ft=we.port2;we.port1.onmessage=Rt,pt=function(){Ft.postMessage(null)}}else pt=function(){U(Rt,0)};function Kt(Y,at){kt=U(function(){Y(a.unstable_now())},at)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(Y){Y.callback=null},a.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):dt=0<Y?Math.floor(1e3/Y):5},a.unstable_getCurrentPriorityLevel=function(){return C},a.unstable_next=function(Y){switch(C){case 1:case 2:case 3:var at=3;break;default:at=C}var nt=C;C=at;try{return Y()}finally{C=nt}},a.unstable_requestPaint=function(){B=!0},a.unstable_runWithPriority=function(Y,at){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var nt=C;C=Y;try{return at()}finally{C=nt}},a.unstable_scheduleCallback=function(Y,at,nt){var jt=a.unstable_now();switch(typeof nt=="object"&&nt!==null?(nt=nt.delay,nt=typeof nt=="number"&&0<nt?jt+nt:jt):nt=jt,Y){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=nt+N,Y={id:A++,callback:at,priorityLevel:Y,startTime:nt,expirationTime:N,sortIndex:-1},nt>jt?(Y.sortIndex=nt,n(v,Y),s(g)===null&&Y===s(v)&&(k?(Q(kt),kt=-1):k=!0,Kt(lt,nt-jt))):(Y.sortIndex=N,n(g,Y),M||P||(M=!0,Ct||(Ct=!0,pt()))),Y},a.unstable_shouldYield=qt,a.unstable_wrapCallback=function(Y){var at=C;return function(){var nt=C;C=at;try{return Y.apply(this,arguments)}finally{C=nt}}}}(ad)),ad}var Lg;function px(){return Lg||(Lg=1,sd.exports=mx()),sd.exports}var rd={exports:{}},on={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Og;function _x(){if(Og)return on;Og=1;var a=Hd();function n(g){var v="https://react.dev/errors/"+g;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var A=2;A<arguments.length;A++)v+="&args[]="+encodeURIComponent(arguments[A])}return"Minified React error #"+g+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var o={d:{f:s,r:function(){throw Error(n(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},c=Symbol.for("react.portal");function d(g,v,A){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:T==null?null:""+T,children:g,containerInfo:v,implementation:A}}var p=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function b(g,v){if(g==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return on.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,on.createPortal=function(g,v){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(n(299));return d(g,v,null,A)},on.flushSync=function(g){var v=p.T,A=o.p;try{if(p.T=null,o.p=2,g)return g()}finally{p.T=v,o.p=A,o.d.f()}},on.preconnect=function(g,v){typeof g=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,o.d.C(g,v))},on.prefetchDNS=function(g){typeof g=="string"&&o.d.D(g)},on.preinit=function(g,v){if(typeof g=="string"&&v&&typeof v.as=="string"){var A=v.as,T=b(A,v.crossOrigin),C=typeof v.integrity=="string"?v.integrity:void 0,P=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;A==="style"?o.d.S(g,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:T,integrity:C,fetchPriority:P}):A==="script"&&o.d.X(g,{crossOrigin:T,integrity:C,fetchPriority:P,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},on.preinitModule=function(g,v){if(typeof g=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var A=b(v.as,v.crossOrigin);o.d.M(g,{crossOrigin:A,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&o.d.M(g)},on.preload=function(g,v){if(typeof g=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var A=v.as,T=b(A,v.crossOrigin);o.d.L(g,A,{crossOrigin:T,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},on.preloadModule=function(g,v){if(typeof g=="string")if(v){var A=b(v.as,v.crossOrigin);o.d.m(g,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:A,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else o.d.m(g)},on.requestFormReset=function(g){o.d.r(g)},on.unstable_batchedUpdates=function(g,v){return g(v)},on.useFormState=function(g,v,A){return p.H.useFormState(g,v,A)},on.useFormStatus=function(){return p.H.useHostTransitionStatus()},on.version="19.1.0",on}var Dg;function Xv(){if(Dg)return rd.exports;Dg=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(n){console.error(n)}}return a(),rd.exports=_x(),rd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kg;function gx(){if(kg)return vl;kg=1;var a=px(),n=Hd(),s=Xv();function o(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function d(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function p(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function b(t){if(d(t)!==t)throw Error(o(188))}function g(t){var e=t.alternate;if(!e){if(e=d(t),e===null)throw Error(o(188));return e!==t?null:t}for(var r=t,u=e;;){var f=r.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){r=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===r)return b(f),t;if(m===u)return b(f),e;m=m.sibling}throw Error(o(188))}if(r.return!==u.return)r=f,u=m;else{for(var x=!1,E=f.child;E;){if(E===r){x=!0,r=f,u=m;break}if(E===u){x=!0,u=f,r=m;break}E=E.sibling}if(!x){for(E=m.child;E;){if(E===r){x=!0,r=m,u=f;break}if(E===u){x=!0,u=m,r=f;break}E=E.sibling}if(!x)throw Error(o(189))}}if(r.alternate!==u)throw Error(o(190))}if(r.tag!==3)throw Error(o(188));return r.stateNode.current===r?t:e}function v(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=v(t),e!==null)return e;t=t.sibling}return null}var A=Object.assign,T=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),Q=Symbol.for("react.consumer"),$=Symbol.for("react.context"),ft=Symbol.for("react.forward_ref"),lt=Symbol.for("react.suspense"),Ct=Symbol.for("react.suspense_list"),kt=Symbol.for("react.memo"),dt=Symbol.for("react.lazy"),xt=Symbol.for("react.activity"),qt=Symbol.for("react.memo_cache_sentinel"),Rt=Symbol.iterator;function pt(t){return t===null||typeof t!="object"?null:(t=Rt&&t[Rt]||t["@@iterator"],typeof t=="function"?t:null)}var we=Symbol.for("react.client.reference");function Ft(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===we?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case M:return"Fragment";case B:return"Profiler";case k:return"StrictMode";case lt:return"Suspense";case Ct:return"SuspenseList";case xt:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case P:return"Portal";case $:return(t.displayName||"Context")+".Provider";case Q:return(t._context.displayName||"Context")+".Consumer";case ft:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case kt:return e=t.displayName||null,e!==null?e:Ft(t.type)||"Memo";case dt:e=t._payload,t=t._init;try{return Ft(t(e))}catch{}}return null}var Kt=Array.isArray,Y=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,at=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,nt={pending:!1,data:null,method:null,action:null},jt=[],N=-1;function F(t){return{current:t}}function it(t){0>N||(t.current=jt[N],jt[N]=null,N--)}function tt(t,e){N++,jt[N]=t.current,t.current=e}var ut=F(null),gt=F(null),rt=F(null),ie=F(null);function Gt(t,e){switch(tt(rt,e),tt(gt,t),tt(ut,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?tg(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=tg(e),t=eg(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}it(ut),tt(ut,t)}function Tn(){it(ut),it(gt),it(rt)}function Di(t){t.memoizedState!==null&&tt(ie,t);var e=ut.current,r=eg(e,t.type);e!==r&&(tt(gt,t),tt(ut,r))}function Zn(t){gt.current===t&&(it(ut),it(gt)),ie.current===t&&(it(ie),fl._currentValue=nt)}var An=Object.prototype.hasOwnProperty,gi=a.unstable_scheduleCallback,gs=a.unstable_cancelCallback,nr=a.unstable_shouldYield,ir=a.unstable_requestPaint,se=a.unstable_now,vs=a.unstable_getCurrentPriorityLevel,sr=a.unstable_ImmediatePriority,_a=a.unstable_UserBlockingPriority,vi=a.unstable_NormalPriority,ar=a.unstable_LowPriority,ga=a.unstable_IdlePriority,mo=a.log,po=a.unstable_setDisableYieldValue,ei=null,Ie=null;function ot(t){if(typeof mo=="function"&&po(t),Ie&&typeof Ie.setStrictMode=="function")try{Ie.setStrictMode(ei,t)}catch{}}var et=Math.clz32?Math.clz32:pe,ht=Math.log,Et=Math.LN2;function pe(t){return t>>>=0,t===0?32:31-(ht(t)/Et|0)|0}var en=256,Ee=4194304;function pn(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function va(t,e,r){var u=t.pendingLanes;if(u===0)return 0;var f=0,m=t.suspendedLanes,x=t.pingedLanes;t=t.warmLanes;var E=u&134217727;return E!==0?(u=E&~m,u!==0?f=pn(u):(x&=E,x!==0?f=pn(x):r||(r=E&~t,r!==0&&(f=pn(r))))):(E=u&~m,E!==0?f=pn(E):x!==0?f=pn(x):r||(r=u&~t,r!==0&&(f=pn(r)))),f===0?0:e!==0&&e!==f&&(e&m)===0&&(m=f&-f,r=e&-e,m>=r||m===32&&(r&4194048)!==0)?e:f}function Nn(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function lh(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Kl(){var t=en;return en<<=1,(en&4194048)===0&&(en=256),t}function _o(){var t=Ee;return Ee<<=1,(Ee&62914560)===0&&(Ee=4194304),t}function rr(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function ys(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function uh(t,e,r,u,f,m){var x=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var E=t.entanglements,D=t.expirationTimes,Z=t.hiddenUpdates;for(r=x&~r;0<r;){var X=31-et(r),K=1<<X;E[X]=0,D[X]=-1;var q=Z[X];if(q!==null)for(Z[X]=null,X=0;X<q.length;X++){var G=q[X];G!==null&&(G.lane&=-536870913)}r&=~K}u!==0&&$l(t,u,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(x&~e))}function $l(t,e,r){t.pendingLanes|=e,t.suspendedLanes&=~e;var u=31-et(e);t.entangledLanes|=e,t.entanglements[u]=t.entanglements[u]|1073741824|r&4194090}function Jl(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var u=31-et(r),f=1<<u;f&e|t[u]&e&&(t[u]|=e),r&=~f}}function go(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function vo(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function tu(){var t=at.p;return t!==0?t:(t=window.event,t===void 0?32:bg(t.type))}function yo(t,e){var r=at.p;try{return at.p=t,e()}finally{at.p=r}}var yi=Math.random().toString(36).slice(2),Be="__reactFiber$"+yi,nn="__reactProps$"+yi,bs="__reactContainer$"+yi,_n="__reactEvents$"+yi,yt="__reactListeners$"+yi,eu="__reactHandles$"+yi,bo="__reactResources$"+yi,xs="__reactMarker$"+yi;function or(t){delete t[Be],delete t[nn],delete t[_n],delete t[yt],delete t[eu]}function bi(t){var e=t[Be];if(e)return e;for(var r=t.parentNode;r;){if(e=r[bs]||r[Be]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=ag(t);t!==null;){if(r=t[Be])return r;t=ag(t)}return e}t=r,r=t.parentNode}return null}function ki(t){if(t=t[Be]||t[bs]){var e=t.tag;if(e===5||e===6||e===13||e===26||e===27||e===3)return t}return null}function qn(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(o(33))}function zi(t){var e=t[bo];return e||(e=t[bo]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Le(t){t[xs]=!0}var nu=new Set,iu={};function Pi(t,e){Ii(t,e),Ii(t+"Capture",e)}function Ii(t,e){for(iu[t]=e,t=0;t<e.length;t++)nu.add(e[t])}var ch=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ya={},su={};function hh(t){return An.call(su,t)?!0:An.call(ya,t)?!1:ch.test(t)?su[t]=!0:(ya[t]=!0,!1)}function lr(t,e,r){if(hh(e))if(r===null)t.removeAttribute(e);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var u=e.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+r)}}function ur(t,e,r){if(r===null)t.removeAttribute(e);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+r)}}function ni(t,e,r,u){if(u===null)t.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(e,r,""+u)}}var ba,Ss;function Bi(t){if(ba===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);ba=e&&e[1]||"",Ss=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ba+t+Ss}var cr=!1;function ji(t,e){if(!t||cr)return"";cr=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(e){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(G){var q=G}Reflect.construct(t,[],K)}else{try{K.call()}catch(G){q=G}t.call(K.prototype)}}else{try{throw Error()}catch(G){q=G}(K=t())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(G){if(G&&q&&typeof G.stack=="string")return[G.stack,q.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),x=m[0],E=m[1];if(x&&E){var D=x.split(`
`),Z=E.split(`
`);for(f=u=0;u<D.length&&!D[u].includes("DetermineComponentFrameRoot");)u++;for(;f<Z.length&&!Z[f].includes("DetermineComponentFrameRoot");)f++;if(u===D.length||f===Z.length)for(u=D.length-1,f=Z.length-1;1<=u&&0<=f&&D[u]!==Z[f];)f--;for(;1<=u&&0<=f;u--,f--)if(D[u]!==Z[f]){if(u!==1||f!==1)do if(u--,f--,0>f||D[u]!==Z[f]){var X=`
`+D[u].replace(" at new "," at ");return t.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",t.displayName)),X}while(1<=u&&0<=f);break}}}finally{cr=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?Bi(r):""}function Vt(t){switch(t.tag){case 26:case 27:case 5:return Bi(t.type);case 16:return Bi("Lazy");case 13:return Bi("Suspense");case 19:return Bi("SuspenseList");case 0:case 15:return ji(t.type,!1);case 11:return ji(t.type.render,!1);case 1:return ji(t.type,!0);case 31:return Bi("Activity");default:return""}}function ue(t){try{var e="";do e+=Vt(t),t=t.return;while(t);return e}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}function Xe(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ui(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ws(t){var e=Ui(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),u=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var f=r.get,m=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return f.call(this)},set:function(x){u=""+x,m.call(this,x)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return u},setValue:function(x){u=""+x},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Es(t){t._valueTracker||(t._valueTracker=ws(t))}function Lt(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),u="";return t&&(u=Ui(t)?t.checked?"true":"false":t.value),t=u,t!==r?(e.setValue(t),!0):!1}function ce(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var xo=/[\n"\\]/g;function Qe(t){return t.replace(xo,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function sn(t,e,r,u,f,m,x,E){t.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?t.type=x:t.removeAttribute("type"),e!=null?x==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+Xe(e)):t.value!==""+Xe(e)&&(t.value=""+Xe(e)):x!=="submit"&&x!=="reset"||t.removeAttribute("value"),e!=null?Cs(t,x,Xe(e)):r!=null?Cs(t,x,Xe(r)):u!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+Xe(E):t.removeAttribute("name")}function au(t,e,r,u,f,m,x,E){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),e!=null||r!=null){if(!(m!=="submit"&&m!=="reset"||e!=null))return;r=r!=null?""+Xe(r):"",e=e!=null?""+Xe(e):r,E||e===t.value||(t.value=e),t.defaultValue=e}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,t.checked=E?t.checked:!!u,t.defaultChecked=!!u,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(t.name=x)}function Cs(t,e,r){e==="number"&&ce(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function gn(t,e,r,u){if(t=t.options,e){e={};for(var f=0;f<r.length;f++)e["$"+r[f]]=!0;for(r=0;r<t.length;r++)f=e.hasOwnProperty("$"+t[r].value),t[r].selected!==f&&(t[r].selected=f),f&&u&&(t[r].defaultSelected=!0)}else{for(r=""+Xe(r),e=null,f=0;f<t.length;f++){if(t[f].value===r){t[f].selected=!0,u&&(t[f].defaultSelected=!0);return}e!==null||t[f].disabled||(e=t[f])}e!==null&&(e.selected=!0)}}function be(t,e,r){if(e!=null&&(e=""+Xe(e),e!==t.value&&(t.value=e),r==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=r!=null?""+Xe(r):""}function xi(t,e,r,u){if(e==null){if(u!=null){if(r!=null)throw Error(o(92));if(Kt(u)){if(1<u.length)throw Error(o(93));u=u[0]}r=u}r==null&&(r=""),e=r}r=Xe(e),t.defaultValue=r,u=t.textContent,u===r&&u!==""&&u!==null&&(t.value=u)}function Gn(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var xa=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function hr(t,e,r){var u=e.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?u?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":u?t.setProperty(e,r):typeof r!="number"||r===0||xa.has(e)?e==="float"?t.cssFloat=r:t[e]=(""+r).trim():t[e]=r+"px"}function Ts(t,e,r){if(e!=null&&typeof e!="object")throw Error(o(62));if(t=t.style,r!=null){for(var u in r)!r.hasOwnProperty(u)||e!=null&&e.hasOwnProperty(u)||(u.indexOf("--")===0?t.setProperty(u,""):u==="float"?t.cssFloat="":t[u]="");for(var f in e)u=e[f],e.hasOwnProperty(f)&&r[f]!==u&&hr(t,f,u)}else for(var m in e)e.hasOwnProperty(m)&&hr(t,m,e[m])}function Sa(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var So=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function As(t){return fr.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var wa=null;function Ns(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Hi=null,Si=null;function ru(t){var e=ki(t);if(e&&(t=e.stateNode)){var r=t[nn]||null;t:switch(t=e.stateNode,e.type){case"input":if(sn(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Qe(""+e)+'"][type="radio"]'),e=0;e<r.length;e++){var u=r[e];if(u!==t&&u.form===t.form){var f=u[nn]||null;if(!f)throw Error(o(90));sn(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(e=0;e<r.length;e++)u=r[e],u.form===t.form&&Lt(u)}break t;case"textarea":be(t,r.value,r.defaultValue);break t;case"select":e=r.value,e!=null&&gn(t,!!r.multiple,e,!1)}}}var Mt=!1;function Mn(t,e,r){if(Mt)return t(e,r);Mt=!0;try{var u=t(e);return u}finally{if(Mt=!1,(Hi!==null||Si!==null)&&(tc(),Hi&&(e=Hi,t=Si,Si=Hi=null,ru(e),t)))for(e=0;e<t.length;e++)ru(t[e])}}function Xt(t,e){var r=t.stateNode;if(r===null)return null;var u=r[nn]||null;if(u===null)return null;r=u[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break t;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(o(231,e,typeof r));return r}var Vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ea=!1;if(Vn)try{var Zi={};Object.defineProperty(Zi,"passive",{get:function(){Ea=!0}}),window.addEventListener("test",Zi,Zi),window.removeEventListener("test",Zi,Zi)}catch{Ea=!1}var Yn=null,ii=null,Ms=null;function Rs(){if(Ms)return Ms;var t,e=ii,r=e.length,u,f="value"in Yn?Yn.value:Yn.textContent,m=f.length;for(t=0;t<r&&e[t]===f[t];t++);var x=r-t;for(u=1;u<=x&&e[r-u]===f[m-u];u++);return Ms=f.slice(t,1<u?1-u:void 0)}function Ce(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Fn(){return!0}function wo(){return!1}function We(t){function e(r,u,f,m,x){this._reactName=r,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=x,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(r=t[E],this[E]=r?r(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Fn:wo,this.isPropagationStopped=wo,this}return A(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Fn)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Fn)},persist:function(){},isPersistent:Fn}),e}var qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ca=We(qi),Gi=A({},qi,{view:0,detail:0}),fh=We(Gi),dr,zt,Ta,an=A({},Gi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ta&&(Ta&&t.type==="mousemove"?(dr=t.screenX-Ta.screenX,zt=t.screenY-Ta.screenY):zt=dr=0,Ta=t),dr)},movementY:function(t){return"movementY"in t?t.movementY:zt}}),Ls=We(an),ou=A({},an,{dataTransfer:0}),dh=We(ou),Eo=A({},Gi,{relatedTarget:0}),Co=We(Eo),lu=A({},qi,{animationName:0,elapsedTime:0,pseudoElement:0}),mh=We(lu),ph=A({},qi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),To=We(ph),_h=A({},qi,{data:0}),Rn=We(_h),gh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cu(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=wi[t])?!!e[t]:!1}function mr(){return cu}var Ao=A({},Gi,{key:function(t){if(t.key){var e=gh[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ce(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?uu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mr,charCode:function(t){return t.type==="keypress"?Ce(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ce(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),vh=We(Ao),hu=A({},an,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),No=We(hu),yh=A({},Gi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mr}),bh=We(yh),Mo=A({},qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),xh=We(Mo),fu=A({},an,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),du=We(fu),pr=A({},qi,{newState:0,oldState:0}),Vi=We(pr),Sh=[9,13,27,32],Yi=Vn&&"CompositionEvent"in window,je=null;Vn&&"documentMode"in document&&(je=document.documentMode);var mu=Vn&&"TextEvent"in window&&!je,Ro=Vn&&(!Yi||je&&8<je&&11>=je),pu=" ",_r=!1;function gr(t,e){switch(t){case"keyup":return Sh.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _u(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Os=!1;function gu(t,e){switch(t){case"compositionend":return _u(e);case"keypress":return e.which!==32?null:(_r=!0,pu);case"textInput":return t=e.data,t===pu&&_r?null:t;default:return null}}function wh(t,e){if(Os)return t==="compositionend"||!Yi&&gr(t,e)?(t=Rs(),Ms=ii=Yn=null,Os=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ro&&e.locale!=="ko"?null:e.data;default:return null}}var Ln={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fi(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Ln[t.type]:e==="textarea"}function vu(t,e,r,u){Hi?Si?Si.push(u):Si=[u]:Hi=u,e=rc(e,"onChange"),0<e.length&&(r=new Ca("onChange","change",null,r,u),t.push({event:r,listeners:e}))}var un=null,Aa=null;function Ds(t){Q_(t,0)}function vr(t){var e=qn(t);if(Lt(e))return t}function ks(t,e){if(t==="change")return e}var Lo=!1;if(Vn){var zs;if(Vn){var Oo="oninput"in document;if(!Oo){var si=document.createElement("div");si.setAttribute("oninput","return;"),Oo=typeof si.oninput=="function"}zs=Oo}else zs=!1;Lo=zs&&(!document.documentMode||9<document.documentMode)}function Na(){un&&(un.detachEvent("onpropertychange",yu),Aa=un=null)}function yu(t){if(t.propertyName==="value"&&vr(Aa)){var e=[];vu(e,Aa,t,Ns(t)),Mn(Ds,e)}}function Do(t,e,r){t==="focusin"?(Na(),un=e,Aa=r,un.attachEvent("onpropertychange",yu)):t==="focusout"&&Na()}function Eh(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vr(Aa)}function ai(t,e){if(t==="click")return vr(e)}function Ch(t,e){if(t==="input"||t==="change")return vr(e)}function Ps(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var cn=typeof Object.is=="function"?Object.is:Ps;function hn(t,e){if(cn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),u=Object.keys(e);if(r.length!==u.length)return!1;for(u=0;u<r.length;u++){var f=r[u];if(!An.call(e,f)||!cn(t[f],e[f]))return!1}return!0}function Ma(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ko(t,e){var r=Ma(t);t=0;for(var u;r;){if(r.nodeType===3){if(u=t+r.textContent.length,t<=e&&u>=e)return{node:r,offset:e-t};t=u}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=Ma(r)}}function yr(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?yr(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ra(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=ce(t.document);e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=ce(t.document)}return e}function La(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var br=Vn&&"documentMode"in document&&11>=document.documentMode,On=null,Is=null,Xi=null,xr=!1;function bu(t,e,r){var u=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;xr||On==null||On!==ce(u)||(u=On,"selectionStart"in u&&La(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Xi&&hn(Xi,u)||(Xi=u,u=rc(Is,"onSelect"),0<u.length&&(e=new Ca("onSelect","select",null,e,r),t.push({event:e,listeners:u}),e.target=On)))}function Xn(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Bs={animationend:Xn("Animation","AnimationEnd"),animationiteration:Xn("Animation","AnimationIteration"),animationstart:Xn("Animation","AnimationStart"),transitionrun:Xn("Transition","TransitionRun"),transitionstart:Xn("Transition","TransitionStart"),transitioncancel:Xn("Transition","TransitionCancel"),transitionend:Xn("Transition","TransitionEnd")},Sr={},xu={};Vn&&(xu=document.createElement("div").style,"AnimationEvent"in window||(delete Bs.animationend.animation,delete Bs.animationiteration.animation,delete Bs.animationstart.animation),"TransitionEvent"in window||delete Bs.transitionend.transition);function Ei(t){if(Sr[t])return Sr[t];if(!Bs[t])return t;var e=Bs[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in xu)return Sr[t]=e[r];return t}var Su=Ei("animationend"),Dn=Ei("animationiteration"),Oa=Ei("animationstart"),Th=Ei("transitionrun"),wr=Ei("transitionstart"),Ah=Ei("transitioncancel"),zo=Ei("transitionend"),wu=new Map,Qi="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qi.push("scrollEnd");function kn(t,e){wu.set(t,e),Pi(e,[t])}var Wi=new WeakMap;function fn(t,e){if(typeof t=="object"&&t!==null){var r=Wi.get(t);return r!==void 0?r:(e={value:t,source:e,stack:ue(e)},Wi.set(t,e),e)}return{value:t,source:e,stack:ue(e)}}var dn=[],js=0,zn=0;function Da(){for(var t=js,e=zn=js=0;e<t;){var r=dn[e];dn[e++]=null;var u=dn[e];dn[e++]=null;var f=dn[e];dn[e++]=null;var m=dn[e];if(dn[e++]=null,u!==null&&f!==null){var x=u.pending;x===null?f.next=f:(f.next=x.next,x.next=f),u.pending=f}m!==0&&za(r,f,m)}}function ka(t,e,r,u){dn[js++]=t,dn[js++]=e,dn[js++]=r,dn[js++]=u,zn|=u,t.lanes|=u,t=t.alternate,t!==null&&(t.lanes|=u)}function Ki(t,e,r,u){return ka(t,e,r,u),Ci(t)}function Us(t,e){return ka(t,null,null,e),Ci(t)}function za(t,e,r){t.lanes|=r;var u=t.alternate;u!==null&&(u.lanes|=r);for(var f=!1,m=t.return;m!==null;)m.childLanes|=r,u=m.alternate,u!==null&&(u.childLanes|=r),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&e!==null&&(f=31-et(r),t=m.hiddenUpdates,u=t[f],u===null?t[f]=[e]:u.push(e),e.lane=r|536870912),m):null}function Ci(t){if(50<sl)throw sl=0,Cf=null,Error(o(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var $i={};function Eu(t,e,r,u){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mn(t,e,r,u){return new Eu(t,e,r,u)}function Er(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Qn(t,e){var r=t.alternate;return r===null?(r=mn(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function Po(t,e){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,e=r.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function Pa(t,e,r,u,f,m){var x=0;if(u=t,typeof t=="function")Er(t)&&(x=1);else if(typeof t=="string")x=$b(t,r,ut.current)?26:t==="html"||t==="head"||t==="body"?27:5;else t:switch(t){case xt:return t=mn(31,r,e,f),t.elementType=xt,t.lanes=m,t;case M:return Ti(r.children,f,m,e);case k:x=8,f|=24;break;case B:return t=mn(12,r,e,f|2),t.elementType=B,t.lanes=m,t;case lt:return t=mn(13,r,e,f),t.elementType=lt,t.lanes=m,t;case Ct:return t=mn(19,r,e,f),t.elementType=Ct,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case U:case $:x=10;break t;case Q:x=9;break t;case ft:x=11;break t;case kt:x=14;break t;case dt:x=16,u=null;break t}x=29,r=Error(o(130,t===null?"null":typeof t,"")),u=null}return e=mn(x,r,e,f),e.elementType=t,e.type=u,e.lanes=m,e}function Ti(t,e,r,u){return t=mn(7,t,u,e),t.lanes=r,t}function Io(t,e,r){return t=mn(6,t,null,e),t.lanes=r,t}function Cr(t,e,r){return e=mn(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var Ji=[],Hs=0,i=null,l=0,h=[],_=0,y=null,w=1,O="";function j(t,e){Ji[Hs++]=l,Ji[Hs++]=i,i=t,l=e}function V(t,e,r){h[_++]=w,h[_++]=O,h[_++]=y,y=t;var u=w;t=O;var f=32-et(u)-1;u&=~(1<<f),r+=1;var m=32-et(e)+f;if(30<m){var x=f-f%5;m=(u&(1<<x)-1).toString(32),u>>=x,f-=x,w=1<<32-et(e)+f|r<<f|u,O=m+t}else w=1<<m|r<<f|u,O=t}function J(t){t.return!==null&&(j(t,1),V(t,1,0))}function ct(t){for(;t===i;)i=Ji[--Hs],Ji[Hs]=null,l=Ji[--Hs],Ji[Hs]=null;for(;t===y;)y=h[--_],h[_]=null,O=h[--_],h[_]=null,w=h[--_],h[_]=null}var mt=null,vt=null,Nt=!1,he=null,xe=!1,Ue=Error(o(519));function vn(t){var e=Error(o(418,""));throw qs(fn(e,t)),Ue}function Cu(t){var e=t.stateNode,r=t.type,u=t.memoizedProps;switch(e[Be]=t,e[nn]=u,r){case"dialog":Ht("cancel",e),Ht("close",e);break;case"iframe":case"object":case"embed":Ht("load",e);break;case"video":case"audio":for(r=0;r<rl.length;r++)Ht(rl[r],e);break;case"source":Ht("error",e);break;case"img":case"image":case"link":Ht("error",e),Ht("load",e);break;case"details":Ht("toggle",e);break;case"input":Ht("invalid",e),au(e,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Es(e);break;case"select":Ht("invalid",e);break;case"textarea":Ht("invalid",e),xi(e,u.value,u.defaultValue,u.children),Es(e)}r=u.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||e.textContent===""+r||u.suppressHydrationWarning===!0||J_(e.textContent,r)?(u.popover!=null&&(Ht("beforetoggle",e),Ht("toggle",e)),u.onScroll!=null&&Ht("scroll",e),u.onScrollEnd!=null&&Ht("scrollend",e),u.onClick!=null&&(e.onclick=oc),e=!0):e=!1,e||vn(t)}function Tu(t){for(mt=t.return;mt;)switch(mt.tag){case 5:case 13:xe=!1;return;case 27:case 3:xe=!0;return;default:mt=mt.return}}function Ia(t){if(t!==mt)return!1;if(!Nt)return Tu(t),Nt=!0,!1;var e=t.tag,r;if((r=e!==3&&e!==27)&&((r=e===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||Hf(t.type,t.memoizedProps)),r=!r),r&&vt&&vn(t),Tu(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));t:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8)if(r=t.data,r==="/$"){if(e===0){vt=ui(t.nextSibling);break t}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++;t=t.nextSibling}vt=null}}else e===27?(e=vt,sa(t.type)?(t=Vf,Vf=null,vt=t):vt=e):vt=mt?ui(t.stateNode.nextSibling):null;return!0}function Zs(){vt=mt=null,Nt=!1}function Au(){var t=he;return t!==null&&(xn===null?xn=t:xn.push.apply(xn,t),he=null),t}function qs(t){he===null?he=[t]:he.push(t)}var ge=F(null),Wn=null,ri=null;function Ai(t,e,r){tt(ge,e._currentValue),e._currentValue=r}function oi(t){t._currentValue=ge.current,it(ge)}function Ba(t,e,r){for(;t!==null;){var u=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,u!==null&&(u.childLanes|=e)):u!==null&&(u.childLanes&e)!==e&&(u.childLanes|=e),t===r)break;t=t.return}}function Tr(t,e,r,u){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var x=f.child;m=m.firstContext;t:for(;m!==null;){var E=m;m=f;for(var D=0;D<e.length;D++)if(E.context===e[D]){m.lanes|=r,E=m.alternate,E!==null&&(E.lanes|=r),Ba(m.return,r,t),u||(x=null);break t}m=E.next}}else if(f.tag===18){if(x=f.return,x===null)throw Error(o(341));x.lanes|=r,m=x.alternate,m!==null&&(m.lanes|=r),Ba(x,r,t),x=null}else x=f.child;if(x!==null)x.return=f;else for(x=f;x!==null;){if(x===t){x=null;break}if(f=x.sibling,f!==null){f.return=x.return,x=f;break}x=x.return}f=x}}function ja(t,e,r,u){t=null;for(var f=e,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var x=f.alternate;if(x===null)throw Error(o(387));if(x=x.memoizedProps,x!==null){var E=f.type;cn(f.pendingProps.value,x.value)||(t!==null?t.push(E):t=[E])}}else if(f===ie.current){if(x=f.alternate,x===null)throw Error(o(387));x.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(fl):t=[fl])}f=f.return}t!==null&&Tr(e,t,r,u),e.flags|=262144}function Nu(t){for(t=t.firstContext;t!==null;){if(!cn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ua(t){Wn=t,ri=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function rn(t){return jm(Wn,t)}function Mu(t,e){return Wn===null&&Ua(t),jm(t,e)}function jm(t,e){var r=e._currentValue;if(e={context:e,memoizedValue:r,next:null},ri===null){if(t===null)throw Error(o(308));ri=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else ri=ri.next=e;return r}var K0=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(r,u){t.push(u)}};this.abort=function(){e.aborted=!0,t.forEach(function(r){return r()})}},$0=a.unstable_scheduleCallback,J0=a.unstable_NormalPriority,ke={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Nh(){return{controller:new K0,data:new Map,refCount:0}}function Bo(t){t.refCount--,t.refCount===0&&$0(J0,function(){t.controller.abort()})}var jo=null,Mh=0,Ar=0,Nr=null;function tb(t,e){if(jo===null){var r=jo=[];Mh=0,Ar=Of(),Nr={status:"pending",value:void 0,then:function(u){r.push(u)}}}return Mh++,e.then(Um,Um),e}function Um(){if(--Mh===0&&jo!==null){Nr!==null&&(Nr.status="fulfilled");var t=jo;jo=null,Ar=0,Nr=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function eb(t,e){var r=[],u={status:"pending",value:null,reason:null,then:function(f){r.push(f)}};return t.then(function(){u.status="fulfilled",u.value=e;for(var f=0;f<r.length;f++)(0,r[f])(e)},function(f){for(u.status="rejected",u.reason=f,f=0;f<r.length;f++)(0,r[f])(void 0)}),u}var Hm=Y.S;Y.S=function(t,e){typeof e=="object"&&e!==null&&typeof e.then=="function"&&tb(t,e),Hm!==null&&Hm(t,e)};var Ha=F(null);function Rh(){var t=Ha.current;return t!==null?t:fe.pooledCache}function Ru(t,e){e===null?tt(Ha,Ha.current):tt(Ha,e.pool)}function Zm(){var t=Rh();return t===null?null:{parent:ke._currentValue,pool:t}}var Uo=Error(o(460)),qm=Error(o(474)),Lu=Error(o(542)),Lh={then:function(){}};function Gm(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Ou(){}function Vm(t,e,r){switch(r=t[r],r===void 0?t.push(e):r!==e&&(e.then(Ou,Ou),e=r),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Fm(t),t;default:if(typeof e.status=="string")e.then(Ou,Ou);else{if(t=fe,t!==null&&100<t.shellSuspendCounter)throw Error(o(482));t=e,t.status="pending",t.then(function(u){if(e.status==="pending"){var f=e;f.status="fulfilled",f.value=u}},function(u){if(e.status==="pending"){var f=e;f.status="rejected",f.reason=u}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Fm(t),t}throw Ho=e,Uo}}var Ho=null;function Ym(){if(Ho===null)throw Error(o(459));var t=Ho;return Ho=null,t}function Fm(t){if(t===Uo||t===Lu)throw Error(o(483))}var Gs=!1;function Oh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Dh(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Vs(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ys(t,e,r){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,($t&2)!==0){var f=u.pending;return f===null?e.next=e:(e.next=f.next,f.next=e),u.pending=e,e=Ci(t),za(t,null,r),e}return ka(t,u,e,r),Ci(t)}function Zo(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194048)!==0)){var u=e.lanes;u&=t.pendingLanes,r|=u,e.lanes=r,Jl(t,r)}}function kh(t,e){var r=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,r===u)){var f=null,m=null;if(r=r.firstBaseUpdate,r!==null){do{var x={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};m===null?f=m=x:m=m.next=x,r=r.next}while(r!==null);m===null?f=m=e:m=m.next=e}else f=m=e;r={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}var zh=!1;function qo(){if(zh){var t=Nr;if(t!==null)throw t}}function Go(t,e,r,u){zh=!1;var f=t.updateQueue;Gs=!1;var m=f.firstBaseUpdate,x=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var D=E,Z=D.next;D.next=null,x===null?m=Z:x.next=Z,x=D;var X=t.alternate;X!==null&&(X=X.updateQueue,E=X.lastBaseUpdate,E!==x&&(E===null?X.firstBaseUpdate=Z:E.next=Z,X.lastBaseUpdate=D))}if(m!==null){var K=f.baseState;x=0,X=Z=D=null,E=m;do{var q=E.lane&-536870913,G=q!==E.lane;if(G?(Yt&q)===q:(u&q)===q){q!==0&&q===Ar&&(zh=!0),X!==null&&(X=X.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var Tt=t,St=E;q=e;var ne=r;switch(St.tag){case 1:if(Tt=St.payload,typeof Tt=="function"){K=Tt.call(ne,K,q);break t}K=Tt;break t;case 3:Tt.flags=Tt.flags&-65537|128;case 0:if(Tt=St.payload,q=typeof Tt=="function"?Tt.call(ne,K,q):Tt,q==null)break t;K=A({},K,q);break t;case 2:Gs=!0}}q=E.callback,q!==null&&(t.flags|=64,G&&(t.flags|=8192),G=f.callbacks,G===null?f.callbacks=[q]:G.push(q))}else G={lane:q,tag:E.tag,payload:E.payload,callback:E.callback,next:null},X===null?(Z=X=G,D=K):X=X.next=G,x|=q;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;G=E,E=G.next,G.next=null,f.lastBaseUpdate=G,f.shared.pending=null}}while(!0);X===null&&(D=K),f.baseState=D,f.firstBaseUpdate=Z,f.lastBaseUpdate=X,m===null&&(f.shared.lanes=0),ta|=x,t.lanes=x,t.memoizedState=K}}function Xm(t,e){if(typeof t!="function")throw Error(o(191,t));t.call(e)}function Qm(t,e){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)Xm(r[t],e)}var Mr=F(null),Du=F(0);function Wm(t,e){t=rs,tt(Du,t),tt(Mr,e),rs=t|e.baseLanes}function Ph(){tt(Du,rs),tt(Mr,Mr.current)}function Ih(){rs=Du.current,it(Mr),it(Du)}var Fs=0,Dt=null,te=null,Oe=null,ku=!1,Rr=!1,Za=!1,zu=0,Vo=0,Lr=null,nb=0;function Me(){throw Error(o(321))}function Bh(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!cn(t[r],e[r]))return!1;return!0}function jh(t,e,r,u,f,m){return Fs=m,Dt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Y.H=t===null||t.memoizedState===null?Dp:kp,Za=!1,m=r(u,f),Za=!1,Rr&&(m=$m(e,r,u,f)),Km(t),m}function Km(t){Y.H=Hu;var e=te!==null&&te.next!==null;if(Fs=0,Oe=te=Dt=null,ku=!1,Vo=0,Lr=null,e)throw Error(o(300));t===null||He||(t=t.dependencies,t!==null&&Nu(t)&&(He=!0))}function $m(t,e,r,u){Dt=t;var f=0;do{if(Rr&&(Lr=null),Vo=0,Rr=!1,25<=f)throw Error(o(301));if(f+=1,Oe=te=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Y.H=ub,m=e(r,u)}while(Rr);return m}function ib(){var t=Y.H,e=t.useState()[0];return e=typeof e.then=="function"?Yo(e):e,t=t.useState()[0],(te!==null?te.memoizedState:null)!==t&&(Dt.flags|=1024),e}function Uh(){var t=zu!==0;return zu=0,t}function Hh(t,e,r){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r}function Zh(t){if(ku){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}ku=!1}Fs=0,Oe=te=Dt=null,Rr=!1,Vo=zu=0,Lr=null}function yn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Oe===null?Dt.memoizedState=Oe=t:Oe=Oe.next=t,Oe}function De(){if(te===null){var t=Dt.alternate;t=t!==null?t.memoizedState:null}else t=te.next;var e=Oe===null?Dt.memoizedState:Oe.next;if(e!==null)Oe=e,te=t;else{if(t===null)throw Dt.alternate===null?Error(o(467)):Error(o(310));te=t,t={memoizedState:te.memoizedState,baseState:te.baseState,baseQueue:te.baseQueue,queue:te.queue,next:null},Oe===null?Dt.memoizedState=Oe=t:Oe=Oe.next=t}return Oe}function qh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yo(t){var e=Vo;return Vo+=1,Lr===null&&(Lr=[]),t=Vm(Lr,t,e),e=Dt,(Oe===null?e.memoizedState:Oe.next)===null&&(e=e.alternate,Y.H=e===null||e.memoizedState===null?Dp:kp),t}function Pu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Yo(t);if(t.$$typeof===$)return rn(t)}throw Error(o(438,String(t)))}function Gh(t){var e=null,r=Dt.updateQueue;if(r!==null&&(e=r.memoCache),e==null){var u=Dt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(e={data:u.data.map(function(f){return f.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),r===null&&(r=qh(),Dt.updateQueue=r),r.memoCache=e,r=e.data[e.index],r===void 0)for(r=e.data[e.index]=Array(t),u=0;u<t;u++)r[u]=qt;return e.index++,r}function ts(t,e){return typeof e=="function"?e(t):e}function Iu(t){var e=De();return Vh(e,te,t)}function Vh(t,e,r){var u=t.queue;if(u===null)throw Error(o(311));u.lastRenderedReducer=r;var f=t.baseQueue,m=u.pending;if(m!==null){if(f!==null){var x=f.next;f.next=m.next,m.next=x}e.baseQueue=f=m,u.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{e=f.next;var E=x=null,D=null,Z=e,X=!1;do{var K=Z.lane&-536870913;if(K!==Z.lane?(Yt&K)===K:(Fs&K)===K){var q=Z.revertLane;if(q===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),K===Ar&&(X=!0);else if((Fs&q)===q){Z=Z.next,q===Ar&&(X=!0);continue}else K={lane:0,revertLane:Z.revertLane,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},D===null?(E=D=K,x=m):D=D.next=K,Dt.lanes|=q,ta|=q;K=Z.action,Za&&r(m,K),m=Z.hasEagerState?Z.eagerState:r(m,K)}else q={lane:K,revertLane:Z.revertLane,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},D===null?(E=D=q,x=m):D=D.next=q,Dt.lanes|=K,ta|=K;Z=Z.next}while(Z!==null&&Z!==e);if(D===null?x=m:D.next=E,!cn(m,t.memoizedState)&&(He=!0,X&&(r=Nr,r!==null)))throw r;t.memoizedState=m,t.baseState=x,t.baseQueue=D,u.lastRenderedState=m}return f===null&&(u.lanes=0),[t.memoizedState,u.dispatch]}function Yh(t){var e=De(),r=e.queue;if(r===null)throw Error(o(311));r.lastRenderedReducer=t;var u=r.dispatch,f=r.pending,m=e.memoizedState;if(f!==null){r.pending=null;var x=f=f.next;do m=t(m,x.action),x=x.next;while(x!==f);cn(m,e.memoizedState)||(He=!0),e.memoizedState=m,e.baseQueue===null&&(e.baseState=m),r.lastRenderedState=m}return[m,u]}function Jm(t,e,r){var u=Dt,f=De(),m=Nt;if(m){if(r===void 0)throw Error(o(407));r=r()}else r=e();var x=!cn((te||f).memoizedState,r);x&&(f.memoizedState=r,He=!0),f=f.queue;var E=np.bind(null,u,f,t);if(Fo(2048,8,E,[t]),f.getSnapshot!==e||x||Oe!==null&&Oe.memoizedState.tag&1){if(u.flags|=2048,Or(9,Bu(),ep.bind(null,u,f,r,e),null),fe===null)throw Error(o(349));m||(Fs&124)!==0||tp(u,e,r)}return r}function tp(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Dt.updateQueue,e===null?(e=qh(),Dt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function ep(t,e,r,u){e.value=r,e.getSnapshot=u,ip(e)&&sp(t)}function np(t,e,r){return r(function(){ip(e)&&sp(t)})}function ip(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!cn(t,r)}catch{return!0}}function sp(t){var e=Us(t,2);e!==null&&Un(e,t,2)}function Fh(t){var e=yn();if(typeof t=="function"){var r=t;if(t=r(),Za){ot(!0);try{r()}finally{ot(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:t},e}function ap(t,e,r,u){return t.baseState=r,Vh(t,te,typeof u=="function"?u:ts)}function sb(t,e,r,u,f){if(Uu(t))throw Error(o(485));if(t=e.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){m.listeners.push(x)}};Y.T!==null?r(!0):m.isTransition=!1,u(m),r=e.pending,r===null?(m.next=e.pending=m,rp(e,m)):(m.next=r.next,e.pending=r.next=m)}}function rp(t,e){var r=e.action,u=e.payload,f=t.state;if(e.isTransition){var m=Y.T,x={};Y.T=x;try{var E=r(f,u),D=Y.S;D!==null&&D(x,E),op(t,e,E)}catch(Z){Xh(t,e,Z)}finally{Y.T=m}}else try{m=r(f,u),op(t,e,m)}catch(Z){Xh(t,e,Z)}}function op(t,e,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(u){lp(t,e,u)},function(u){return Xh(t,e,u)}):lp(t,e,r)}function lp(t,e,r){e.status="fulfilled",e.value=r,up(e),t.state=r,e=t.pending,e!==null&&(r=e.next,r===e?t.pending=null:(r=r.next,e.next=r,rp(t,r)))}function Xh(t,e,r){var u=t.pending;if(t.pending=null,u!==null){u=u.next;do e.status="rejected",e.reason=r,up(e),e=e.next;while(e!==u)}t.action=null}function up(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function cp(t,e){return e}function hp(t,e){if(Nt){var r=fe.formState;if(r!==null){t:{var u=Dt;if(Nt){if(vt){e:{for(var f=vt,m=xe;f.nodeType!==8;){if(!m){f=null;break e}if(f=ui(f.nextSibling),f===null){f=null;break e}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){vt=ui(f.nextSibling),u=f.data==="F!";break t}}vn(u)}u=!1}u&&(e=r[0])}}return r=yn(),r.memoizedState=r.baseState=e,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cp,lastRenderedState:e},r.queue=u,r=Rp.bind(null,Dt,u),u.dispatch=r,u=Fh(!1),m=Jh.bind(null,Dt,!1,u.queue),u=yn(),f={state:e,dispatch:null,action:t,pending:null},u.queue=f,r=sb.bind(null,Dt,f,m,r),f.dispatch=r,u.memoizedState=t,[e,r,!1]}function fp(t){var e=De();return dp(e,te,t)}function dp(t,e,r){if(e=Vh(t,e,cp)[0],t=Iu(ts)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var u=Yo(e)}catch(x){throw x===Uo?Lu:x}else u=e;e=De();var f=e.queue,m=f.dispatch;return r!==e.memoizedState&&(Dt.flags|=2048,Or(9,Bu(),ab.bind(null,f,r),null)),[u,m,t]}function ab(t,e){t.action=e}function mp(t){var e=De(),r=te;if(r!==null)return dp(e,r,t);De(),e=e.memoizedState,r=De();var u=r.queue.dispatch;return r.memoizedState=t,[e,u,!1]}function Or(t,e,r,u){return t={tag:t,create:r,deps:u,inst:e,next:null},e=Dt.updateQueue,e===null&&(e=qh(),Dt.updateQueue=e),r=e.lastEffect,r===null?e.lastEffect=t.next=t:(u=r.next,r.next=t,t.next=u,e.lastEffect=t),t}function Bu(){return{destroy:void 0,resource:void 0}}function pp(){return De().memoizedState}function ju(t,e,r,u){var f=yn();u=u===void 0?null:u,Dt.flags|=t,f.memoizedState=Or(1|e,Bu(),r,u)}function Fo(t,e,r,u){var f=De();u=u===void 0?null:u;var m=f.memoizedState.inst;te!==null&&u!==null&&Bh(u,te.memoizedState.deps)?f.memoizedState=Or(e,m,r,u):(Dt.flags|=t,f.memoizedState=Or(1|e,m,r,u))}function _p(t,e){ju(8390656,8,t,e)}function gp(t,e){Fo(2048,8,t,e)}function vp(t,e){return Fo(4,2,t,e)}function yp(t,e){return Fo(4,4,t,e)}function bp(t,e){if(typeof e=="function"){t=t();var r=e(t);return function(){typeof r=="function"?r():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function xp(t,e,r){r=r!=null?r.concat([t]):null,Fo(4,4,bp.bind(null,e,t),r)}function Qh(){}function Sp(t,e){var r=De();e=e===void 0?null:e;var u=r.memoizedState;return e!==null&&Bh(e,u[1])?u[0]:(r.memoizedState=[t,e],t)}function wp(t,e){var r=De();e=e===void 0?null:e;var u=r.memoizedState;if(e!==null&&Bh(e,u[1]))return u[0];if(u=t(),Za){ot(!0);try{t()}finally{ot(!1)}}return r.memoizedState=[u,e],u}function Wh(t,e,r){return r===void 0||(Fs&1073741824)!==0?t.memoizedState=e:(t.memoizedState=r,t=T_(),Dt.lanes|=t,ta|=t,r)}function Ep(t,e,r,u){return cn(r,e)?r:Mr.current!==null?(t=Wh(t,r,u),cn(t,e)||(He=!0),t):(Fs&42)===0?(He=!0,t.memoizedState=r):(t=T_(),Dt.lanes|=t,ta|=t,e)}function Cp(t,e,r,u,f){var m=at.p;at.p=m!==0&&8>m?m:8;var x=Y.T,E={};Y.T=E,Jh(t,!1,e,r);try{var D=f(),Z=Y.S;if(Z!==null&&Z(E,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var X=eb(D,u);Xo(t,e,X,jn(t))}else Xo(t,e,u,jn(t))}catch(K){Xo(t,e,{then:function(){},status:"rejected",reason:K},jn())}finally{at.p=m,Y.T=x}}function rb(){}function Kh(t,e,r,u){if(t.tag!==5)throw Error(o(476));var f=Tp(t).queue;Cp(t,f,e,nt,r===null?rb:function(){return Ap(t),r(u)})}function Tp(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:nt,baseState:nt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:nt},next:null};var r={};return e.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ts,lastRenderedState:r},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function Ap(t){var e=Tp(t).next.queue;Xo(t,e,{},jn())}function $h(){return rn(fl)}function Np(){return De().memoizedState}function Mp(){return De().memoizedState}function ob(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var r=jn();t=Vs(r);var u=Ys(e,t,r);u!==null&&(Un(u,e,r),Zo(u,e,r)),e={cache:Nh()},t.payload=e;return}e=e.return}}function lb(t,e,r){var u=jn();r={lane:u,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},Uu(t)?Lp(e,r):(r=Ki(t,e,r,u),r!==null&&(Un(r,t,u),Op(r,e,u)))}function Rp(t,e,r){var u=jn();Xo(t,e,r,u)}function Xo(t,e,r,u){var f={lane:u,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(Uu(t))Lp(e,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=e.lastRenderedReducer,m!==null))try{var x=e.lastRenderedState,E=m(x,r);if(f.hasEagerState=!0,f.eagerState=E,cn(E,x))return ka(t,e,f,0),fe===null&&Da(),!1}catch{}finally{}if(r=Ki(t,e,f,u),r!==null)return Un(r,t,u),Op(r,e,u),!0}return!1}function Jh(t,e,r,u){if(u={lane:2,revertLane:Of(),action:u,hasEagerState:!1,eagerState:null,next:null},Uu(t)){if(e)throw Error(o(479))}else e=Ki(t,r,u,2),e!==null&&Un(e,t,2)}function Uu(t){var e=t.alternate;return t===Dt||e!==null&&e===Dt}function Lp(t,e){Rr=ku=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Op(t,e,r){if((r&4194048)!==0){var u=e.lanes;u&=t.pendingLanes,r|=u,e.lanes=r,Jl(t,r)}}var Hu={readContext:rn,use:Pu,useCallback:Me,useContext:Me,useEffect:Me,useImperativeHandle:Me,useLayoutEffect:Me,useInsertionEffect:Me,useMemo:Me,useReducer:Me,useRef:Me,useState:Me,useDebugValue:Me,useDeferredValue:Me,useTransition:Me,useSyncExternalStore:Me,useId:Me,useHostTransitionStatus:Me,useFormState:Me,useActionState:Me,useOptimistic:Me,useMemoCache:Me,useCacheRefresh:Me},Dp={readContext:rn,use:Pu,useCallback:function(t,e){return yn().memoizedState=[t,e===void 0?null:e],t},useContext:rn,useEffect:_p,useImperativeHandle:function(t,e,r){r=r!=null?r.concat([t]):null,ju(4194308,4,bp.bind(null,e,t),r)},useLayoutEffect:function(t,e){return ju(4194308,4,t,e)},useInsertionEffect:function(t,e){ju(4,2,t,e)},useMemo:function(t,e){var r=yn();e=e===void 0?null:e;var u=t();if(Za){ot(!0);try{t()}finally{ot(!1)}}return r.memoizedState=[u,e],u},useReducer:function(t,e,r){var u=yn();if(r!==void 0){var f=r(e);if(Za){ot(!0);try{r(e)}finally{ot(!1)}}}else f=e;return u.memoizedState=u.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},u.queue=t,t=t.dispatch=lb.bind(null,Dt,t),[u.memoizedState,t]},useRef:function(t){var e=yn();return t={current:t},e.memoizedState=t},useState:function(t){t=Fh(t);var e=t.queue,r=Rp.bind(null,Dt,e);return e.dispatch=r,[t.memoizedState,r]},useDebugValue:Qh,useDeferredValue:function(t,e){var r=yn();return Wh(r,t,e)},useTransition:function(){var t=Fh(!1);return t=Cp.bind(null,Dt,t.queue,!0,!1),yn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,r){var u=Dt,f=yn();if(Nt){if(r===void 0)throw Error(o(407));r=r()}else{if(r=e(),fe===null)throw Error(o(349));(Yt&124)!==0||tp(u,e,r)}f.memoizedState=r;var m={value:r,getSnapshot:e};return f.queue=m,_p(np.bind(null,u,m,t),[t]),u.flags|=2048,Or(9,Bu(),ep.bind(null,u,m,r,e),null),r},useId:function(){var t=yn(),e=fe.identifierPrefix;if(Nt){var r=O,u=w;r=(u&~(1<<32-et(u)-1)).toString(32)+r,e="«"+e+"R"+r,r=zu++,0<r&&(e+="H"+r.toString(32)),e+="»"}else r=nb++,e="«"+e+"r"+r.toString(32)+"»";return t.memoizedState=e},useHostTransitionStatus:$h,useFormState:hp,useActionState:hp,useOptimistic:function(t){var e=yn();e.memoizedState=e.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=r,e=Jh.bind(null,Dt,!0,r),r.dispatch=e,[t,e]},useMemoCache:Gh,useCacheRefresh:function(){return yn().memoizedState=ob.bind(null,Dt)}},kp={readContext:rn,use:Pu,useCallback:Sp,useContext:rn,useEffect:gp,useImperativeHandle:xp,useInsertionEffect:vp,useLayoutEffect:yp,useMemo:wp,useReducer:Iu,useRef:pp,useState:function(){return Iu(ts)},useDebugValue:Qh,useDeferredValue:function(t,e){var r=De();return Ep(r,te.memoizedState,t,e)},useTransition:function(){var t=Iu(ts)[0],e=De().memoizedState;return[typeof t=="boolean"?t:Yo(t),e]},useSyncExternalStore:Jm,useId:Np,useHostTransitionStatus:$h,useFormState:fp,useActionState:fp,useOptimistic:function(t,e){var r=De();return ap(r,te,t,e)},useMemoCache:Gh,useCacheRefresh:Mp},ub={readContext:rn,use:Pu,useCallback:Sp,useContext:rn,useEffect:gp,useImperativeHandle:xp,useInsertionEffect:vp,useLayoutEffect:yp,useMemo:wp,useReducer:Yh,useRef:pp,useState:function(){return Yh(ts)},useDebugValue:Qh,useDeferredValue:function(t,e){var r=De();return te===null?Wh(r,t,e):Ep(r,te.memoizedState,t,e)},useTransition:function(){var t=Yh(ts)[0],e=De().memoizedState;return[typeof t=="boolean"?t:Yo(t),e]},useSyncExternalStore:Jm,useId:Np,useHostTransitionStatus:$h,useFormState:mp,useActionState:mp,useOptimistic:function(t,e){var r=De();return te!==null?ap(r,te,t,e):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:Gh,useCacheRefresh:Mp},Dr=null,Qo=0;function Zu(t){var e=Qo;return Qo+=1,Dr===null&&(Dr=[]),Vm(Dr,t,e)}function Wo(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function qu(t,e){throw e.$$typeof===T?Error(o(525)):(t=Object.prototype.toString.call(e),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function zp(t){var e=t._init;return e(t._payload)}function Pp(t){function e(I,z){if(t){var H=I.deletions;H===null?(I.deletions=[z],I.flags|=16):H.push(z)}}function r(I,z){if(!t)return null;for(;z!==null;)e(I,z),z=z.sibling;return null}function u(I){for(var z=new Map;I!==null;)I.key!==null?z.set(I.key,I):z.set(I.index,I),I=I.sibling;return z}function f(I,z){return I=Qn(I,z),I.index=0,I.sibling=null,I}function m(I,z,H){return I.index=H,t?(H=I.alternate,H!==null?(H=H.index,H<z?(I.flags|=67108866,z):H):(I.flags|=67108866,z)):(I.flags|=1048576,z)}function x(I){return t&&I.alternate===null&&(I.flags|=67108866),I}function E(I,z,H,W){return z===null||z.tag!==6?(z=Io(H,I.mode,W),z.return=I,z):(z=f(z,H),z.return=I,z)}function D(I,z,H,W){var _t=H.type;return _t===M?X(I,z,H.props.children,W,H.key):z!==null&&(z.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===dt&&zp(_t)===z.type)?(z=f(z,H.props),Wo(z,H),z.return=I,z):(z=Pa(H.type,H.key,H.props,null,I.mode,W),Wo(z,H),z.return=I,z)}function Z(I,z,H,W){return z===null||z.tag!==4||z.stateNode.containerInfo!==H.containerInfo||z.stateNode.implementation!==H.implementation?(z=Cr(H,I.mode,W),z.return=I,z):(z=f(z,H.children||[]),z.return=I,z)}function X(I,z,H,W,_t){return z===null||z.tag!==7?(z=Ti(H,I.mode,W,_t),z.return=I,z):(z=f(z,H),z.return=I,z)}function K(I,z,H){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=Io(""+z,I.mode,H),z.return=I,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case C:return H=Pa(z.type,z.key,z.props,null,I.mode,H),Wo(H,z),H.return=I,H;case P:return z=Cr(z,I.mode,H),z.return=I,z;case dt:var W=z._init;return z=W(z._payload),K(I,z,H)}if(Kt(z)||pt(z))return z=Ti(z,I.mode,H,null),z.return=I,z;if(typeof z.then=="function")return K(I,Zu(z),H);if(z.$$typeof===$)return K(I,Mu(I,z),H);qu(I,z)}return null}function q(I,z,H,W){var _t=z!==null?z.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return _t!==null?null:E(I,z,""+H,W);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case C:return H.key===_t?D(I,z,H,W):null;case P:return H.key===_t?Z(I,z,H,W):null;case dt:return _t=H._init,H=_t(H._payload),q(I,z,H,W)}if(Kt(H)||pt(H))return _t!==null?null:X(I,z,H,W,null);if(typeof H.then=="function")return q(I,z,Zu(H),W);if(H.$$typeof===$)return q(I,z,Mu(I,H),W);qu(I,H)}return null}function G(I,z,H,W,_t){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return I=I.get(H)||null,E(z,I,""+W,_t);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case C:return I=I.get(W.key===null?H:W.key)||null,D(z,I,W,_t);case P:return I=I.get(W.key===null?H:W.key)||null,Z(z,I,W,_t);case dt:var Pt=W._init;return W=Pt(W._payload),G(I,z,H,W,_t)}if(Kt(W)||pt(W))return I=I.get(H)||null,X(z,I,W,_t,null);if(typeof W.then=="function")return G(I,z,H,Zu(W),_t);if(W.$$typeof===$)return G(I,z,H,Mu(z,W),_t);qu(z,W)}return null}function Tt(I,z,H,W){for(var _t=null,Pt=null,bt=z,wt=z=0,qe=null;bt!==null&&wt<H.length;wt++){bt.index>wt?(qe=bt,bt=null):qe=bt.sibling;var Qt=q(I,bt,H[wt],W);if(Qt===null){bt===null&&(bt=qe);break}t&&bt&&Qt.alternate===null&&e(I,bt),z=m(Qt,z,wt),Pt===null?_t=Qt:Pt.sibling=Qt,Pt=Qt,bt=qe}if(wt===H.length)return r(I,bt),Nt&&j(I,wt),_t;if(bt===null){for(;wt<H.length;wt++)bt=K(I,H[wt],W),bt!==null&&(z=m(bt,z,wt),Pt===null?_t=bt:Pt.sibling=bt,Pt=bt);return Nt&&j(I,wt),_t}for(bt=u(bt);wt<H.length;wt++)qe=G(bt,I,wt,H[wt],W),qe!==null&&(t&&qe.alternate!==null&&bt.delete(qe.key===null?wt:qe.key),z=m(qe,z,wt),Pt===null?_t=qe:Pt.sibling=qe,Pt=qe);return t&&bt.forEach(function(ua){return e(I,ua)}),Nt&&j(I,wt),_t}function St(I,z,H,W){if(H==null)throw Error(o(151));for(var _t=null,Pt=null,bt=z,wt=z=0,qe=null,Qt=H.next();bt!==null&&!Qt.done;wt++,Qt=H.next()){bt.index>wt?(qe=bt,bt=null):qe=bt.sibling;var ua=q(I,bt,Qt.value,W);if(ua===null){bt===null&&(bt=qe);break}t&&bt&&ua.alternate===null&&e(I,bt),z=m(ua,z,wt),Pt===null?_t=ua:Pt.sibling=ua,Pt=ua,bt=qe}if(Qt.done)return r(I,bt),Nt&&j(I,wt),_t;if(bt===null){for(;!Qt.done;wt++,Qt=H.next())Qt=K(I,Qt.value,W),Qt!==null&&(z=m(Qt,z,wt),Pt===null?_t=Qt:Pt.sibling=Qt,Pt=Qt);return Nt&&j(I,wt),_t}for(bt=u(bt);!Qt.done;wt++,Qt=H.next())Qt=G(bt,I,wt,Qt.value,W),Qt!==null&&(t&&Qt.alternate!==null&&bt.delete(Qt.key===null?wt:Qt.key),z=m(Qt,z,wt),Pt===null?_t=Qt:Pt.sibling=Qt,Pt=Qt);return t&&bt.forEach(function(cx){return e(I,cx)}),Nt&&j(I,wt),_t}function ne(I,z,H,W){if(typeof H=="object"&&H!==null&&H.type===M&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case C:t:{for(var _t=H.key;z!==null;){if(z.key===_t){if(_t=H.type,_t===M){if(z.tag===7){r(I,z.sibling),W=f(z,H.props.children),W.return=I,I=W;break t}}else if(z.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===dt&&zp(_t)===z.type){r(I,z.sibling),W=f(z,H.props),Wo(W,H),W.return=I,I=W;break t}r(I,z);break}else e(I,z);z=z.sibling}H.type===M?(W=Ti(H.props.children,I.mode,W,H.key),W.return=I,I=W):(W=Pa(H.type,H.key,H.props,null,I.mode,W),Wo(W,H),W.return=I,I=W)}return x(I);case P:t:{for(_t=H.key;z!==null;){if(z.key===_t)if(z.tag===4&&z.stateNode.containerInfo===H.containerInfo&&z.stateNode.implementation===H.implementation){r(I,z.sibling),W=f(z,H.children||[]),W.return=I,I=W;break t}else{r(I,z);break}else e(I,z);z=z.sibling}W=Cr(H,I.mode,W),W.return=I,I=W}return x(I);case dt:return _t=H._init,H=_t(H._payload),ne(I,z,H,W)}if(Kt(H))return Tt(I,z,H,W);if(pt(H)){if(_t=pt(H),typeof _t!="function")throw Error(o(150));return H=_t.call(H),St(I,z,H,W)}if(typeof H.then=="function")return ne(I,z,Zu(H),W);if(H.$$typeof===$)return ne(I,z,Mu(I,H),W);qu(I,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,z!==null&&z.tag===6?(r(I,z.sibling),W=f(z,H),W.return=I,I=W):(r(I,z),W=Io(H,I.mode,W),W.return=I,I=W),x(I)):r(I,z)}return function(I,z,H,W){try{Qo=0;var _t=ne(I,z,H,W);return Dr=null,_t}catch(bt){if(bt===Uo||bt===Lu)throw bt;var Pt=mn(29,bt,null,I.mode);return Pt.lanes=W,Pt.return=I,Pt}finally{}}}var kr=Pp(!0),Ip=Pp(!1),Kn=F(null),Ni=null;function Xs(t){var e=t.alternate;tt(ze,ze.current&1),tt(Kn,t),Ni===null&&(e===null||Mr.current!==null||e.memoizedState!==null)&&(Ni=t)}function Bp(t){if(t.tag===22){if(tt(ze,ze.current),tt(Kn,t),Ni===null){var e=t.alternate;e!==null&&e.memoizedState!==null&&(Ni=t)}}else Qs()}function Qs(){tt(ze,ze.current),tt(Kn,Kn.current)}function es(t){it(Kn),Ni===t&&(Ni=null),it(ze)}var ze=F(0);function Gu(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||Gf(r)))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function tf(t,e,r,u){e=t.memoizedState,r=r(u,e),r=r==null?e:A({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var ef={enqueueSetState:function(t,e,r){t=t._reactInternals;var u=jn(),f=Vs(u);f.payload=e,r!=null&&(f.callback=r),e=Ys(t,f,u),e!==null&&(Un(e,t,u),Zo(e,t,u))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var u=jn(),f=Vs(u);f.tag=1,f.payload=e,r!=null&&(f.callback=r),e=Ys(t,f,u),e!==null&&(Un(e,t,u),Zo(e,t,u))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=jn(),u=Vs(r);u.tag=2,e!=null&&(u.callback=e),e=Ys(t,u,r),e!==null&&(Un(e,t,r),Zo(e,t,r))}};function jp(t,e,r,u,f,m,x){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,m,x):e.prototype&&e.prototype.isPureReactComponent?!hn(r,u)||!hn(f,m):!0}function Up(t,e,r,u){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,u),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,u),e.state!==t&&ef.enqueueReplaceState(e,e.state,null)}function qa(t,e){var r=e;if("ref"in e){r={};for(var u in e)u!=="ref"&&(r[u]=e[u])}if(t=t.defaultProps){r===e&&(r=A({},r));for(var f in t)r[f]===void 0&&(r[f]=t[f])}return r}var Vu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Hp(t){Vu(t)}function Zp(t){console.error(t)}function qp(t){Vu(t)}function Yu(t,e){try{var r=t.onUncaughtError;r(e.value,{componentStack:e.stack})}catch(u){setTimeout(function(){throw u})}}function Gp(t,e,r){try{var u=t.onCaughtError;u(r.value,{componentStack:r.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function nf(t,e,r){return r=Vs(r),r.tag=3,r.payload={element:null},r.callback=function(){Yu(t,e)},r}function Vp(t){return t=Vs(t),t.tag=3,t}function Yp(t,e,r,u){var f=r.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;t.payload=function(){return f(m)},t.callback=function(){Gp(e,r,u)}}var x=r.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(t.callback=function(){Gp(e,r,u),typeof f!="function"&&(ea===null?ea=new Set([this]):ea.add(this));var E=u.stack;this.componentDidCatch(u.value,{componentStack:E!==null?E:""})})}function cb(t,e,r,u,f){if(r.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(e=r.alternate,e!==null&&ja(e,r,f,!0),r=Kn.current,r!==null){switch(r.tag){case 13:return Ni===null?Af():r.alternate===null&&Te===0&&(Te=3),r.flags&=-257,r.flags|=65536,r.lanes=f,u===Lh?r.flags|=16384:(e=r.updateQueue,e===null?r.updateQueue=new Set([u]):e.add(u),Mf(t,u,f)),!1;case 22:return r.flags|=65536,u===Lh?r.flags|=16384:(e=r.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([u])},r.updateQueue=e):(r=e.retryQueue,r===null?e.retryQueue=new Set([u]):r.add(u)),Mf(t,u,f)),!1}throw Error(o(435,r.tag))}return Mf(t,u,f),Af(),!1}if(Nt)return e=Kn.current,e!==null?((e.flags&65536)===0&&(e.flags|=256),e.flags|=65536,e.lanes=f,u!==Ue&&(t=Error(o(422),{cause:u}),qs(fn(t,r)))):(u!==Ue&&(e=Error(o(423),{cause:u}),qs(fn(e,r))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,u=fn(u,r),f=nf(t.stateNode,u,f),kh(t,f),Te!==4&&(Te=2)),!1;var m=Error(o(520),{cause:u});if(m=fn(m,r),il===null?il=[m]:il.push(m),Te!==4&&(Te=2),e===null)return!0;u=fn(u,r),r=e;do{switch(r.tag){case 3:return r.flags|=65536,t=f&-f,r.lanes|=t,t=nf(r.stateNode,u,t),kh(r,t),!1;case 1:if(e=r.type,m=r.stateNode,(r.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ea===null||!ea.has(m))))return r.flags|=65536,f&=-f,r.lanes|=f,f=Vp(f),Yp(f,t,r,u),kh(r,f),!1}r=r.return}while(r!==null);return!1}var Fp=Error(o(461)),He=!1;function Ke(t,e,r,u){e.child=t===null?Ip(e,null,r,u):kr(e,t.child,r,u)}function Xp(t,e,r,u,f){r=r.render;var m=e.ref;if("ref"in u){var x={};for(var E in u)E!=="ref"&&(x[E]=u[E])}else x=u;return Ua(e),u=jh(t,e,r,x,m,f),E=Uh(),t!==null&&!He?(Hh(t,e,f),ns(t,e,f)):(Nt&&E&&J(e),e.flags|=1,Ke(t,e,u,f),e.child)}function Qp(t,e,r,u,f){if(t===null){var m=r.type;return typeof m=="function"&&!Er(m)&&m.defaultProps===void 0&&r.compare===null?(e.tag=15,e.type=m,Wp(t,e,m,u,f)):(t=Pa(r.type,null,u,e,e.mode,f),t.ref=e.ref,t.return=e,e.child=t)}if(m=t.child,!hf(t,f)){var x=m.memoizedProps;if(r=r.compare,r=r!==null?r:hn,r(x,u)&&t.ref===e.ref)return ns(t,e,f)}return e.flags|=1,t=Qn(m,u),t.ref=e.ref,t.return=e,e.child=t}function Wp(t,e,r,u,f){if(t!==null){var m=t.memoizedProps;if(hn(m,u)&&t.ref===e.ref)if(He=!1,e.pendingProps=u=m,hf(t,f))(t.flags&131072)!==0&&(He=!0);else return e.lanes=t.lanes,ns(t,e,f)}return sf(t,e,r,u,f)}function Kp(t,e,r){var u=e.pendingProps,f=u.children,m=t!==null?t.memoizedState:null;if(u.mode==="hidden"){if((e.flags&128)!==0){if(u=m!==null?m.baseLanes|r:r,t!==null){for(f=e.child=t.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;e.childLanes=m&~u}else e.childLanes=0,e.child=null;return $p(t,e,u,r)}if((r&536870912)!==0)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&Ru(e,m!==null?m.cachePool:null),m!==null?Wm(e,m):Ph(),Bp(e);else return e.lanes=e.childLanes=536870912,$p(t,e,m!==null?m.baseLanes|r:r,r)}else m!==null?(Ru(e,m.cachePool),Wm(e,m),Qs(),e.memoizedState=null):(t!==null&&Ru(e,null),Ph(),Qs());return Ke(t,e,f,r),e.child}function $p(t,e,r,u){var f=Rh();return f=f===null?null:{parent:ke._currentValue,pool:f},e.memoizedState={baseLanes:r,cachePool:f},t!==null&&Ru(e,null),Ph(),Bp(e),t!==null&&ja(t,e,u,!0),null}function Fu(t,e){var r=e.ref;if(r===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(o(284));(t===null||t.ref!==r)&&(e.flags|=4194816)}}function sf(t,e,r,u,f){return Ua(e),r=jh(t,e,r,u,void 0,f),u=Uh(),t!==null&&!He?(Hh(t,e,f),ns(t,e,f)):(Nt&&u&&J(e),e.flags|=1,Ke(t,e,r,f),e.child)}function Jp(t,e,r,u,f,m){return Ua(e),e.updateQueue=null,r=$m(e,u,r,f),Km(t),u=Uh(),t!==null&&!He?(Hh(t,e,m),ns(t,e,m)):(Nt&&u&&J(e),e.flags|=1,Ke(t,e,r,m),e.child)}function t_(t,e,r,u,f){if(Ua(e),e.stateNode===null){var m=$i,x=r.contextType;typeof x=="object"&&x!==null&&(m=rn(x)),m=new r(u,m),e.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=ef,e.stateNode=m,m._reactInternals=e,m=e.stateNode,m.props=u,m.state=e.memoizedState,m.refs={},Oh(e),x=r.contextType,m.context=typeof x=="object"&&x!==null?rn(x):$i,m.state=e.memoizedState,x=r.getDerivedStateFromProps,typeof x=="function"&&(tf(e,r,x,u),m.state=e.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(x=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),x!==m.state&&ef.enqueueReplaceState(m,m.state,null),Go(e,u,m,f),qo(),m.state=e.memoizedState),typeof m.componentDidMount=="function"&&(e.flags|=4194308),u=!0}else if(t===null){m=e.stateNode;var E=e.memoizedProps,D=qa(r,E);m.props=D;var Z=m.context,X=r.contextType;x=$i,typeof X=="object"&&X!==null&&(x=rn(X));var K=r.getDerivedStateFromProps;X=typeof K=="function"||typeof m.getSnapshotBeforeUpdate=="function",E=e.pendingProps!==E,X||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E||Z!==x)&&Up(e,m,u,x),Gs=!1;var q=e.memoizedState;m.state=q,Go(e,u,m,f),qo(),Z=e.memoizedState,E||q!==Z||Gs?(typeof K=="function"&&(tf(e,r,K,u),Z=e.memoizedState),(D=Gs||jp(e,r,D,u,q,Z,x))?(X||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(e.flags|=4194308)):(typeof m.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=u,e.memoizedState=Z),m.props=u,m.state=Z,m.context=x,u=D):(typeof m.componentDidMount=="function"&&(e.flags|=4194308),u=!1)}else{m=e.stateNode,Dh(t,e),x=e.memoizedProps,X=qa(r,x),m.props=X,K=e.pendingProps,q=m.context,Z=r.contextType,D=$i,typeof Z=="object"&&Z!==null&&(D=rn(Z)),E=r.getDerivedStateFromProps,(Z=typeof E=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==K||q!==D)&&Up(e,m,u,D),Gs=!1,q=e.memoizedState,m.state=q,Go(e,u,m,f),qo();var G=e.memoizedState;x!==K||q!==G||Gs||t!==null&&t.dependencies!==null&&Nu(t.dependencies)?(typeof E=="function"&&(tf(e,r,E,u),G=e.memoizedState),(X=Gs||jp(e,r,X,u,q,G,D)||t!==null&&t.dependencies!==null&&Nu(t.dependencies))?(Z||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,G,D),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,G,D)),typeof m.componentDidUpdate=="function"&&(e.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof m.componentDidUpdate!="function"||x===t.memoizedProps&&q===t.memoizedState||(e.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&q===t.memoizedState||(e.flags|=1024),e.memoizedProps=u,e.memoizedState=G),m.props=u,m.state=G,m.context=D,u=X):(typeof m.componentDidUpdate!="function"||x===t.memoizedProps&&q===t.memoizedState||(e.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&q===t.memoizedState||(e.flags|=1024),u=!1)}return m=u,Fu(t,e),u=(e.flags&128)!==0,m||u?(m=e.stateNode,r=u&&typeof r.getDerivedStateFromError!="function"?null:m.render(),e.flags|=1,t!==null&&u?(e.child=kr(e,t.child,null,f),e.child=kr(e,null,r,f)):Ke(t,e,r,f),e.memoizedState=m.state,t=e.child):t=ns(t,e,f),t}function e_(t,e,r,u){return Zs(),e.flags|=256,Ke(t,e,r,u),e.child}var af={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function rf(t){return{baseLanes:t,cachePool:Zm()}}function of(t,e,r){return t=t!==null?t.childLanes&~r:0,e&&(t|=$n),t}function n_(t,e,r){var u=e.pendingProps,f=!1,m=(e.flags&128)!==0,x;if((x=m)||(x=t!==null&&t.memoizedState===null?!1:(ze.current&2)!==0),x&&(f=!0,e.flags&=-129),x=(e.flags&32)!==0,e.flags&=-33,t===null){if(Nt){if(f?Xs(e):Qs(),Nt){var E=vt,D;if(D=E){t:{for(D=E,E=xe;D.nodeType!==8;){if(!E){E=null;break t}if(D=ui(D.nextSibling),D===null){E=null;break t}}E=D}E!==null?(e.memoizedState={dehydrated:E,treeContext:y!==null?{id:w,overflow:O}:null,retryLane:536870912,hydrationErrors:null},D=mn(18,null,null,0),D.stateNode=E,D.return=e,e.child=D,mt=e,vt=null,D=!0):D=!1}D||vn(e)}if(E=e.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return Gf(E)?e.lanes=32:e.lanes=536870912,null;es(e)}return E=u.children,u=u.fallback,f?(Qs(),f=e.mode,E=Xu({mode:"hidden",children:E},f),u=Ti(u,f,r,null),E.return=e,u.return=e,E.sibling=u,e.child=E,f=e.child,f.memoizedState=rf(r),f.childLanes=of(t,x,r),e.memoizedState=af,u):(Xs(e),lf(e,E))}if(D=t.memoizedState,D!==null&&(E=D.dehydrated,E!==null)){if(m)e.flags&256?(Xs(e),e.flags&=-257,e=uf(t,e,r)):e.memoizedState!==null?(Qs(),e.child=t.child,e.flags|=128,e=null):(Qs(),f=u.fallback,E=e.mode,u=Xu({mode:"visible",children:u.children},E),f=Ti(f,E,r,null),f.flags|=2,u.return=e,f.return=e,u.sibling=f,e.child=u,kr(e,t.child,null,r),u=e.child,u.memoizedState=rf(r),u.childLanes=of(t,x,r),e.memoizedState=af,e=f);else if(Xs(e),Gf(E)){if(x=E.nextSibling&&E.nextSibling.dataset,x)var Z=x.dgst;x=Z,u=Error(o(419)),u.stack="",u.digest=x,qs({value:u,source:null,stack:null}),e=uf(t,e,r)}else if(He||ja(t,e,r,!1),x=(r&t.childLanes)!==0,He||x){if(x=fe,x!==null&&(u=r&-r,u=(u&42)!==0?1:go(u),u=(u&(x.suspendedLanes|r))!==0?0:u,u!==0&&u!==D.retryLane))throw D.retryLane=u,Us(t,u),Un(x,t,u),Fp;E.data==="$?"||Af(),e=uf(t,e,r)}else E.data==="$?"?(e.flags|=192,e.child=t.child,e=null):(t=D.treeContext,vt=ui(E.nextSibling),mt=e,Nt=!0,he=null,xe=!1,t!==null&&(h[_++]=w,h[_++]=O,h[_++]=y,w=t.id,O=t.overflow,y=e),e=lf(e,u.children),e.flags|=4096);return e}return f?(Qs(),f=u.fallback,E=e.mode,D=t.child,Z=D.sibling,u=Qn(D,{mode:"hidden",children:u.children}),u.subtreeFlags=D.subtreeFlags&65011712,Z!==null?f=Qn(Z,f):(f=Ti(f,E,r,null),f.flags|=2),f.return=e,u.return=e,u.sibling=f,e.child=u,u=f,f=e.child,E=t.child.memoizedState,E===null?E=rf(r):(D=E.cachePool,D!==null?(Z=ke._currentValue,D=D.parent!==Z?{parent:Z,pool:Z}:D):D=Zm(),E={baseLanes:E.baseLanes|r,cachePool:D}),f.memoizedState=E,f.childLanes=of(t,x,r),e.memoizedState=af,u):(Xs(e),r=t.child,t=r.sibling,r=Qn(r,{mode:"visible",children:u.children}),r.return=e,r.sibling=null,t!==null&&(x=e.deletions,x===null?(e.deletions=[t],e.flags|=16):x.push(t)),e.child=r,e.memoizedState=null,r)}function lf(t,e){return e=Xu({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function Xu(t,e){return t=mn(22,t,null,e),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function uf(t,e,r){return kr(e,t.child,null,r),t=lf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function i_(t,e,r){t.lanes|=e;var u=t.alternate;u!==null&&(u.lanes|=e),Ba(t.return,e,r)}function cf(t,e,r,u,f){var m=t.memoizedState;m===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:u,tail:r,tailMode:f}:(m.isBackwards=e,m.rendering=null,m.renderingStartTime=0,m.last=u,m.tail=r,m.tailMode=f)}function s_(t,e,r){var u=e.pendingProps,f=u.revealOrder,m=u.tail;if(Ke(t,e,u.children,r),u=ze.current,(u&2)!==0)u=u&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)t:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&i_(t,r,e);else if(t.tag===19)i_(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}switch(tt(ze,u),f){case"forwards":for(r=e.child,f=null;r!==null;)t=r.alternate,t!==null&&Gu(t)===null&&(f=r),r=r.sibling;r=f,r===null?(f=e.child,e.child=null):(f=r.sibling,r.sibling=null),cf(e,!1,f,r,m);break;case"backwards":for(r=null,f=e.child,e.child=null;f!==null;){if(t=f.alternate,t!==null&&Gu(t)===null){e.child=f;break}t=f.sibling,f.sibling=r,r=f,f=t}cf(e,!0,r,null,m);break;case"together":cf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ns(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),ta|=e.lanes,(r&e.childLanes)===0)if(t!==null){if(ja(t,e,r,!1),(r&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(o(153));if(e.child!==null){for(t=e.child,r=Qn(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Qn(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function hf(t,e){return(t.lanes&e)!==0?!0:(t=t.dependencies,!!(t!==null&&Nu(t)))}function hb(t,e,r){switch(e.tag){case 3:Gt(e,e.stateNode.containerInfo),Ai(e,ke,t.memoizedState.cache),Zs();break;case 27:case 5:Di(e);break;case 4:Gt(e,e.stateNode.containerInfo);break;case 10:Ai(e,e.type,e.memoizedProps.value);break;case 13:var u=e.memoizedState;if(u!==null)return u.dehydrated!==null?(Xs(e),e.flags|=128,null):(r&e.child.childLanes)!==0?n_(t,e,r):(Xs(e),t=ns(t,e,r),t!==null?t.sibling:null);Xs(e);break;case 19:var f=(t.flags&128)!==0;if(u=(r&e.childLanes)!==0,u||(ja(t,e,r,!1),u=(r&e.childLanes)!==0),f){if(u)return s_(t,e,r);e.flags|=128}if(f=e.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),tt(ze,ze.current),u)break;return null;case 22:case 23:return e.lanes=0,Kp(t,e,r);case 24:Ai(e,ke,t.memoizedState.cache)}return ns(t,e,r)}function a_(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps)He=!0;else{if(!hf(t,r)&&(e.flags&128)===0)return He=!1,hb(t,e,r);He=(t.flags&131072)!==0}else He=!1,Nt&&(e.flags&1048576)!==0&&V(e,l,e.index);switch(e.lanes=0,e.tag){case 16:t:{t=e.pendingProps;var u=e.elementType,f=u._init;if(u=f(u._payload),e.type=u,typeof u=="function")Er(u)?(t=qa(u,t),e.tag=1,e=t_(null,e,u,t,r)):(e.tag=0,e=sf(null,e,u,t,r));else{if(u!=null){if(f=u.$$typeof,f===ft){e.tag=11,e=Xp(null,e,u,t,r);break t}else if(f===kt){e.tag=14,e=Qp(null,e,u,t,r);break t}}throw e=Ft(u)||u,Error(o(306,e,""))}}return e;case 0:return sf(t,e,e.type,e.pendingProps,r);case 1:return u=e.type,f=qa(u,e.pendingProps),t_(t,e,u,f,r);case 3:t:{if(Gt(e,e.stateNode.containerInfo),t===null)throw Error(o(387));u=e.pendingProps;var m=e.memoizedState;f=m.element,Dh(t,e),Go(e,u,null,r);var x=e.memoizedState;if(u=x.cache,Ai(e,ke,u),u!==m.cache&&Tr(e,[ke],r,!0),qo(),u=x.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:x.cache},e.updateQueue.baseState=m,e.memoizedState=m,e.flags&256){e=e_(t,e,u,r);break t}else if(u!==f){f=fn(Error(o(424)),e),qs(f),e=e_(t,e,u,r);break t}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(vt=ui(t.firstChild),mt=e,Nt=!0,he=null,xe=!0,r=Ip(e,null,u,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(Zs(),u===f){e=ns(t,e,r);break t}Ke(t,e,u,r)}e=e.child}return e;case 26:return Fu(t,e),t===null?(r=ug(e.type,null,e.pendingProps,null))?e.memoizedState=r:Nt||(r=e.type,t=e.pendingProps,u=lc(rt.current).createElement(r),u[Be]=e,u[nn]=t,Je(u,r,t),Le(u),e.stateNode=u):e.memoizedState=ug(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return Di(e),t===null&&Nt&&(u=e.stateNode=rg(e.type,e.pendingProps,rt.current),mt=e,xe=!0,f=vt,sa(e.type)?(Vf=f,vt=ui(u.firstChild)):vt=f),Ke(t,e,e.pendingProps.children,r),Fu(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&Nt&&((f=u=vt)&&(u=jb(u,e.type,e.pendingProps,xe),u!==null?(e.stateNode=u,mt=e,vt=ui(u.firstChild),xe=!1,f=!0):f=!1),f||vn(e)),Di(e),f=e.type,m=e.pendingProps,x=t!==null?t.memoizedProps:null,u=m.children,Hf(f,m)?u=null:x!==null&&Hf(f,x)&&(e.flags|=32),e.memoizedState!==null&&(f=jh(t,e,ib,null,null,r),fl._currentValue=f),Fu(t,e),Ke(t,e,u,r),e.child;case 6:return t===null&&Nt&&((t=r=vt)&&(r=Ub(r,e.pendingProps,xe),r!==null?(e.stateNode=r,mt=e,vt=null,t=!0):t=!1),t||vn(e)),null;case 13:return n_(t,e,r);case 4:return Gt(e,e.stateNode.containerInfo),u=e.pendingProps,t===null?e.child=kr(e,null,u,r):Ke(t,e,u,r),e.child;case 11:return Xp(t,e,e.type,e.pendingProps,r);case 7:return Ke(t,e,e.pendingProps,r),e.child;case 8:return Ke(t,e,e.pendingProps.children,r),e.child;case 12:return Ke(t,e,e.pendingProps.children,r),e.child;case 10:return u=e.pendingProps,Ai(e,e.type,u.value),Ke(t,e,u.children,r),e.child;case 9:return f=e.type._context,u=e.pendingProps.children,Ua(e),f=rn(f),u=u(f),e.flags|=1,Ke(t,e,u,r),e.child;case 14:return Qp(t,e,e.type,e.pendingProps,r);case 15:return Wp(t,e,e.type,e.pendingProps,r);case 19:return s_(t,e,r);case 31:return u=e.pendingProps,r=e.mode,u={mode:u.mode,children:u.children},t===null?(r=Xu(u,r),r.ref=e.ref,e.child=r,r.return=e,e=r):(r=Qn(t.child,u),r.ref=e.ref,e.child=r,r.return=e,e=r),e;case 22:return Kp(t,e,r);case 24:return Ua(e),u=rn(ke),t===null?(f=Rh(),f===null&&(f=fe,m=Nh(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=r),f=m),e.memoizedState={parent:u,cache:f},Oh(e),Ai(e,ke,f)):((t.lanes&r)!==0&&(Dh(t,e),Go(e,null,null,r),qo()),f=t.memoizedState,m=e.memoizedState,f.parent!==u?(f={parent:u,cache:u},e.memoizedState=f,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=f),Ai(e,ke,u)):(u=m.cache,Ai(e,ke,u),u!==f.cache&&Tr(e,[ke],r,!0))),Ke(t,e,e.pendingProps.children,r),e.child;case 29:throw e.pendingProps}throw Error(o(156,e.tag))}function is(t){t.flags|=4}function r_(t,e){if(e.type!=="stylesheet"||(e.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!mg(e)){if(e=Kn.current,e!==null&&((Yt&4194048)===Yt?Ni!==null:(Yt&62914560)!==Yt&&(Yt&536870912)===0||e!==Ni))throw Ho=Lh,qm;t.flags|=8192}}function Qu(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?_o():536870912,t.lanes|=e,Br|=e)}function Ko(t,e){if(!Nt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var u=null;r!==null;)r.alternate!==null&&(u=r),r=r.sibling;u===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function Se(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,u=0;if(e)for(var f=t.child;f!==null;)r|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)r|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=u,t.childLanes=r,e}function fb(t,e,r){var u=e.pendingProps;switch(ct(e),e.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Se(e),null;case 1:return Se(e),null;case 3:return r=e.stateNode,u=null,t!==null&&(u=t.memoizedState.cache),e.memoizedState.cache!==u&&(e.flags|=2048),oi(ke),Tn(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ia(e)?is(e):t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,Au())),Se(e),null;case 26:return r=e.memoizedState,t===null?(is(e),r!==null?(Se(e),r_(e,r)):(Se(e),e.flags&=-16777217)):r?r!==t.memoizedState?(is(e),Se(e),r_(e,r)):(Se(e),e.flags&=-16777217):(t.memoizedProps!==u&&is(e),Se(e),e.flags&=-16777217),null;case 27:Zn(e),r=rt.current;var f=e.type;if(t!==null&&e.stateNode!=null)t.memoizedProps!==u&&is(e);else{if(!u){if(e.stateNode===null)throw Error(o(166));return Se(e),null}t=ut.current,Ia(e)?Cu(e):(t=rg(f,u,r),e.stateNode=t,is(e))}return Se(e),null;case 5:if(Zn(e),r=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==u&&is(e);else{if(!u){if(e.stateNode===null)throw Error(o(166));return Se(e),null}if(t=ut.current,Ia(e))Cu(e);else{switch(f=lc(rt.current),t){case 1:t=f.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:t=f.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":t=f.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":t=f.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":t=f.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?t.multiple=!0:u.size&&(t.size=u.size);break;default:t=typeof u.is=="string"?f.createElement(r,{is:u.is}):f.createElement(r)}}t[Be]=e,t[nn]=u;t:for(f=e.child;f!==null;){if(f.tag===5||f.tag===6)t.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break t;for(;f.sibling===null;){if(f.return===null||f.return===e)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}e.stateNode=t;t:switch(Je(t,r,u),r){case"button":case"input":case"select":case"textarea":t=!!u.autoFocus;break t;case"img":t=!0;break t;default:t=!1}t&&is(e)}}return Se(e),e.flags&=-16777217,null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==u&&is(e);else{if(typeof u!="string"&&e.stateNode===null)throw Error(o(166));if(t=rt.current,Ia(e)){if(t=e.stateNode,r=e.memoizedProps,u=null,f=mt,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}t[Be]=e,t=!!(t.nodeValue===r||u!==null&&u.suppressHydrationWarning===!0||J_(t.nodeValue,r)),t||vn(e)}else t=lc(t).createTextNode(u),t[Be]=e,e.stateNode=t}return Se(e),null;case 13:if(u=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=Ia(e),u!==null&&u.dehydrated!==null){if(t===null){if(!f)throw Error(o(318));if(f=e.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(o(317));f[Be]=e}else Zs(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;Se(e),f=!1}else f=Au(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return e.flags&256?(es(e),e):(es(e),null)}if(es(e),(e.flags&128)!==0)return e.lanes=r,e;if(r=u!==null,t=t!==null&&t.memoizedState!==null,r){u=e.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var m=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)}return r!==t&&r&&(e.child.flags|=8192),Qu(e,e.updateQueue),Se(e),null;case 4:return Tn(),t===null&&Pf(e.stateNode.containerInfo),Se(e),null;case 10:return oi(e.type),Se(e),null;case 19:if(it(ze),f=e.memoizedState,f===null)return Se(e),null;if(u=(e.flags&128)!==0,m=f.rendering,m===null)if(u)Ko(f,!1);else{if(Te!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(m=Gu(t),m!==null){for(e.flags|=128,Ko(f,!1),t=m.updateQueue,e.updateQueue=t,Qu(e,t),e.subtreeFlags=0,t=r,r=e.child;r!==null;)Po(r,t),r=r.sibling;return tt(ze,ze.current&1|2),e.child}t=t.sibling}f.tail!==null&&se()>$u&&(e.flags|=128,u=!0,Ko(f,!1),e.lanes=4194304)}else{if(!u)if(t=Gu(m),t!==null){if(e.flags|=128,u=!0,t=t.updateQueue,e.updateQueue=t,Qu(e,t),Ko(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!Nt)return Se(e),null}else 2*se()-f.renderingStartTime>$u&&r!==536870912&&(e.flags|=128,u=!0,Ko(f,!1),e.lanes=4194304);f.isBackwards?(m.sibling=e.child,e.child=m):(t=f.last,t!==null?t.sibling=m:e.child=m,f.last=m)}return f.tail!==null?(e=f.tail,f.rendering=e,f.tail=e.sibling,f.renderingStartTime=se(),e.sibling=null,t=ze.current,tt(ze,u?t&1|2:t&1),e):(Se(e),null);case 22:case 23:return es(e),Ih(),u=e.memoizedState!==null,t!==null?t.memoizedState!==null!==u&&(e.flags|=8192):u&&(e.flags|=8192),u?(r&536870912)!==0&&(e.flags&128)===0&&(Se(e),e.subtreeFlags&6&&(e.flags|=8192)):Se(e),r=e.updateQueue,r!==null&&Qu(e,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),u=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(u=e.memoizedState.cachePool.pool),u!==r&&(e.flags|=2048),t!==null&&it(Ha),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),e.memoizedState.cache!==r&&(e.flags|=2048),oi(ke),Se(e),null;case 25:return null;case 30:return null}throw Error(o(156,e.tag))}function db(t,e){switch(ct(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return oi(ke),Tn(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return Zn(e),null;case 13:if(es(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(o(340));Zs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return it(ze),null;case 4:return Tn(),null;case 10:return oi(e.type),null;case 22:case 23:return es(e),Ih(),t!==null&&it(Ha),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return oi(ke),null;case 25:return null;default:return null}}function o_(t,e){switch(ct(e),e.tag){case 3:oi(ke),Tn();break;case 26:case 27:case 5:Zn(e);break;case 4:Tn();break;case 13:es(e);break;case 19:it(ze);break;case 10:oi(e.type);break;case 22:case 23:es(e),Ih(),t!==null&&it(Ha);break;case 24:oi(ke)}}function $o(t,e){try{var r=e.updateQueue,u=r!==null?r.lastEffect:null;if(u!==null){var f=u.next;r=f;do{if((r.tag&t)===t){u=void 0;var m=r.create,x=r.inst;u=m(),x.destroy=u}r=r.next}while(r!==f)}}catch(E){ae(e,e.return,E)}}function Ws(t,e,r){try{var u=e.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&t)===t){var x=u.inst,E=x.destroy;if(E!==void 0){x.destroy=void 0,f=e;var D=r,Z=E;try{Z()}catch(X){ae(f,D,X)}}}u=u.next}while(u!==m)}}catch(X){ae(e,e.return,X)}}function l_(t){var e=t.updateQueue;if(e!==null){var r=t.stateNode;try{Qm(e,r)}catch(u){ae(t,t.return,u)}}}function u_(t,e,r){r.props=qa(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(u){ae(t,e,u)}}function Jo(t,e){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var u=t.stateNode;break;case 30:u=t.stateNode;break;default:u=t.stateNode}typeof r=="function"?t.refCleanup=r(u):r.current=u}}catch(f){ae(t,e,f)}}function Mi(t,e){var r=t.ref,u=t.refCleanup;if(r!==null)if(typeof u=="function")try{u()}catch(f){ae(t,e,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(f){ae(t,e,f)}else r.current=null}function c_(t){var e=t.type,r=t.memoizedProps,u=t.stateNode;try{t:switch(e){case"button":case"input":case"select":case"textarea":r.autoFocus&&u.focus();break t;case"img":r.src?u.src=r.src:r.srcSet&&(u.srcset=r.srcSet)}}catch(f){ae(t,t.return,f)}}function ff(t,e,r){try{var u=t.stateNode;kb(u,t.type,r,e),u[nn]=e}catch(f){ae(t,t.return,f)}}function h_(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&sa(t.type)||t.tag===4}function df(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||h_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&sa(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function mf(t,e,r){var u=t.tag;if(u===5||u===6)t=t.stateNode,e?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,e):(e=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,e.appendChild(t),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=oc));else if(u!==4&&(u===27&&sa(t.type)&&(r=t.stateNode,e=null),t=t.child,t!==null))for(mf(t,e,r),t=t.sibling;t!==null;)mf(t,e,r),t=t.sibling}function Wu(t,e,r){var u=t.tag;if(u===5||u===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(u!==4&&(u===27&&sa(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(Wu(t,e,r),t=t.sibling;t!==null;)Wu(t,e,r),t=t.sibling}function f_(t){var e=t.stateNode,r=t.memoizedProps;try{for(var u=t.type,f=e.attributes;f.length;)e.removeAttributeNode(f[0]);Je(e,u,r),e[Be]=t,e[nn]=r}catch(m){ae(t,t.return,m)}}var ss=!1,Re=!1,pf=!1,d_=typeof WeakSet=="function"?WeakSet:Set,Ze=null;function mb(t,e){if(t=t.containerInfo,jf=mc,t=Ra(t),La(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else t:{r=(r=t.ownerDocument)&&r.defaultView||window;var u=r.getSelection&&r.getSelection();if(u&&u.rangeCount!==0){r=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{r.nodeType,m.nodeType}catch{r=null;break t}var x=0,E=-1,D=-1,Z=0,X=0,K=t,q=null;e:for(;;){for(var G;K!==r||f!==0&&K.nodeType!==3||(E=x+f),K!==m||u!==0&&K.nodeType!==3||(D=x+u),K.nodeType===3&&(x+=K.nodeValue.length),(G=K.firstChild)!==null;)q=K,K=G;for(;;){if(K===t)break e;if(q===r&&++Z===f&&(E=x),q===m&&++X===u&&(D=x),(G=K.nextSibling)!==null)break;K=q,q=K.parentNode}K=G}r=E===-1||D===-1?null:{start:E,end:D}}else r=null}r=r||{start:0,end:0}}else r=null;for(Uf={focusedElem:t,selectionRange:r},mc=!1,Ze=e;Ze!==null;)if(e=Ze,t=e.child,(e.subtreeFlags&1024)!==0&&t!==null)t.return=e,Ze=t;else for(;Ze!==null;){switch(e=Ze,m=e.alternate,t=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,r=e,f=m.memoizedProps,m=m.memoizedState,u=r.stateNode;try{var Tt=qa(r.type,f,r.elementType===r.type);t=u.getSnapshotBeforeUpdate(Tt,m),u.__reactInternalSnapshotBeforeUpdate=t}catch(St){ae(r,r.return,St)}}break;case 3:if((t&1024)!==0){if(t=e.stateNode.containerInfo,r=t.nodeType,r===9)qf(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":qf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(o(163))}if(t=e.sibling,t!==null){t.return=e.return,Ze=t;break}Ze=e.return}}function m_(t,e,r){var u=r.flags;switch(r.tag){case 0:case 11:case 15:Ks(t,r),u&4&&$o(5,r);break;case 1:if(Ks(t,r),u&4)if(t=r.stateNode,e===null)try{t.componentDidMount()}catch(x){ae(r,r.return,x)}else{var f=qa(r.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(f,e,t.__reactInternalSnapshotBeforeUpdate)}catch(x){ae(r,r.return,x)}}u&64&&l_(r),u&512&&Jo(r,r.return);break;case 3:if(Ks(t,r),u&64&&(t=r.updateQueue,t!==null)){if(e=null,r.child!==null)switch(r.child.tag){case 27:case 5:e=r.child.stateNode;break;case 1:e=r.child.stateNode}try{Qm(t,e)}catch(x){ae(r,r.return,x)}}break;case 27:e===null&&u&4&&f_(r);case 26:case 5:Ks(t,r),e===null&&u&4&&c_(r),u&512&&Jo(r,r.return);break;case 12:Ks(t,r);break;case 13:Ks(t,r),u&4&&g_(t,r),u&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=wb.bind(null,r),Hb(t,r))));break;case 22:if(u=r.memoizedState!==null||ss,!u){e=e!==null&&e.memoizedState!==null||Re,f=ss;var m=Re;ss=u,(Re=e)&&!m?$s(t,r,(r.subtreeFlags&8772)!==0):Ks(t,r),ss=f,Re=m}break;case 30:break;default:Ks(t,r)}}function p_(t){var e=t.alternate;e!==null&&(t.alternate=null,p_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&or(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ve=null,bn=!1;function as(t,e,r){for(r=r.child;r!==null;)__(t,e,r),r=r.sibling}function __(t,e,r){if(Ie&&typeof Ie.onCommitFiberUnmount=="function")try{Ie.onCommitFiberUnmount(ei,r)}catch{}switch(r.tag){case 26:Re||Mi(r,e),as(t,e,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Re||Mi(r,e);var u=ve,f=bn;sa(r.type)&&(ve=r.stateNode,bn=!1),as(t,e,r),ll(r.stateNode),ve=u,bn=f;break;case 5:Re||Mi(r,e);case 6:if(u=ve,f=bn,ve=null,as(t,e,r),ve=u,bn=f,ve!==null)if(bn)try{(ve.nodeType===9?ve.body:ve.nodeName==="HTML"?ve.ownerDocument.body:ve).removeChild(r.stateNode)}catch(m){ae(r,e,m)}else try{ve.removeChild(r.stateNode)}catch(m){ae(r,e,m)}break;case 18:ve!==null&&(bn?(t=ve,sg(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),_l(t)):sg(ve,r.stateNode));break;case 4:u=ve,f=bn,ve=r.stateNode.containerInfo,bn=!0,as(t,e,r),ve=u,bn=f;break;case 0:case 11:case 14:case 15:Re||Ws(2,r,e),Re||Ws(4,r,e),as(t,e,r);break;case 1:Re||(Mi(r,e),u=r.stateNode,typeof u.componentWillUnmount=="function"&&u_(r,e,u)),as(t,e,r);break;case 21:as(t,e,r);break;case 22:Re=(u=Re)||r.memoizedState!==null,as(t,e,r),Re=u;break;default:as(t,e,r)}}function g_(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{_l(t)}catch(r){ae(e,e.return,r)}}function pb(t){switch(t.tag){case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new d_),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new d_),e;default:throw Error(o(435,t.tag))}}function _f(t,e){var r=pb(t);e.forEach(function(u){var f=Eb.bind(null,t,u);r.has(u)||(r.add(u),u.then(f,f))})}function Pn(t,e){var r=e.deletions;if(r!==null)for(var u=0;u<r.length;u++){var f=r[u],m=t,x=e,E=x;t:for(;E!==null;){switch(E.tag){case 27:if(sa(E.type)){ve=E.stateNode,bn=!1;break t}break;case 5:ve=E.stateNode,bn=!1;break t;case 3:case 4:ve=E.stateNode.containerInfo,bn=!0;break t}E=E.return}if(ve===null)throw Error(o(160));__(m,x,f),ve=null,bn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(e.subtreeFlags&13878)for(e=e.child;e!==null;)v_(e,t),e=e.sibling}var li=null;function v_(t,e){var r=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Pn(e,t),In(t),u&4&&(Ws(3,t,t.return),$o(3,t),Ws(5,t,t.return));break;case 1:Pn(e,t),In(t),u&512&&(Re||r===null||Mi(r,r.return)),u&64&&ss&&(t=t.updateQueue,t!==null&&(u=t.callbacks,u!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?u:r.concat(u))));break;case 26:var f=li;if(Pn(e,t),In(t),u&512&&(Re||r===null||Mi(r,r.return)),u&4){var m=r!==null?r.memoizedState:null;if(u=t.memoizedState,r===null)if(u===null)if(t.stateNode===null){t:{u=t.type,r=t.memoizedProps,f=f.ownerDocument||f;e:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[xs]||m[Be]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),Je(m,u,r),m[Be]=t,Le(m),u=m;break t;case"link":var x=fg("link","href",f).get(u+(r.href||""));if(x){for(var E=0;E<x.length;E++)if(m=x[E],m.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&m.getAttribute("rel")===(r.rel==null?null:r.rel)&&m.getAttribute("title")===(r.title==null?null:r.title)&&m.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){x.splice(E,1);break e}}m=f.createElement(u),Je(m,u,r),f.head.appendChild(m);break;case"meta":if(x=fg("meta","content",f).get(u+(r.content||""))){for(E=0;E<x.length;E++)if(m=x[E],m.getAttribute("content")===(r.content==null?null:""+r.content)&&m.getAttribute("name")===(r.name==null?null:r.name)&&m.getAttribute("property")===(r.property==null?null:r.property)&&m.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&m.getAttribute("charset")===(r.charSet==null?null:r.charSet)){x.splice(E,1);break e}}m=f.createElement(u),Je(m,u,r),f.head.appendChild(m);break;default:throw Error(o(468,u))}m[Be]=t,Le(m),u=m}t.stateNode=u}else dg(f,t.type,t.stateNode);else t.stateNode=hg(f,u,t.memoizedProps);else m!==u?(m===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):m.count--,u===null?dg(f,t.type,t.stateNode):hg(f,u,t.memoizedProps)):u===null&&t.stateNode!==null&&ff(t,t.memoizedProps,r.memoizedProps)}break;case 27:Pn(e,t),In(t),u&512&&(Re||r===null||Mi(r,r.return)),r!==null&&u&4&&ff(t,t.memoizedProps,r.memoizedProps);break;case 5:if(Pn(e,t),In(t),u&512&&(Re||r===null||Mi(r,r.return)),t.flags&32){f=t.stateNode;try{Gn(f,"")}catch(G){ae(t,t.return,G)}}u&4&&t.stateNode!=null&&(f=t.memoizedProps,ff(t,f,r!==null?r.memoizedProps:f)),u&1024&&(pf=!0);break;case 6:if(Pn(e,t),In(t),u&4){if(t.stateNode===null)throw Error(o(162));u=t.memoizedProps,r=t.stateNode;try{r.nodeValue=u}catch(G){ae(t,t.return,G)}}break;case 3:if(hc=null,f=li,li=uc(e.containerInfo),Pn(e,t),li=f,In(t),u&4&&r!==null&&r.memoizedState.isDehydrated)try{_l(e.containerInfo)}catch(G){ae(t,t.return,G)}pf&&(pf=!1,y_(t));break;case 4:u=li,li=uc(t.stateNode.containerInfo),Pn(e,t),In(t),li=u;break;case 12:Pn(e,t),In(t);break;case 13:Pn(e,t),In(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Sf=se()),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,_f(t,u)));break;case 22:f=t.memoizedState!==null;var D=r!==null&&r.memoizedState!==null,Z=ss,X=Re;if(ss=Z||f,Re=X||D,Pn(e,t),Re=X,ss=Z,In(t),u&8192)t:for(e=t.stateNode,e._visibility=f?e._visibility&-2:e._visibility|1,f&&(r===null||D||ss||Re||Ga(t)),r=null,e=t;;){if(e.tag===5||e.tag===26){if(r===null){D=r=e;try{if(m=D.stateNode,f)x=m.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{E=D.stateNode;var K=D.memoizedProps.style,q=K!=null&&K.hasOwnProperty("display")?K.display:null;E.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(G){ae(D,D.return,G)}}}else if(e.tag===6){if(r===null){D=e;try{D.stateNode.nodeValue=f?"":D.memoizedProps}catch(G){ae(D,D.return,G)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;r===e&&(r=null),e=e.return}r===e&&(r=null),e.sibling.return=e.return,e=e.sibling}u&4&&(u=t.updateQueue,u!==null&&(r=u.retryQueue,r!==null&&(u.retryQueue=null,_f(t,r))));break;case 19:Pn(e,t),In(t),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,_f(t,u)));break;case 30:break;case 21:break;default:Pn(e,t),In(t)}}function In(t){var e=t.flags;if(e&2){try{for(var r,u=t.return;u!==null;){if(h_(u)){r=u;break}u=u.return}if(r==null)throw Error(o(160));switch(r.tag){case 27:var f=r.stateNode,m=df(t);Wu(t,m,f);break;case 5:var x=r.stateNode;r.flags&32&&(Gn(x,""),r.flags&=-33);var E=df(t);Wu(t,E,x);break;case 3:case 4:var D=r.stateNode.containerInfo,Z=df(t);mf(t,Z,D);break;default:throw Error(o(161))}}catch(X){ae(t,t.return,X)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function y_(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;y_(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function Ks(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)m_(t,e.alternate,e),e=e.sibling}function Ga(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Ws(4,e,e.return),Ga(e);break;case 1:Mi(e,e.return);var r=e.stateNode;typeof r.componentWillUnmount=="function"&&u_(e,e.return,r),Ga(e);break;case 27:ll(e.stateNode);case 26:case 5:Mi(e,e.return),Ga(e);break;case 22:e.memoizedState===null&&Ga(e);break;case 30:Ga(e);break;default:Ga(e)}t=t.sibling}}function $s(t,e,r){for(r=r&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var u=e.alternate,f=t,m=e,x=m.flags;switch(m.tag){case 0:case 11:case 15:$s(f,m,r),$o(4,m);break;case 1:if($s(f,m,r),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Z){ae(u,u.return,Z)}if(u=m,f=u.updateQueue,f!==null){var E=u.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)Xm(D[f],E)}catch(Z){ae(u,u.return,Z)}}r&&x&64&&l_(m),Jo(m,m.return);break;case 27:f_(m);case 26:case 5:$s(f,m,r),r&&u===null&&x&4&&c_(m),Jo(m,m.return);break;case 12:$s(f,m,r);break;case 13:$s(f,m,r),r&&x&4&&g_(f,m);break;case 22:m.memoizedState===null&&$s(f,m,r),Jo(m,m.return);break;case 30:break;default:$s(f,m,r)}e=e.sibling}}function gf(t,e){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&Bo(r))}function vf(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Bo(t))}function Ri(t,e,r,u){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)b_(t,e,r,u),e=e.sibling}function b_(t,e,r,u){var f=e.flags;switch(e.tag){case 0:case 11:case 15:Ri(t,e,r,u),f&2048&&$o(9,e);break;case 1:Ri(t,e,r,u);break;case 3:Ri(t,e,r,u),f&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Bo(t)));break;case 12:if(f&2048){Ri(t,e,r,u),t=e.stateNode;try{var m=e.memoizedProps,x=m.id,E=m.onPostCommit;typeof E=="function"&&E(x,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(D){ae(e,e.return,D)}}else Ri(t,e,r,u);break;case 13:Ri(t,e,r,u);break;case 23:break;case 22:m=e.stateNode,x=e.alternate,e.memoizedState!==null?m._visibility&2?Ri(t,e,r,u):tl(t,e):m._visibility&2?Ri(t,e,r,u):(m._visibility|=2,zr(t,e,r,u,(e.subtreeFlags&10256)!==0)),f&2048&&gf(x,e);break;case 24:Ri(t,e,r,u),f&2048&&vf(e.alternate,e);break;default:Ri(t,e,r,u)}}function zr(t,e,r,u,f){for(f=f&&(e.subtreeFlags&10256)!==0,e=e.child;e!==null;){var m=t,x=e,E=r,D=u,Z=x.flags;switch(x.tag){case 0:case 11:case 15:zr(m,x,E,D,f),$o(8,x);break;case 23:break;case 22:var X=x.stateNode;x.memoizedState!==null?X._visibility&2?zr(m,x,E,D,f):tl(m,x):(X._visibility|=2,zr(m,x,E,D,f)),f&&Z&2048&&gf(x.alternate,x);break;case 24:zr(m,x,E,D,f),f&&Z&2048&&vf(x.alternate,x);break;default:zr(m,x,E,D,f)}e=e.sibling}}function tl(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var r=t,u=e,f=u.flags;switch(u.tag){case 22:tl(r,u),f&2048&&gf(u.alternate,u);break;case 24:tl(r,u),f&2048&&vf(u.alternate,u);break;default:tl(r,u)}e=e.sibling}}var el=8192;function Pr(t){if(t.subtreeFlags&el)for(t=t.child;t!==null;)x_(t),t=t.sibling}function x_(t){switch(t.tag){case 26:Pr(t),t.flags&el&&t.memoizedState!==null&&tx(li,t.memoizedState,t.memoizedProps);break;case 5:Pr(t);break;case 3:case 4:var e=li;li=uc(t.stateNode.containerInfo),Pr(t),li=e;break;case 22:t.memoizedState===null&&(e=t.alternate,e!==null&&e.memoizedState!==null?(e=el,el=16777216,Pr(t),el=e):Pr(t));break;default:Pr(t)}}function S_(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function nl(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var r=0;r<e.length;r++){var u=e[r];Ze=u,E_(u,t)}S_(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)w_(t),t=t.sibling}function w_(t){switch(t.tag){case 0:case 11:case 15:nl(t),t.flags&2048&&Ws(9,t,t.return);break;case 3:nl(t);break;case 12:nl(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Ku(t)):nl(t);break;default:nl(t)}}function Ku(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var r=0;r<e.length;r++){var u=e[r];Ze=u,E_(u,t)}S_(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Ws(8,e,e.return),Ku(e);break;case 22:r=e.stateNode,r._visibility&2&&(r._visibility&=-3,Ku(e));break;default:Ku(e)}t=t.sibling}}function E_(t,e){for(;Ze!==null;){var r=Ze;switch(r.tag){case 0:case 11:case 15:Ws(8,r,e);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var u=r.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Bo(r.memoizedState.cache)}if(u=r.child,u!==null)u.return=r,Ze=u;else t:for(r=t;Ze!==null;){u=Ze;var f=u.sibling,m=u.return;if(p_(u),u===r){Ze=null;break t}if(f!==null){f.return=m,Ze=f;break t}Ze=m}}}var _b={getCacheForType:function(t){var e=rn(ke),r=e.data.get(t);return r===void 0&&(r=t(),e.data.set(t,r)),r}},gb=typeof WeakMap=="function"?WeakMap:Map,$t=0,fe=null,Ut=null,Yt=0,Jt=0,Bn=null,Js=!1,Ir=!1,yf=!1,rs=0,Te=0,ta=0,Va=0,bf=0,$n=0,Br=0,il=null,xn=null,xf=!1,Sf=0,$u=1/0,Ju=null,ea=null,$e=0,na=null,jr=null,Ur=0,wf=0,Ef=null,C_=null,sl=0,Cf=null;function jn(){if(($t&2)!==0&&Yt!==0)return Yt&-Yt;if(Y.T!==null){var t=Ar;return t!==0?t:Of()}return tu()}function T_(){$n===0&&($n=(Yt&536870912)===0||Nt?Kl():536870912);var t=Kn.current;return t!==null&&(t.flags|=32),$n}function Un(t,e,r){(t===fe&&(Jt===2||Jt===9)||t.cancelPendingCommit!==null)&&(Hr(t,0),ia(t,Yt,$n,!1)),ys(t,r),(($t&2)===0||t!==fe)&&(t===fe&&(($t&2)===0&&(Va|=r),Te===4&&ia(t,Yt,$n,!1)),Li(t))}function A_(t,e,r){if(($t&6)!==0)throw Error(o(327));var u=!r&&(e&124)===0&&(e&t.expiredLanes)===0||Nn(t,e),f=u?bb(t,e):Nf(t,e,!0),m=u;do{if(f===0){Ir&&!u&&ia(t,e,0,!1);break}else{if(r=t.current.alternate,m&&!vb(r)){f=Nf(t,e,!1),m=!1;continue}if(f===2){if(m=e,t.errorRecoveryDisabledLanes&m)var x=0;else x=t.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){e=x;t:{var E=t;f=il;var D=E.current.memoizedState.isDehydrated;if(D&&(Hr(E,x).flags|=256),x=Nf(E,x,!1),x!==2){if(yf&&!D){E.errorRecoveryDisabledLanes|=m,Va|=m,f=4;break t}m=xn,xn=f,m!==null&&(xn===null?xn=m:xn.push.apply(xn,m))}f=x}if(m=!1,f!==2)continue}}if(f===1){Hr(t,0),ia(t,e,0,!0);break}t:{switch(u=t,m=f,m){case 0:case 1:throw Error(o(345));case 4:if((e&4194048)!==e)break;case 6:ia(u,e,$n,!Js);break t;case 2:xn=null;break;case 3:case 5:break;default:throw Error(o(329))}if((e&62914560)===e&&(f=Sf+300-se(),10<f)){if(ia(u,e,$n,!Js),va(u,0,!0)!==0)break t;u.timeoutHandle=ng(N_.bind(null,u,r,xn,Ju,xf,e,$n,Va,Br,Js,m,2,-0,0),f);break t}N_(u,r,xn,Ju,xf,e,$n,Va,Br,Js,m,0,-0,0)}}break}while(!0);Li(t)}function N_(t,e,r,u,f,m,x,E,D,Z,X,K,q,G){if(t.timeoutHandle=-1,K=e.subtreeFlags,(K&8192||(K&16785408)===16785408)&&(hl={stylesheets:null,count:0,unsuspend:Jb},x_(e),K=ex(),K!==null)){t.cancelPendingCommit=K(z_.bind(null,t,e,m,r,u,f,x,E,D,X,1,q,G)),ia(t,m,x,!Z);return}z_(t,e,m,r,u,f,x,E,D)}function vb(t){for(var e=t;;){var r=e.tag;if((r===0||r===11||r===15)&&e.flags&16384&&(r=e.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var u=0;u<r.length;u++){var f=r[u],m=f.getSnapshot;f=f.value;try{if(!cn(m(),f))return!1}catch{return!1}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ia(t,e,r,u){e&=~bf,e&=~Va,t.suspendedLanes|=e,t.pingedLanes&=~e,u&&(t.warmLanes|=e),u=t.expirationTimes;for(var f=e;0<f;){var m=31-et(f),x=1<<m;u[m]=-1,f&=~x}r!==0&&$l(t,r,e)}function tc(){return($t&6)===0?(al(0),!1):!0}function Tf(){if(Ut!==null){if(Jt===0)var t=Ut.return;else t=Ut,ri=Wn=null,Zh(t),Dr=null,Qo=0,t=Ut;for(;t!==null;)o_(t.alternate,t),t=t.return;Ut=null}}function Hr(t,e){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,Pb(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),Tf(),fe=t,Ut=r=Qn(t.current,null),Yt=e,Jt=0,Bn=null,Js=!1,Ir=Nn(t,e),yf=!1,Br=$n=bf=Va=ta=Te=0,xn=il=null,xf=!1,(e&8)!==0&&(e|=e&32);var u=t.entangledLanes;if(u!==0)for(t=t.entanglements,u&=e;0<u;){var f=31-et(u),m=1<<f;e|=t[f],u&=~m}return rs=e,Da(),r}function M_(t,e){Dt=null,Y.H=Hu,e===Uo||e===Lu?(e=Ym(),Jt=3):e===qm?(e=Ym(),Jt=4):Jt=e===Fp?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Bn=e,Ut===null&&(Te=1,Yu(t,fn(e,t.current)))}function R_(){var t=Y.H;return Y.H=Hu,t===null?Hu:t}function L_(){var t=Y.A;return Y.A=_b,t}function Af(){Te=4,Js||(Yt&4194048)!==Yt&&Kn.current!==null||(Ir=!0),(ta&134217727)===0&&(Va&134217727)===0||fe===null||ia(fe,Yt,$n,!1)}function Nf(t,e,r){var u=$t;$t|=2;var f=R_(),m=L_();(fe!==t||Yt!==e)&&(Ju=null,Hr(t,e)),e=!1;var x=Te;t:do try{if(Jt!==0&&Ut!==null){var E=Ut,D=Bn;switch(Jt){case 8:Tf(),x=6;break t;case 3:case 2:case 9:case 6:Kn.current===null&&(e=!0);var Z=Jt;if(Jt=0,Bn=null,Zr(t,E,D,Z),r&&Ir){x=0;break t}break;default:Z=Jt,Jt=0,Bn=null,Zr(t,E,D,Z)}}yb(),x=Te;break}catch(X){M_(t,X)}while(!0);return e&&t.shellSuspendCounter++,ri=Wn=null,$t=u,Y.H=f,Y.A=m,Ut===null&&(fe=null,Yt=0,Da()),x}function yb(){for(;Ut!==null;)O_(Ut)}function bb(t,e){var r=$t;$t|=2;var u=R_(),f=L_();fe!==t||Yt!==e?(Ju=null,$u=se()+500,Hr(t,e)):Ir=Nn(t,e);t:do try{if(Jt!==0&&Ut!==null){e=Ut;var m=Bn;e:switch(Jt){case 1:Jt=0,Bn=null,Zr(t,e,m,1);break;case 2:case 9:if(Gm(m)){Jt=0,Bn=null,D_(e);break}e=function(){Jt!==2&&Jt!==9||fe!==t||(Jt=7),Li(t)},m.then(e,e);break t;case 3:Jt=7;break t;case 4:Jt=5;break t;case 7:Gm(m)?(Jt=0,Bn=null,D_(e)):(Jt=0,Bn=null,Zr(t,e,m,7));break;case 5:var x=null;switch(Ut.tag){case 26:x=Ut.memoizedState;case 5:case 27:var E=Ut;if(!x||mg(x)){Jt=0,Bn=null;var D=E.sibling;if(D!==null)Ut=D;else{var Z=E.return;Z!==null?(Ut=Z,ec(Z)):Ut=null}break e}}Jt=0,Bn=null,Zr(t,e,m,5);break;case 6:Jt=0,Bn=null,Zr(t,e,m,6);break;case 8:Tf(),Te=6;break t;default:throw Error(o(462))}}xb();break}catch(X){M_(t,X)}while(!0);return ri=Wn=null,Y.H=u,Y.A=f,$t=r,Ut!==null?0:(fe=null,Yt=0,Da(),Te)}function xb(){for(;Ut!==null&&!nr();)O_(Ut)}function O_(t){var e=a_(t.alternate,t,rs);t.memoizedProps=t.pendingProps,e===null?ec(t):Ut=e}function D_(t){var e=t,r=e.alternate;switch(e.tag){case 15:case 0:e=Jp(r,e,e.pendingProps,e.type,void 0,Yt);break;case 11:e=Jp(r,e,e.pendingProps,e.type.render,e.ref,Yt);break;case 5:Zh(e);default:o_(r,e),e=Ut=Po(e,rs),e=a_(r,e,rs)}t.memoizedProps=t.pendingProps,e===null?ec(t):Ut=e}function Zr(t,e,r,u){ri=Wn=null,Zh(e),Dr=null,Qo=0;var f=e.return;try{if(cb(t,f,e,r,Yt)){Te=1,Yu(t,fn(r,t.current)),Ut=null;return}}catch(m){if(f!==null)throw Ut=f,m;Te=1,Yu(t,fn(r,t.current)),Ut=null;return}e.flags&32768?(Nt||u===1?t=!0:Ir||(Yt&536870912)!==0?t=!1:(Js=t=!0,(u===2||u===9||u===3||u===6)&&(u=Kn.current,u!==null&&u.tag===13&&(u.flags|=16384))),k_(e,t)):ec(e)}function ec(t){var e=t;do{if((e.flags&32768)!==0){k_(e,Js);return}t=e.return;var r=fb(e.alternate,e,rs);if(r!==null){Ut=r;return}if(e=e.sibling,e!==null){Ut=e;return}Ut=e=t}while(e!==null);Te===0&&(Te=5)}function k_(t,e){do{var r=db(t.alternate,t);if(r!==null){r.flags&=32767,Ut=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!e&&(t=t.sibling,t!==null)){Ut=t;return}Ut=t=r}while(t!==null);Te=6,Ut=null}function z_(t,e,r,u,f,m,x,E,D){t.cancelPendingCommit=null;do nc();while($e!==0);if(($t&6)!==0)throw Error(o(327));if(e!==null){if(e===t.current)throw Error(o(177));if(m=e.lanes|e.childLanes,m|=zn,uh(t,r,m,x,E,D),t===fe&&(Ut=fe=null,Yt=0),jr=e,na=t,Ur=r,wf=m,Ef=f,C_=u,(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Cb(vi,function(){return U_(),null})):(t.callbackNode=null,t.callbackPriority=0),u=(e.flags&13878)!==0,(e.subtreeFlags&13878)!==0||u){u=Y.T,Y.T=null,f=at.p,at.p=2,x=$t,$t|=4;try{mb(t,e,r)}finally{$t=x,at.p=f,Y.T=u}}$e=1,P_(),I_(),B_()}}function P_(){if($e===1){$e=0;var t=na,e=jr,r=(e.flags&13878)!==0;if((e.subtreeFlags&13878)!==0||r){r=Y.T,Y.T=null;var u=at.p;at.p=2;var f=$t;$t|=4;try{v_(e,t);var m=Uf,x=Ra(t.containerInfo),E=m.focusedElem,D=m.selectionRange;if(x!==E&&E&&E.ownerDocument&&yr(E.ownerDocument.documentElement,E)){if(D!==null&&La(E)){var Z=D.start,X=D.end;if(X===void 0&&(X=Z),"selectionStart"in E)E.selectionStart=Z,E.selectionEnd=Math.min(X,E.value.length);else{var K=E.ownerDocument||document,q=K&&K.defaultView||window;if(q.getSelection){var G=q.getSelection(),Tt=E.textContent.length,St=Math.min(D.start,Tt),ne=D.end===void 0?St:Math.min(D.end,Tt);!G.extend&&St>ne&&(x=ne,ne=St,St=x);var I=ko(E,St),z=ko(E,ne);if(I&&z&&(G.rangeCount!==1||G.anchorNode!==I.node||G.anchorOffset!==I.offset||G.focusNode!==z.node||G.focusOffset!==z.offset)){var H=K.createRange();H.setStart(I.node,I.offset),G.removeAllRanges(),St>ne?(G.addRange(H),G.extend(z.node,z.offset)):(H.setEnd(z.node,z.offset),G.addRange(H))}}}}for(K=[],G=E;G=G.parentNode;)G.nodeType===1&&K.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<K.length;E++){var W=K[E];W.element.scrollLeft=W.left,W.element.scrollTop=W.top}}mc=!!jf,Uf=jf=null}finally{$t=f,at.p=u,Y.T=r}}t.current=e,$e=2}}function I_(){if($e===2){$e=0;var t=na,e=jr,r=(e.flags&8772)!==0;if((e.subtreeFlags&8772)!==0||r){r=Y.T,Y.T=null;var u=at.p;at.p=2;var f=$t;$t|=4;try{m_(t,e.alternate,e)}finally{$t=f,at.p=u,Y.T=r}}$e=3}}function B_(){if($e===4||$e===3){$e=0,ir();var t=na,e=jr,r=Ur,u=C_;(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?$e=5:($e=0,jr=na=null,j_(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(ea=null),vo(r),e=e.stateNode,Ie&&typeof Ie.onCommitFiberRoot=="function")try{Ie.onCommitFiberRoot(ei,e,void 0,(e.current.flags&128)===128)}catch{}if(u!==null){e=Y.T,f=at.p,at.p=2,Y.T=null;try{for(var m=t.onRecoverableError,x=0;x<u.length;x++){var E=u[x];m(E.value,{componentStack:E.stack})}}finally{Y.T=e,at.p=f}}(Ur&3)!==0&&nc(),Li(t),f=t.pendingLanes,(r&4194090)!==0&&(f&42)!==0?t===Cf?sl++:(sl=0,Cf=t):sl=0,al(0)}}function j_(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,Bo(e)))}function nc(t){return P_(),I_(),B_(),U_()}function U_(){if($e!==5)return!1;var t=na,e=wf;wf=0;var r=vo(Ur),u=Y.T,f=at.p;try{at.p=32>r?32:r,Y.T=null,r=Ef,Ef=null;var m=na,x=Ur;if($e=0,jr=na=null,Ur=0,($t&6)!==0)throw Error(o(331));var E=$t;if($t|=4,w_(m.current),b_(m,m.current,x,r),$t=E,al(0,!1),Ie&&typeof Ie.onPostCommitFiberRoot=="function")try{Ie.onPostCommitFiberRoot(ei,m)}catch{}return!0}finally{at.p=f,Y.T=u,j_(t,e)}}function H_(t,e,r){e=fn(r,e),e=nf(t.stateNode,e,2),t=Ys(t,e,2),t!==null&&(ys(t,2),Li(t))}function ae(t,e,r){if(t.tag===3)H_(t,t,r);else for(;e!==null;){if(e.tag===3){H_(e,t,r);break}else if(e.tag===1){var u=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ea===null||!ea.has(u))){t=fn(r,t),r=Vp(2),u=Ys(e,r,2),u!==null&&(Yp(r,u,e,t),ys(u,2),Li(u));break}}e=e.return}}function Mf(t,e,r){var u=t.pingCache;if(u===null){u=t.pingCache=new gb;var f=new Set;u.set(e,f)}else f=u.get(e),f===void 0&&(f=new Set,u.set(e,f));f.has(r)||(yf=!0,f.add(r),t=Sb.bind(null,t,e,r),e.then(t,t))}function Sb(t,e,r){var u=t.pingCache;u!==null&&u.delete(e),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,fe===t&&(Yt&r)===r&&(Te===4||Te===3&&(Yt&62914560)===Yt&&300>se()-Sf?($t&2)===0&&Hr(t,0):bf|=r,Br===Yt&&(Br=0)),Li(t)}function Z_(t,e){e===0&&(e=_o()),t=Us(t,e),t!==null&&(ys(t,e),Li(t))}function wb(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),Z_(t,r)}function Eb(t,e){var r=0;switch(t.tag){case 13:var u=t.stateNode,f=t.memoizedState;f!==null&&(r=f.retryLane);break;case 19:u=t.stateNode;break;case 22:u=t.stateNode._retryCache;break;default:throw Error(o(314))}u!==null&&u.delete(e),Z_(t,r)}function Cb(t,e){return gi(t,e)}var ic=null,qr=null,Rf=!1,sc=!1,Lf=!1,Ya=0;function Li(t){t!==qr&&t.next===null&&(qr===null?ic=qr=t:qr=qr.next=t),sc=!0,Rf||(Rf=!0,Ab())}function al(t,e){if(!Lf&&sc){Lf=!0;do for(var r=!1,u=ic;u!==null;){if(t!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var x=u.suspendedLanes,E=u.pingedLanes;m=(1<<31-et(42|t)+1)-1,m&=f&~(x&~E),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(r=!0,Y_(u,m))}else m=Yt,m=va(u,u===fe?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||Nn(u,m)||(r=!0,Y_(u,m));u=u.next}while(r);Lf=!1}}function Tb(){q_()}function q_(){sc=Rf=!1;var t=0;Ya!==0&&(zb()&&(t=Ya),Ya=0);for(var e=se(),r=null,u=ic;u!==null;){var f=u.next,m=G_(u,e);m===0?(u.next=null,r===null?ic=f:r.next=f,f===null&&(qr=r)):(r=u,(t!==0||(m&3)!==0)&&(sc=!0)),u=f}al(t)}function G_(t,e){for(var r=t.suspendedLanes,u=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var x=31-et(m),E=1<<x,D=f[x];D===-1?((E&r)===0||(E&u)!==0)&&(f[x]=lh(E,e)):D<=e&&(t.expiredLanes|=E),m&=~E}if(e=fe,r=Yt,r=va(t,t===e?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),u=t.callbackNode,r===0||t===e&&(Jt===2||Jt===9)||t.cancelPendingCommit!==null)return u!==null&&u!==null&&gs(u),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||Nn(t,r)){if(e=r&-r,e===t.callbackPriority)return e;switch(u!==null&&gs(u),vo(r)){case 2:case 8:r=_a;break;case 32:r=vi;break;case 268435456:r=ga;break;default:r=vi}return u=V_.bind(null,t),r=gi(r,u),t.callbackPriority=e,t.callbackNode=r,e}return u!==null&&u!==null&&gs(u),t.callbackPriority=2,t.callbackNode=null,2}function V_(t,e){if($e!==0&&$e!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(nc()&&t.callbackNode!==r)return null;var u=Yt;return u=va(t,t===fe?u:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),u===0?null:(A_(t,u,e),G_(t,se()),t.callbackNode!=null&&t.callbackNode===r?V_.bind(null,t):null)}function Y_(t,e){if(nc())return null;A_(t,e,!0)}function Ab(){Ib(function(){($t&6)!==0?gi(sr,Tb):q_()})}function Of(){return Ya===0&&(Ya=Kl()),Ya}function F_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:As(""+t)}function X_(t,e){var r=e.ownerDocument.createElement("input");return r.name=e.name,r.value=e.value,t.id&&r.setAttribute("form",t.id),e.parentNode.insertBefore(r,e),t=new FormData(t),r.parentNode.removeChild(r),t}function Nb(t,e,r,u,f){if(e==="submit"&&r&&r.stateNode===f){var m=F_((f[nn]||null).action),x=u.submitter;x&&(e=(e=x[nn]||null)?F_(e.formAction):x.getAttribute("formAction"),e!==null&&(m=e,x=null));var E=new Ca("action","action",null,u,f);t.push({event:E,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ya!==0){var D=x?X_(f,x):new FormData(f);Kh(r,{pending:!0,data:D,method:f.method,action:m},null,D)}}else typeof m=="function"&&(E.preventDefault(),D=x?X_(f,x):new FormData(f),Kh(r,{pending:!0,data:D,method:f.method,action:m},m,D))},currentTarget:f}]})}}for(var Df=0;Df<Qi.length;Df++){var kf=Qi[Df],Mb=kf.toLowerCase(),Rb=kf[0].toUpperCase()+kf.slice(1);kn(Mb,"on"+Rb)}kn(Su,"onAnimationEnd"),kn(Dn,"onAnimationIteration"),kn(Oa,"onAnimationStart"),kn("dblclick","onDoubleClick"),kn("focusin","onFocus"),kn("focusout","onBlur"),kn(Th,"onTransitionRun"),kn(wr,"onTransitionStart"),kn(Ah,"onTransitionCancel"),kn(zo,"onTransitionEnd"),Ii("onMouseEnter",["mouseout","mouseover"]),Ii("onMouseLeave",["mouseout","mouseover"]),Ii("onPointerEnter",["pointerout","pointerover"]),Ii("onPointerLeave",["pointerout","pointerover"]),Pi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Pi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Pi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Pi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Pi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Pi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(rl));function Q_(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var u=t[r],f=u.event;u=u.listeners;t:{var m=void 0;if(e)for(var x=u.length-1;0<=x;x--){var E=u[x],D=E.instance,Z=E.currentTarget;if(E=E.listener,D!==m&&f.isPropagationStopped())break t;m=E,f.currentTarget=Z;try{m(f)}catch(X){Vu(X)}f.currentTarget=null,m=D}else for(x=0;x<u.length;x++){if(E=u[x],D=E.instance,Z=E.currentTarget,E=E.listener,D!==m&&f.isPropagationStopped())break t;m=E,f.currentTarget=Z;try{m(f)}catch(X){Vu(X)}f.currentTarget=null,m=D}}}}function Ht(t,e){var r=e[_n];r===void 0&&(r=e[_n]=new Set);var u=t+"__bubble";r.has(u)||(W_(e,t,2,!1),r.add(u))}function zf(t,e,r){var u=0;e&&(u|=4),W_(r,t,u,e)}var ac="_reactListening"+Math.random().toString(36).slice(2);function Pf(t){if(!t[ac]){t[ac]=!0,nu.forEach(function(r){r!=="selectionchange"&&(Lb.has(r)||zf(r,!1,t),zf(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ac]||(e[ac]=!0,zf("selectionchange",!1,e))}}function W_(t,e,r,u){switch(bg(e)){case 2:var f=sx;break;case 8:f=ax;break;default:f=Wf}r=f.bind(null,e,r,t),f=void 0,!Ea||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(f=!0),u?f!==void 0?t.addEventListener(e,r,{capture:!0,passive:f}):t.addEventListener(e,r,!0):f!==void 0?t.addEventListener(e,r,{passive:f}):t.addEventListener(e,r,!1)}function If(t,e,r,u,f){var m=u;if((e&1)===0&&(e&2)===0&&u!==null)t:for(;;){if(u===null)return;var x=u.tag;if(x===3||x===4){var E=u.stateNode.containerInfo;if(E===f)break;if(x===4)for(x=u.return;x!==null;){var D=x.tag;if((D===3||D===4)&&x.stateNode.containerInfo===f)return;x=x.return}for(;E!==null;){if(x=bi(E),x===null)return;if(D=x.tag,D===5||D===6||D===26||D===27){u=m=x;continue t}E=E.parentNode}}u=u.return}Mn(function(){var Z=m,X=Ns(r),K=[];t:{var q=wu.get(t);if(q!==void 0){var G=Ca,Tt=t;switch(t){case"keypress":if(Ce(r)===0)break t;case"keydown":case"keyup":G=vh;break;case"focusin":Tt="focus",G=Co;break;case"focusout":Tt="blur",G=Co;break;case"beforeblur":case"afterblur":G=Co;break;case"click":if(r.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=Ls;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=dh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=bh;break;case Su:case Dn:case Oa:G=mh;break;case zo:G=xh;break;case"scroll":case"scrollend":G=fh;break;case"wheel":G=du;break;case"copy":case"cut":case"paste":G=To;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=No;break;case"toggle":case"beforetoggle":G=Vi}var St=(e&4)!==0,ne=!St&&(t==="scroll"||t==="scrollend"),I=St?q!==null?q+"Capture":null:q;St=[];for(var z=Z,H;z!==null;){var W=z;if(H=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||H===null||I===null||(W=Xt(z,I),W!=null&&St.push(ol(z,W,H))),ne)break;z=z.return}0<St.length&&(q=new G(q,Tt,null,r,X),K.push({event:q,listeners:St}))}}if((e&7)===0){t:{if(q=t==="mouseover"||t==="pointerover",G=t==="mouseout"||t==="pointerout",q&&r!==wa&&(Tt=r.relatedTarget||r.fromElement)&&(bi(Tt)||Tt[bs]))break t;if((G||q)&&(q=X.window===X?X:(q=X.ownerDocument)?q.defaultView||q.parentWindow:window,G?(Tt=r.relatedTarget||r.toElement,G=Z,Tt=Tt?bi(Tt):null,Tt!==null&&(ne=d(Tt),St=Tt.tag,Tt!==ne||St!==5&&St!==27&&St!==6)&&(Tt=null)):(G=null,Tt=Z),G!==Tt)){if(St=Ls,W="onMouseLeave",I="onMouseEnter",z="mouse",(t==="pointerout"||t==="pointerover")&&(St=No,W="onPointerLeave",I="onPointerEnter",z="pointer"),ne=G==null?q:qn(G),H=Tt==null?q:qn(Tt),q=new St(W,z+"leave",G,r,X),q.target=ne,q.relatedTarget=H,W=null,bi(X)===Z&&(St=new St(I,z+"enter",Tt,r,X),St.target=H,St.relatedTarget=ne,W=St),ne=W,G&&Tt)e:{for(St=G,I=Tt,z=0,H=St;H;H=Gr(H))z++;for(H=0,W=I;W;W=Gr(W))H++;for(;0<z-H;)St=Gr(St),z--;for(;0<H-z;)I=Gr(I),H--;for(;z--;){if(St===I||I!==null&&St===I.alternate)break e;St=Gr(St),I=Gr(I)}St=null}else St=null;G!==null&&K_(K,q,G,St,!1),Tt!==null&&ne!==null&&K_(K,ne,Tt,St,!0)}}t:{if(q=Z?qn(Z):window,G=q.nodeName&&q.nodeName.toLowerCase(),G==="select"||G==="input"&&q.type==="file")var _t=ks;else if(Fi(q))if(Lo)_t=Ch;else{_t=Eh;var Pt=Do}else G=q.nodeName,!G||G.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?Z&&Sa(Z.elementType)&&(_t=ks):_t=ai;if(_t&&(_t=_t(t,Z))){vu(K,_t,r,X);break t}Pt&&Pt(t,q,Z),t==="focusout"&&Z&&q.type==="number"&&Z.memoizedProps.value!=null&&Cs(q,"number",q.value)}switch(Pt=Z?qn(Z):window,t){case"focusin":(Fi(Pt)||Pt.contentEditable==="true")&&(On=Pt,Is=Z,Xi=null);break;case"focusout":Xi=Is=On=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,bu(K,r,X);break;case"selectionchange":if(br)break;case"keydown":case"keyup":bu(K,r,X)}var bt;if(Yi)t:{switch(t){case"compositionstart":var wt="onCompositionStart";break t;case"compositionend":wt="onCompositionEnd";break t;case"compositionupdate":wt="onCompositionUpdate";break t}wt=void 0}else Os?gr(t,r)&&(wt="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(wt="onCompositionStart");wt&&(Ro&&r.locale!=="ko"&&(Os||wt!=="onCompositionStart"?wt==="onCompositionEnd"&&Os&&(bt=Rs()):(Yn=X,ii="value"in Yn?Yn.value:Yn.textContent,Os=!0)),Pt=rc(Z,wt),0<Pt.length&&(wt=new Rn(wt,t,null,r,X),K.push({event:wt,listeners:Pt}),bt?wt.data=bt:(bt=_u(r),bt!==null&&(wt.data=bt)))),(bt=mu?gu(t,r):wh(t,r))&&(wt=rc(Z,"onBeforeInput"),0<wt.length&&(Pt=new Rn("onBeforeInput","beforeinput",null,r,X),K.push({event:Pt,listeners:wt}),Pt.data=bt)),Nb(K,t,Z,r,X)}Q_(K,e)})}function ol(t,e,r){return{instance:t,listener:e,currentTarget:r}}function rc(t,e){for(var r=e+"Capture",u=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Xt(t,r),f!=null&&u.unshift(ol(t,f,m)),f=Xt(t,e),f!=null&&u.push(ol(t,f,m))),t.tag===3)return u;t=t.return}return[]}function Gr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function K_(t,e,r,u,f){for(var m=e._reactName,x=[];r!==null&&r!==u;){var E=r,D=E.alternate,Z=E.stateNode;if(E=E.tag,D!==null&&D===u)break;E!==5&&E!==26&&E!==27||Z===null||(D=Z,f?(Z=Xt(r,m),Z!=null&&x.unshift(ol(r,Z,D))):f||(Z=Xt(r,m),Z!=null&&x.push(ol(r,Z,D)))),r=r.return}x.length!==0&&t.push({event:e,listeners:x})}var Ob=/\r\n?/g,Db=/\u0000|\uFFFD/g;function $_(t){return(typeof t=="string"?t:""+t).replace(Ob,`
`).replace(Db,"")}function J_(t,e){return e=$_(e),$_(t)===e}function oc(){}function ee(t,e,r,u,f,m){switch(r){case"children":typeof u=="string"?e==="body"||e==="textarea"&&u===""||Gn(t,u):(typeof u=="number"||typeof u=="bigint")&&e!=="body"&&Gn(t,""+u);break;case"className":ur(t,"class",u);break;case"tabIndex":ur(t,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":ur(t,r,u);break;case"style":Ts(t,u,m);break;case"data":if(e!=="object"){ur(t,"data",u);break}case"src":case"href":if(u===""&&(e!=="a"||r!=="href")){t.removeAttribute(r);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){t.removeAttribute(r);break}u=As(""+u),t.setAttribute(r,u);break;case"action":case"formAction":if(typeof u=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(r==="formAction"?(e!=="input"&&ee(t,e,"name",f.name,f,null),ee(t,e,"formEncType",f.formEncType,f,null),ee(t,e,"formMethod",f.formMethod,f,null),ee(t,e,"formTarget",f.formTarget,f,null)):(ee(t,e,"encType",f.encType,f,null),ee(t,e,"method",f.method,f,null),ee(t,e,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){t.removeAttribute(r);break}u=As(""+u),t.setAttribute(r,u);break;case"onClick":u!=null&&(t.onclick=oc);break;case"onScroll":u!=null&&Ht("scroll",t);break;case"onScrollEnd":u!=null&&Ht("scrollend",t);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(r=u.__html,r!=null){if(f.children!=null)throw Error(o(60));t.innerHTML=r}}break;case"multiple":t.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":t.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){t.removeAttribute("xlink:href");break}r=As(""+u),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(r,""+u):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":u===!0?t.setAttribute(r,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(r,u):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?t.setAttribute(r,u):t.removeAttribute(r);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?t.removeAttribute(r):t.setAttribute(r,u);break;case"popover":Ht("beforetoggle",t),Ht("toggle",t),lr(t,"popover",u);break;case"xlinkActuate":ni(t,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":ni(t,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":ni(t,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":ni(t,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":ni(t,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":ni(t,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":ni(t,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":ni(t,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":ni(t,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":lr(t,"is",u);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=So.get(r)||r,lr(t,r,u))}}function Bf(t,e,r,u,f,m){switch(r){case"style":Ts(t,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(r=u.__html,r!=null){if(f.children!=null)throw Error(o(60));t.innerHTML=r}}break;case"children":typeof u=="string"?Gn(t,u):(typeof u=="number"||typeof u=="bigint")&&Gn(t,""+u);break;case"onScroll":u!=null&&Ht("scroll",t);break;case"onScrollEnd":u!=null&&Ht("scrollend",t);break;case"onClick":u!=null&&(t.onclick=oc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!iu.hasOwnProperty(r))t:{if(r[0]==="o"&&r[1]==="n"&&(f=r.endsWith("Capture"),e=r.slice(2,f?r.length-7:void 0),m=t[nn]||null,m=m!=null?m[r]:null,typeof m=="function"&&t.removeEventListener(e,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(e,u,f);break t}r in t?t[r]=u:u===!0?t.setAttribute(r,""):lr(t,r,u)}}}function Je(t,e,r){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ht("error",t),Ht("load",t);var u=!1,f=!1,m;for(m in r)if(r.hasOwnProperty(m)){var x=r[m];if(x!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,e));default:ee(t,e,m,x,r,null)}}f&&ee(t,e,"srcSet",r.srcSet,r,null),u&&ee(t,e,"src",r.src,r,null);return;case"input":Ht("invalid",t);var E=m=x=f=null,D=null,Z=null;for(u in r)if(r.hasOwnProperty(u)){var X=r[u];if(X!=null)switch(u){case"name":f=X;break;case"type":x=X;break;case"checked":D=X;break;case"defaultChecked":Z=X;break;case"value":m=X;break;case"defaultValue":E=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(o(137,e));break;default:ee(t,e,u,X,r,null)}}au(t,m,E,D,Z,x,f,!1),Es(t);return;case"select":Ht("invalid",t),u=x=m=null;for(f in r)if(r.hasOwnProperty(f)&&(E=r[f],E!=null))switch(f){case"value":m=E;break;case"defaultValue":x=E;break;case"multiple":u=E;default:ee(t,e,f,E,r,null)}e=m,r=x,t.multiple=!!u,e!=null?gn(t,!!u,e,!1):r!=null&&gn(t,!!u,r,!0);return;case"textarea":Ht("invalid",t),m=f=u=null;for(x in r)if(r.hasOwnProperty(x)&&(E=r[x],E!=null))switch(x){case"value":u=E;break;case"defaultValue":f=E;break;case"children":m=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(o(91));break;default:ee(t,e,x,E,r,null)}xi(t,u,f,m),Es(t);return;case"option":for(D in r)if(r.hasOwnProperty(D)&&(u=r[D],u!=null))switch(D){case"selected":t.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:ee(t,e,D,u,r,null)}return;case"dialog":Ht("beforetoggle",t),Ht("toggle",t),Ht("cancel",t),Ht("close",t);break;case"iframe":case"object":Ht("load",t);break;case"video":case"audio":for(u=0;u<rl.length;u++)Ht(rl[u],t);break;case"image":Ht("error",t),Ht("load",t);break;case"details":Ht("toggle",t);break;case"embed":case"source":case"link":Ht("error",t),Ht("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in r)if(r.hasOwnProperty(Z)&&(u=r[Z],u!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,e));default:ee(t,e,Z,u,r,null)}return;default:if(Sa(e)){for(X in r)r.hasOwnProperty(X)&&(u=r[X],u!==void 0&&Bf(t,e,X,u,r,void 0));return}}for(E in r)r.hasOwnProperty(E)&&(u=r[E],u!=null&&ee(t,e,E,u,r,null))}function kb(t,e,r,u){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,x=null,E=null,D=null,Z=null,X=null;for(G in r){var K=r[G];if(r.hasOwnProperty(G)&&K!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":D=K;default:u.hasOwnProperty(G)||ee(t,e,G,null,u,K)}}for(var q in u){var G=u[q];if(K=r[q],u.hasOwnProperty(q)&&(G!=null||K!=null))switch(q){case"type":m=G;break;case"name":f=G;break;case"checked":Z=G;break;case"defaultChecked":X=G;break;case"value":x=G;break;case"defaultValue":E=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(o(137,e));break;default:G!==K&&ee(t,e,q,G,u,K)}}sn(t,x,E,D,Z,X,m,f);return;case"select":G=x=E=q=null;for(m in r)if(D=r[m],r.hasOwnProperty(m)&&D!=null)switch(m){case"value":break;case"multiple":G=D;default:u.hasOwnProperty(m)||ee(t,e,m,null,u,D)}for(f in u)if(m=u[f],D=r[f],u.hasOwnProperty(f)&&(m!=null||D!=null))switch(f){case"value":q=m;break;case"defaultValue":E=m;break;case"multiple":x=m;default:m!==D&&ee(t,e,f,m,u,D)}e=E,r=x,u=G,q!=null?gn(t,!!r,q,!1):!!u!=!!r&&(e!=null?gn(t,!!r,e,!0):gn(t,!!r,r?[]:"",!1));return;case"textarea":G=q=null;for(E in r)if(f=r[E],r.hasOwnProperty(E)&&f!=null&&!u.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:ee(t,e,E,null,u,f)}for(x in u)if(f=u[x],m=r[x],u.hasOwnProperty(x)&&(f!=null||m!=null))switch(x){case"value":q=f;break;case"defaultValue":G=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(o(91));break;default:f!==m&&ee(t,e,x,f,u,m)}be(t,q,G);return;case"option":for(var Tt in r)if(q=r[Tt],r.hasOwnProperty(Tt)&&q!=null&&!u.hasOwnProperty(Tt))switch(Tt){case"selected":t.selected=!1;break;default:ee(t,e,Tt,null,u,q)}for(D in u)if(q=u[D],G=r[D],u.hasOwnProperty(D)&&q!==G&&(q!=null||G!=null))switch(D){case"selected":t.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:ee(t,e,D,q,u,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var St in r)q=r[St],r.hasOwnProperty(St)&&q!=null&&!u.hasOwnProperty(St)&&ee(t,e,St,null,u,q);for(Z in u)if(q=u[Z],G=r[Z],u.hasOwnProperty(Z)&&q!==G&&(q!=null||G!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(o(137,e));break;default:ee(t,e,Z,q,u,G)}return;default:if(Sa(e)){for(var ne in r)q=r[ne],r.hasOwnProperty(ne)&&q!==void 0&&!u.hasOwnProperty(ne)&&Bf(t,e,ne,void 0,u,q);for(X in u)q=u[X],G=r[X],!u.hasOwnProperty(X)||q===G||q===void 0&&G===void 0||Bf(t,e,X,q,u,G);return}}for(var I in r)q=r[I],r.hasOwnProperty(I)&&q!=null&&!u.hasOwnProperty(I)&&ee(t,e,I,null,u,q);for(K in u)q=u[K],G=r[K],!u.hasOwnProperty(K)||q===G||q==null&&G==null||ee(t,e,K,q,u,G)}var jf=null,Uf=null;function lc(t){return t.nodeType===9?t:t.ownerDocument}function tg(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function eg(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Hf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Zf=null;function zb(){var t=window.event;return t&&t.type==="popstate"?t===Zf?!1:(Zf=t,!0):(Zf=null,!1)}var ng=typeof setTimeout=="function"?setTimeout:void 0,Pb=typeof clearTimeout=="function"?clearTimeout:void 0,ig=typeof Promise=="function"?Promise:void 0,Ib=typeof queueMicrotask=="function"?queueMicrotask:typeof ig<"u"?function(t){return ig.resolve(null).then(t).catch(Bb)}:ng;function Bb(t){setTimeout(function(){throw t})}function sa(t){return t==="head"}function sg(t,e){var r=e,u=0,f=0;do{var m=r.nextSibling;if(t.removeChild(r),m&&m.nodeType===8)if(r=m.data,r==="/$"){if(0<u&&8>u){r=u;var x=t.ownerDocument;if(r&1&&ll(x.documentElement),r&2&&ll(x.body),r&4)for(r=x.head,ll(r),x=r.firstChild;x;){var E=x.nextSibling,D=x.nodeName;x[xs]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&x.rel.toLowerCase()==="stylesheet"||r.removeChild(x),x=E}}if(f===0){t.removeChild(m),_l(e);return}f--}else r==="$"||r==="$?"||r==="$!"?f++:u=r.charCodeAt(0)-48;else u=0;r=m}while(r);_l(e)}function qf(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var r=e;switch(e=e.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":qf(r),or(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function jb(t,e,r,u){for(;t.nodeType===1;){var f=r;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!u&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(u){if(!t[xs])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=ui(t.nextSibling),t===null)break}return null}function Ub(t,e,r){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=ui(t.nextSibling),t===null))return null;return t}function Gf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function Hb(t,e){var r=t.ownerDocument;if(t.data!=="$?"||r.readyState==="complete")e();else{var u=function(){e(),r.removeEventListener("DOMContentLoaded",u)};r.addEventListener("DOMContentLoaded",u),t._reactRetry=u}}function ui(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="F!"||e==="F")break;if(e==="/$")return null}}return t}var Vf=null;function ag(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}function rg(t,e,r){switch(e=lc(r),t){case"html":if(t=e.documentElement,!t)throw Error(o(452));return t;case"head":if(t=e.head,!t)throw Error(o(453));return t;case"body":if(t=e.body,!t)throw Error(o(454));return t;default:throw Error(o(451))}}function ll(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);or(t)}var Jn=new Map,og=new Set;function uc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var os=at.d;at.d={f:Zb,r:qb,D:Gb,C:Vb,L:Yb,m:Fb,X:Qb,S:Xb,M:Wb};function Zb(){var t=os.f(),e=tc();return t||e}function qb(t){var e=ki(t);e!==null&&e.tag===5&&e.type==="form"?Ap(e):os.r(t)}var Vr=typeof document>"u"?null:document;function lg(t,e,r){var u=Vr;if(u&&typeof e=="string"&&e){var f=Qe(e);f='link[rel="'+t+'"][href="'+f+'"]',typeof r=="string"&&(f+='[crossorigin="'+r+'"]'),og.has(f)||(og.add(f),t={rel:t,crossOrigin:r,href:e},u.querySelector(f)===null&&(e=u.createElement("link"),Je(e,"link",t),Le(e),u.head.appendChild(e)))}}function Gb(t){os.D(t),lg("dns-prefetch",t,null)}function Vb(t,e){os.C(t,e),lg("preconnect",t,e)}function Yb(t,e,r){os.L(t,e,r);var u=Vr;if(u&&t&&e){var f='link[rel="preload"][as="'+Qe(e)+'"]';e==="image"&&r&&r.imageSrcSet?(f+='[imagesrcset="'+Qe(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(f+='[imagesizes="'+Qe(r.imageSizes)+'"]')):f+='[href="'+Qe(t)+'"]';var m=f;switch(e){case"style":m=Yr(t);break;case"script":m=Fr(t)}Jn.has(m)||(t=A({rel:"preload",href:e==="image"&&r&&r.imageSrcSet?void 0:t,as:e},r),Jn.set(m,t),u.querySelector(f)!==null||e==="style"&&u.querySelector(ul(m))||e==="script"&&u.querySelector(cl(m))||(e=u.createElement("link"),Je(e,"link",t),Le(e),u.head.appendChild(e)))}}function Fb(t,e){os.m(t,e);var r=Vr;if(r&&t){var u=e&&typeof e.as=="string"?e.as:"script",f='link[rel="modulepreload"][as="'+Qe(u)+'"][href="'+Qe(t)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Fr(t)}if(!Jn.has(m)&&(t=A({rel:"modulepreload",href:t},e),Jn.set(m,t),r.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(cl(m)))return}u=r.createElement("link"),Je(u,"link",t),Le(u),r.head.appendChild(u)}}}function Xb(t,e,r){os.S(t,e,r);var u=Vr;if(u&&t){var f=zi(u).hoistableStyles,m=Yr(t);e=e||"default";var x=f.get(m);if(!x){var E={loading:0,preload:null};if(x=u.querySelector(ul(m)))E.loading=5;else{t=A({rel:"stylesheet",href:t,"data-precedence":e},r),(r=Jn.get(m))&&Yf(t,r);var D=x=u.createElement("link");Le(D),Je(D,"link",t),D._p=new Promise(function(Z,X){D.onload=Z,D.onerror=X}),D.addEventListener("load",function(){E.loading|=1}),D.addEventListener("error",function(){E.loading|=2}),E.loading|=4,cc(x,e,u)}x={type:"stylesheet",instance:x,count:1,state:E},f.set(m,x)}}}function Qb(t,e){os.X(t,e);var r=Vr;if(r&&t){var u=zi(r).hoistableScripts,f=Fr(t),m=u.get(f);m||(m=r.querySelector(cl(f)),m||(t=A({src:t,async:!0},e),(e=Jn.get(f))&&Ff(t,e),m=r.createElement("script"),Le(m),Je(m,"link",t),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function Wb(t,e){os.M(t,e);var r=Vr;if(r&&t){var u=zi(r).hoistableScripts,f=Fr(t),m=u.get(f);m||(m=r.querySelector(cl(f)),m||(t=A({src:t,async:!0,type:"module"},e),(e=Jn.get(f))&&Ff(t,e),m=r.createElement("script"),Le(m),Je(m,"link",t),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function ug(t,e,r,u){var f=(f=rt.current)?uc(f):null;if(!f)throw Error(o(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(e=Yr(r.href),r=zi(f).hoistableStyles,u=r.get(e),u||(u={type:"style",instance:null,count:0,state:null},r.set(e,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=Yr(r.href);var m=zi(f).hoistableStyles,x=m.get(t);if(x||(f=f.ownerDocument||f,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,x),(m=f.querySelector(ul(t)))&&!m._p&&(x.instance=m,x.state.loading=5),Jn.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Jn.set(t,r),m||Kb(f,t,r,x.state))),e&&u===null)throw Error(o(528,""));return x}if(e&&u!==null)throw Error(o(529,""));return null;case"script":return e=r.async,r=r.src,typeof r=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Fr(r),r=zi(f).hoistableScripts,u=r.get(e),u||(u={type:"script",instance:null,count:0,state:null},r.set(e,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,t))}}function Yr(t){return'href="'+Qe(t)+'"'}function ul(t){return'link[rel="stylesheet"]['+t+"]"}function cg(t){return A({},t,{"data-precedence":t.precedence,precedence:null})}function Kb(t,e,r,u){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?u.loading=1:(e=t.createElement("link"),u.preload=e,e.addEventListener("load",function(){return u.loading|=1}),e.addEventListener("error",function(){return u.loading|=2}),Je(e,"link",r),Le(e),t.head.appendChild(e))}function Fr(t){return'[src="'+Qe(t)+'"]'}function cl(t){return"script[async]"+t}function hg(t,e,r){if(e.count++,e.instance===null)switch(e.type){case"style":var u=t.querySelector('style[data-href~="'+Qe(r.href)+'"]');if(u)return e.instance=u,Le(u),u;var f=A({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return u=(t.ownerDocument||t).createElement("style"),Le(u),Je(u,"style",f),cc(u,r.precedence,t),e.instance=u;case"stylesheet":f=Yr(r.href);var m=t.querySelector(ul(f));if(m)return e.state.loading|=4,e.instance=m,Le(m),m;u=cg(r),(f=Jn.get(f))&&Yf(u,f),m=(t.ownerDocument||t).createElement("link"),Le(m);var x=m;return x._p=new Promise(function(E,D){x.onload=E,x.onerror=D}),Je(m,"link",u),e.state.loading|=4,cc(m,r.precedence,t),e.instance=m;case"script":return m=Fr(r.src),(f=t.querySelector(cl(m)))?(e.instance=f,Le(f),f):(u=r,(f=Jn.get(m))&&(u=A({},r),Ff(u,f)),t=t.ownerDocument||t,f=t.createElement("script"),Le(f),Je(f,"link",u),t.head.appendChild(f),e.instance=f);case"void":return null;default:throw Error(o(443,e.type))}else e.type==="stylesheet"&&(e.state.loading&4)===0&&(u=e.instance,e.state.loading|=4,cc(u,r.precedence,t));return e.instance}function cc(t,e,r){for(var u=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,x=0;x<u.length;x++){var E=u[x];if(E.dataset.precedence===e)m=E;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(e=r.nodeType===9?r.head:r,e.insertBefore(t,e.firstChild))}function Yf(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function Ff(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var hc=null;function fg(t,e,r){if(hc===null){var u=new Map,f=hc=new Map;f.set(r,u)}else f=hc,u=f.get(r),u||(u=new Map,f.set(r,u));if(u.has(t))return u;for(u.set(t,null),r=r.getElementsByTagName(t),f=0;f<r.length;f++){var m=r[f];if(!(m[xs]||m[Be]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var x=m.getAttribute(e)||"";x=t+x;var E=u.get(x);E?E.push(m):u.set(x,[m])}}return u}function dg(t,e,r){t=t.ownerDocument||t,t.head.insertBefore(r,e==="title"?t.querySelector("head > title"):null)}function $b(t,e,r){if(r===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function mg(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var hl=null;function Jb(){}function tx(t,e,r){if(hl===null)throw Error(o(475));var u=hl;if(e.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(e.state.loading&4)===0){if(e.instance===null){var f=Yr(r.href),m=t.querySelector(ul(f));if(m){t=m._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(u.count++,u=fc.bind(u),t.then(u,u)),e.state.loading|=4,e.instance=m,Le(m);return}m=t.ownerDocument||t,r=cg(r),(f=Jn.get(f))&&Yf(r,f),m=m.createElement("link"),Le(m);var x=m;x._p=new Promise(function(E,D){x.onload=E,x.onerror=D}),Je(m,"link",r),e.instance=m}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(e,t),(t=e.state.preload)&&(e.state.loading&3)===0&&(u.count++,e=fc.bind(u),t.addEventListener("load",e),t.addEventListener("error",e))}}function ex(){if(hl===null)throw Error(o(475));var t=hl;return t.stylesheets&&t.count===0&&Xf(t,t.stylesheets),0<t.count?function(e){var r=setTimeout(function(){if(t.stylesheets&&Xf(t,t.stylesheets),t.unsuspend){var u=t.unsuspend;t.unsuspend=null,u()}},6e4);return t.unsuspend=e,function(){t.unsuspend=null,clearTimeout(r)}}:null}function fc(){if(this.count--,this.count===0){if(this.stylesheets)Xf(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var dc=null;function Xf(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,dc=new Map,e.forEach(nx,t),dc=null,fc.call(t))}function nx(t,e){if(!(e.state.loading&4)){var r=dc.get(t);if(r)var u=r.get(null);else{r=new Map,dc.set(t,r);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var x=f[m];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(r.set(x.dataset.precedence,x),u=x)}u&&r.set(null,u)}f=e.instance,x=f.getAttribute("data-precedence"),m=r.get(x)||u,m===u&&r.set(null,f),r.set(x,f),this.count++,u=fc.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),e.state.loading|=4}}var fl={$$typeof:$,Provider:null,Consumer:null,_currentValue:nt,_currentValue2:nt,_threadCount:0};function ix(t,e,r,u,f,m,x,E){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=rr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rr(0),this.hiddenUpdates=rr(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function pg(t,e,r,u,f,m,x,E,D,Z,X,K){return t=new ix(t,e,r,x,E,D,Z,K),e=1,m===!0&&(e|=24),m=mn(3,null,null,e),t.current=m,m.stateNode=t,e=Nh(),e.refCount++,t.pooledCache=e,e.refCount++,m.memoizedState={element:u,isDehydrated:r,cache:e},Oh(m),t}function _g(t){return t?(t=$i,t):$i}function gg(t,e,r,u,f,m){f=_g(f),u.context===null?u.context=f:u.pendingContext=f,u=Vs(e),u.payload={element:r},m=m===void 0?null:m,m!==null&&(u.callback=m),r=Ys(t,u,e),r!==null&&(Un(r,t,e),Zo(r,t,e))}function vg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Qf(t,e){vg(t,e),(t=t.alternate)&&vg(t,e)}function yg(t){if(t.tag===13){var e=Us(t,67108864);e!==null&&Un(e,t,67108864),Qf(t,67108864)}}var mc=!0;function sx(t,e,r,u){var f=Y.T;Y.T=null;var m=at.p;try{at.p=2,Wf(t,e,r,u)}finally{at.p=m,Y.T=f}}function ax(t,e,r,u){var f=Y.T;Y.T=null;var m=at.p;try{at.p=8,Wf(t,e,r,u)}finally{at.p=m,Y.T=f}}function Wf(t,e,r,u){if(mc){var f=Kf(u);if(f===null)If(t,e,u,pc,r),xg(t,u);else if(ox(f,t,e,r,u))u.stopPropagation();else if(xg(t,u),e&4&&-1<rx.indexOf(t)){for(;f!==null;){var m=ki(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var x=pn(m.pendingLanes);if(x!==0){var E=m;for(E.pendingLanes|=2,E.entangledLanes|=2;x;){var D=1<<31-et(x);E.entanglements[1]|=D,x&=~D}Li(m),($t&6)===0&&($u=se()+500,al(0))}}break;case 13:E=Us(m,2),E!==null&&Un(E,m,2),tc(),Qf(m,2)}if(m=Kf(u),m===null&&If(t,e,u,pc,r),m===f)break;f=m}f!==null&&u.stopPropagation()}else If(t,e,u,null,r)}}function Kf(t){return t=Ns(t),$f(t)}var pc=null;function $f(t){if(pc=null,t=bi(t),t!==null){var e=d(t);if(e===null)t=null;else{var r=e.tag;if(r===13){if(t=p(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return pc=t,null}function bg(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(vs()){case sr:return 2;case _a:return 8;case vi:case ar:return 32;case ga:return 268435456;default:return 32}default:return 32}}var Jf=!1,aa=null,ra=null,oa=null,dl=new Map,ml=new Map,la=[],rx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xg(t,e){switch(t){case"focusin":case"focusout":aa=null;break;case"dragenter":case"dragleave":ra=null;break;case"mouseover":case"mouseout":oa=null;break;case"pointerover":case"pointerout":dl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ml.delete(e.pointerId)}}function pl(t,e,r,u,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:e,domEventName:r,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},e!==null&&(e=ki(e),e!==null&&yg(e)),t):(t.eventSystemFlags|=u,e=t.targetContainers,f!==null&&e.indexOf(f)===-1&&e.push(f),t)}function ox(t,e,r,u,f){switch(e){case"focusin":return aa=pl(aa,t,e,r,u,f),!0;case"dragenter":return ra=pl(ra,t,e,r,u,f),!0;case"mouseover":return oa=pl(oa,t,e,r,u,f),!0;case"pointerover":var m=f.pointerId;return dl.set(m,pl(dl.get(m)||null,t,e,r,u,f)),!0;case"gotpointercapture":return m=f.pointerId,ml.set(m,pl(ml.get(m)||null,t,e,r,u,f)),!0}return!1}function Sg(t){var e=bi(t.target);if(e!==null){var r=d(e);if(r!==null){if(e=r.tag,e===13){if(e=p(r),e!==null){t.blockedOn=e,yo(t.priority,function(){if(r.tag===13){var u=jn();u=go(u);var f=Us(r,u);f!==null&&Un(f,r,u),Qf(r,u)}});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _c(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Kf(t.nativeEvent);if(r===null){r=t.nativeEvent;var u=new r.constructor(r.type,r);wa=u,r.target.dispatchEvent(u),wa=null}else return e=ki(r),e!==null&&yg(e),t.blockedOn=r,!1;e.shift()}return!0}function wg(t,e,r){_c(t)&&r.delete(e)}function lx(){Jf=!1,aa!==null&&_c(aa)&&(aa=null),ra!==null&&_c(ra)&&(ra=null),oa!==null&&_c(oa)&&(oa=null),dl.forEach(wg),ml.forEach(wg)}function gc(t,e){t.blockedOn===e&&(t.blockedOn=null,Jf||(Jf=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,lx)))}var vc=null;function Eg(t){vc!==t&&(vc=t,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){vc===t&&(vc=null);for(var e=0;e<t.length;e+=3){var r=t[e],u=t[e+1],f=t[e+2];if(typeof u!="function"){if($f(u||r)===null)continue;break}var m=ki(r);m!==null&&(t.splice(e,3),e-=3,Kh(m,{pending:!0,data:f,method:r.method,action:u},u,f))}}))}function _l(t){function e(D){return gc(D,t)}aa!==null&&gc(aa,t),ra!==null&&gc(ra,t),oa!==null&&gc(oa,t),dl.forEach(e),ml.forEach(e);for(var r=0;r<la.length;r++){var u=la[r];u.blockedOn===t&&(u.blockedOn=null)}for(;0<la.length&&(r=la[0],r.blockedOn===null);)Sg(r),r.blockedOn===null&&la.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(u=0;u<r.length;u+=3){var f=r[u],m=r[u+1],x=f[nn]||null;if(typeof m=="function")x||Eg(r);else if(x){var E=null;if(m&&m.hasAttribute("formAction")){if(f=m,x=m[nn]||null)E=x.formAction;else if($f(f)!==null)continue}else E=x.action;typeof E=="function"?r[u+1]=E:(r.splice(u,3),u-=3),Eg(r)}}}function td(t){this._internalRoot=t}yc.prototype.render=td.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(o(409));var r=e.current,u=jn();gg(r,u,t,e,null,null)},yc.prototype.unmount=td.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;gg(t.current,2,null,t,null,null),tc(),e[bs]=null}};function yc(t){this._internalRoot=t}yc.prototype.unstable_scheduleHydration=function(t){if(t){var e=tu();t={blockedOn:null,target:t,priority:e};for(var r=0;r<la.length&&e!==0&&e<la[r].priority;r++);la.splice(r,0,t),r===0&&Sg(t)}};var Cg=n.version;if(Cg!=="19.1.0")throw Error(o(527,Cg,"19.1.0"));at.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=g(e),t=t!==null?v(t):null,t=t===null?null:t.stateNode,t};var ux={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bc.isDisabled&&bc.supportsFiber)try{ei=bc.inject(ux),Ie=bc}catch{}}return vl.createRoot=function(t,e){if(!c(t))throw Error(o(299));var r=!1,u="",f=Hp,m=Zp,x=qp,E=null;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(u=e.identifierPrefix),e.onUncaughtError!==void 0&&(f=e.onUncaughtError),e.onCaughtError!==void 0&&(m=e.onCaughtError),e.onRecoverableError!==void 0&&(x=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(E=e.unstable_transitionCallbacks)),e=pg(t,1,!1,null,null,r,u,f,m,x,E,null),t[bs]=e.current,Pf(t),new td(e)},vl.hydrateRoot=function(t,e,r){if(!c(t))throw Error(o(299));var u=!1,f="",m=Hp,x=Zp,E=qp,D=null,Z=null;return r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(x=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(D=r.unstable_transitionCallbacks),r.formState!==void 0&&(Z=r.formState)),e=pg(t,1,!0,e,r??null,u,f,m,x,E,D,Z),e.context=_g(null),r=e.current,u=jn(),u=go(u),f=Vs(u),f.callback=null,Ys(r,f,u),r=u,e.current.lanes=r,ys(e,r),Li(e),t[bs]=e.current,Pf(t),new yc(e)},vl.version="19.1.0",vl}var zg;function vx(){if(zg)return id.exports;zg=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(n){console.error(n)}}return a(),id.exports=gx(),id.exports}var yx=vx();const bx=Ud(yx);var yl={},Pg;function xx(){if(Pg)return yl;Pg=1,Object.defineProperty(yl,"__esModule",{value:!0}),yl.parse=p,yl.serialize=v;const a=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,n=/^[\u0021-\u003A\u003C-\u007E]*$/,s=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,o=/^[\u0020-\u003A\u003D-\u007E]*$/,c=Object.prototype.toString,d=(()=>{const C=function(){};return C.prototype=Object.create(null),C})();function p(C,P){const M=new d,k=C.length;if(k<2)return M;const B=(P==null?void 0:P.decode)||A;let U=0;do{const Q=C.indexOf("=",U);if(Q===-1)break;const $=C.indexOf(";",U),ft=$===-1?k:$;if(Q>ft){U=C.lastIndexOf(";",Q-1)+1;continue}const lt=b(C,U,Q),Ct=g(C,Q,lt),kt=C.slice(lt,Ct);if(M[kt]===void 0){let dt=b(C,Q+1,ft),xt=g(C,ft,dt);const qt=B(C.slice(dt,xt));M[kt]=qt}U=ft+1}while(U<k);return M}function b(C,P,M){do{const k=C.charCodeAt(P);if(k!==32&&k!==9)return P}while(++P<M);return M}function g(C,P,M){for(;P>M;){const k=C.charCodeAt(--P);if(k!==32&&k!==9)return P+1}return M}function v(C,P,M){const k=(M==null?void 0:M.encode)||encodeURIComponent;if(!a.test(C))throw new TypeError(`argument name is invalid: ${C}`);const B=k(P);if(!n.test(B))throw new TypeError(`argument val is invalid: ${P}`);let U=C+"="+B;if(!M)return U;if(M.maxAge!==void 0){if(!Number.isInteger(M.maxAge))throw new TypeError(`option maxAge is invalid: ${M.maxAge}`);U+="; Max-Age="+M.maxAge}if(M.domain){if(!s.test(M.domain))throw new TypeError(`option domain is invalid: ${M.domain}`);U+="; Domain="+M.domain}if(M.path){if(!o.test(M.path))throw new TypeError(`option path is invalid: ${M.path}`);U+="; Path="+M.path}if(M.expires){if(!T(M.expires)||!Number.isFinite(M.expires.valueOf()))throw new TypeError(`option expires is invalid: ${M.expires}`);U+="; Expires="+M.expires.toUTCString()}if(M.httpOnly&&(U+="; HttpOnly"),M.secure&&(U+="; Secure"),M.partitioned&&(U+="; Partitioned"),M.priority)switch(typeof M.priority=="string"?M.priority.toLowerCase():void 0){case"low":U+="; Priority=Low";break;case"medium":U+="; Priority=Medium";break;case"high":U+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${M.priority}`)}if(M.sameSite)switch(typeof M.sameSite=="string"?M.sameSite.toLowerCase():M.sameSite){case!0:case"strict":U+="; SameSite=Strict";break;case"lax":U+="; SameSite=Lax";break;case"none":U+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${M.sameSite}`)}return U}function A(C){if(C.indexOf("%")===-1)return C;try{return decodeURIComponent(C)}catch{return C}}function T(C){return c.call(C)==="[object Date]"}return yl}xx();var Ig="popstate";function Sx(a={}){function n(o,c){let{pathname:d,search:p,hash:b}=o.location;return bd("",{pathname:d,search:p,hash:b},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function s(o,c){return typeof c=="string"?c:Ol(c)}return Ex(n,s,null,a)}function ye(a,n){if(a===!1||a===null||typeof a>"u")throw new Error(n)}function pi(a,n){if(!a){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function wx(){return Math.random().toString(36).substring(2,10)}function Bg(a,n){return{usr:a.state,key:a.key,idx:n}}function bd(a,n,s=null,o){return{pathname:typeof a=="string"?a:a.pathname,search:"",hash:"",...typeof n=="string"?so(n):n,state:s,key:n&&n.key||o||wx()}}function Ol({pathname:a="/",search:n="",hash:s=""}){return n&&n!=="?"&&(a+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(a+=s.charAt(0)==="#"?s:"#"+s),a}function so(a){let n={};if(a){let s=a.indexOf("#");s>=0&&(n.hash=a.substring(s),a=a.substring(0,s));let o=a.indexOf("?");o>=0&&(n.search=a.substring(o),a=a.substring(0,o)),a&&(n.pathname=a)}return n}function Ex(a,n,s,o={}){let{window:c=document.defaultView,v5Compat:d=!1}=o,p=c.history,b="POP",g=null,v=A();v==null&&(v=0,p.replaceState({...p.state,idx:v},""));function A(){return(p.state||{idx:null}).idx}function T(){b="POP";let B=A(),U=B==null?null:B-v;v=B,g&&g({action:b,location:k.location,delta:U})}function C(B,U){b="PUSH";let Q=bd(k.location,B,U);v=A()+1;let $=Bg(Q,v),ft=k.createHref(Q);try{p.pushState($,"",ft)}catch(lt){if(lt instanceof DOMException&&lt.name==="DataCloneError")throw lt;c.location.assign(ft)}d&&g&&g({action:b,location:k.location,delta:1})}function P(B,U){b="REPLACE";let Q=bd(k.location,B,U);v=A();let $=Bg(Q,v),ft=k.createHref(Q);p.replaceState($,"",ft),d&&g&&g({action:b,location:k.location,delta:0})}function M(B){return Cx(B)}let k={get action(){return b},get location(){return a(c,p)},listen(B){if(g)throw new Error("A history only accepts one active listener");return c.addEventListener(Ig,T),g=B,()=>{c.removeEventListener(Ig,T),g=null}},createHref(B){return n(c,B)},createURL:M,encodeLocation(B){let U=M(B);return{pathname:U.pathname,search:U.search,hash:U.hash}},push:C,replace:P,go(B){return p.go(B)}};return k}function Cx(a,n=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),ye(s,"No window.location.(origin|href) available to create URL");let o=typeof a=="string"?a:Ol(a);return o=o.replace(/ $/,"%20"),!n&&o.startsWith("//")&&(o=s+o),new URL(o,s)}function Qv(a,n,s="/"){return Tx(a,n,s,!1)}function Tx(a,n,s,o){let c=typeof n=="string"?so(n):n,d=hs(c.pathname||"/",s);if(d==null)return null;let p=Wv(a);Ax(p);let b=null;for(let g=0;b==null&&g<p.length;++g){let v=Bx(d);b=Px(p[g],v,o)}return b}function Wv(a,n=[],s=[],o=""){let c=(d,p,b)=>{let g={relativePath:b===void 0?d.path||"":b,caseSensitive:d.caseSensitive===!0,childrenIndex:p,route:d};g.relativePath.startsWith("/")&&(ye(g.relativePath.startsWith(o),`Absolute route path "${g.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(o.length));let v=us([o,g.relativePath]),A=s.concat(g);d.children&&d.children.length>0&&(ye(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),Wv(d.children,n,A,v)),!(d.path==null&&!d.index)&&n.push({path:v,score:kx(v,d.index),routesMeta:A})};return a.forEach((d,p)=>{var b;if(d.path===""||!((b=d.path)!=null&&b.includes("?")))c(d,p);else for(let g of Kv(d.path))c(d,p,g)}),n}function Kv(a){let n=a.split("/");if(n.length===0)return[];let[s,...o]=n,c=s.endsWith("?"),d=s.replace(/\?$/,"");if(o.length===0)return c?[d,""]:[d];let p=Kv(o.join("/")),b=[];return b.push(...p.map(g=>g===""?d:[d,g].join("/"))),c&&b.push(...p),b.map(g=>a.startsWith("/")&&g===""?"/":g)}function Ax(a){a.sort((n,s)=>n.score!==s.score?s.score-n.score:zx(n.routesMeta.map(o=>o.childrenIndex),s.routesMeta.map(o=>o.childrenIndex)))}var Nx=/^:[\w-]+$/,Mx=3,Rx=2,Lx=1,Ox=10,Dx=-2,jg=a=>a==="*";function kx(a,n){let s=a.split("/"),o=s.length;return s.some(jg)&&(o+=Dx),n&&(o+=Rx),s.filter(c=>!jg(c)).reduce((c,d)=>c+(Nx.test(d)?Mx:d===""?Lx:Ox),o)}function zx(a,n){return a.length===n.length&&a.slice(0,-1).every((o,c)=>o===n[c])?a[a.length-1]-n[n.length-1]:0}function Px(a,n,s=!1){let{routesMeta:o}=a,c={},d="/",p=[];for(let b=0;b<o.length;++b){let g=o[b],v=b===o.length-1,A=d==="/"?n:n.slice(d.length)||"/",T=Nc({path:g.relativePath,caseSensitive:g.caseSensitive,end:v},A),C=g.route;if(!T&&v&&s&&!o[o.length-1].route.index&&(T=Nc({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},A)),!T)return null;Object.assign(c,T.params),p.push({params:c,pathname:us([d,T.pathname]),pathnameBase:Zx(us([d,T.pathnameBase])),route:C}),T.pathnameBase!=="/"&&(d=us([d,T.pathnameBase]))}return p}function Nc(a,n){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[s,o]=Ix(a.path,a.caseSensitive,a.end),c=n.match(s);if(!c)return null;let d=c[0],p=d.replace(/(.)\/+$/,"$1"),b=c.slice(1);return{params:o.reduce((v,{paramName:A,isOptional:T},C)=>{if(A==="*"){let M=b[C]||"";p=d.slice(0,d.length-M.length).replace(/(.)\/+$/,"$1")}const P=b[C];return T&&!P?v[A]=void 0:v[A]=(P||"").replace(/%2F/g,"/"),v},{}),pathname:d,pathnameBase:p,pattern:a}}function Ix(a,n=!1,s=!0){pi(a==="*"||!a.endsWith("*")||a.endsWith("/*"),`Route path "${a}" will be treated as if it were "${a.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${a.replace(/\*$/,"/*")}".`);let o=[],c="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(p,b,g)=>(o.push({paramName:b,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return a.endsWith("*")?(o.push({paramName:"*"}),c+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?c+="\\/*$":a!==""&&a!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,n?void 0:"i"),o]}function Bx(a){try{return a.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return pi(!1,`The URL path "${a}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),a}}function hs(a,n){if(n==="/")return a;if(!a.toLowerCase().startsWith(n.toLowerCase()))return null;let s=n.endsWith("/")?n.length-1:n.length,o=a.charAt(s);return o&&o!=="/"?null:a.slice(s)||"/"}function jx(a,n="/"){let{pathname:s,search:o="",hash:c=""}=typeof a=="string"?so(a):a;return{pathname:s?s.startsWith("/")?s:Ux(s,n):n,search:qx(o),hash:Gx(c)}}function Ux(a,n){let s=n.replace(/\/+$/,"").split("/");return a.split("/").forEach(c=>{c===".."?s.length>1&&s.pop():c!=="."&&s.push(c)}),s.length>1?s.join("/"):"/"}function od(a,n,s,o){return`Cannot include a '${a}' character in a manually specified \`to.${n}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Hx(a){return a.filter((n,s)=>s===0||n.route.path&&n.route.path.length>0)}function Zd(a){let n=Hx(a);return n.map((s,o)=>o===n.length-1?s.pathname:s.pathnameBase)}function qd(a,n,s,o=!1){let c;typeof a=="string"?c=so(a):(c={...a},ye(!c.pathname||!c.pathname.includes("?"),od("?","pathname","search",c)),ye(!c.pathname||!c.pathname.includes("#"),od("#","pathname","hash",c)),ye(!c.search||!c.search.includes("#"),od("#","search","hash",c)));let d=a===""||c.pathname==="",p=d?"/":c.pathname,b;if(p==null)b=s;else{let T=n.length-1;if(!o&&p.startsWith("..")){let C=p.split("/");for(;C[0]==="..";)C.shift(),T-=1;c.pathname=C.join("/")}b=T>=0?n[T]:"/"}let g=jx(c,b),v=p&&p!=="/"&&p.endsWith("/"),A=(d||p===".")&&s.endsWith("/");return!g.pathname.endsWith("/")&&(v||A)&&(g.pathname+="/"),g}var us=a=>a.join("/").replace(/\/\/+/g,"/"),Zx=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),qx=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,Gx=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a;function Vx(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}var $v=["POST","PUT","PATCH","DELETE"];new Set($v);var Yx=["GET",...$v];new Set(Yx);var ao=R.createContext(null);ao.displayName="DataRouter";var Fc=R.createContext(null);Fc.displayName="DataRouterState";var Jv=R.createContext({isTransitioning:!1});Jv.displayName="ViewTransition";var Fx=R.createContext(new Map);Fx.displayName="Fetchers";var Xx=R.createContext(null);Xx.displayName="Await";var _i=R.createContext(null);_i.displayName="Navigation";var ql=R.createContext(null);ql.displayName="Location";var ti=R.createContext({outlet:null,matches:[],isDataRoute:!1});ti.displayName="Route";var Gd=R.createContext(null);Gd.displayName="RouteError";function Qx(a,{relative:n}={}){ye(ro(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:o}=R.useContext(_i),{hash:c,pathname:d,search:p}=Gl(a,{relative:n}),b=d;return s!=="/"&&(b=d==="/"?s:us([s,d])),o.createHref({pathname:b,search:p,hash:c})}function ro(){return R.useContext(ql)!=null}function ps(){return ye(ro(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(ql).location}var ty="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ey(a){R.useContext(_i).static||R.useLayoutEffect(a)}function Xc(){let{isDataRoute:a}=R.useContext(ti);return a?h1():Wx()}function Wx(){ye(ro(),"useNavigate() may be used only in the context of a <Router> component.");let a=R.useContext(ao),{basename:n,navigator:s}=R.useContext(_i),{matches:o}=R.useContext(ti),{pathname:c}=ps(),d=JSON.stringify(Zd(o)),p=R.useRef(!1);return ey(()=>{p.current=!0}),R.useCallback((g,v={})=>{if(pi(p.current,ty),!p.current)return;if(typeof g=="number"){s.go(g);return}let A=qd(g,JSON.parse(d),c,v.relative==="path");a==null&&n!=="/"&&(A.pathname=A.pathname==="/"?n:us([n,A.pathname])),(v.replace?s.replace:s.push)(A,v.state,v)},[n,s,d,c,a])}var Kx=R.createContext(null);function $x(a){let n=R.useContext(ti).outlet;return n&&R.createElement(Kx.Provider,{value:a},n)}function Jx(){let{matches:a}=R.useContext(ti),n=a[a.length-1];return n?n.params:{}}function Gl(a,{relative:n}={}){let{matches:s}=R.useContext(ti),{pathname:o}=ps(),c=JSON.stringify(Zd(s));return R.useMemo(()=>qd(a,JSON.parse(c),o,n==="path"),[a,c,o,n])}function t1(a,n){return ny(a,n)}function ny(a,n,s,o){var U;ye(ro(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=R.useContext(_i),{matches:d}=R.useContext(ti),p=d[d.length-1],b=p?p.params:{},g=p?p.pathname:"/",v=p?p.pathnameBase:"/",A=p&&p.route;{let Q=A&&A.path||"";iy(g,!A||Q.endsWith("*")||Q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${Q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Q}"> to <Route path="${Q==="/"?"*":`${Q}/*`}">.`)}let T=ps(),C;if(n){let Q=typeof n=="string"?so(n):n;ye(v==="/"||((U=Q.pathname)==null?void 0:U.startsWith(v)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${Q.pathname}" was given in the \`location\` prop.`),C=Q}else C=T;let P=C.pathname||"/",M=P;if(v!=="/"){let Q=v.replace(/^\//,"").split("/");M="/"+P.replace(/^\//,"").split("/").slice(Q.length).join("/")}let k=Qv(a,{pathname:M});pi(A||k!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),pi(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let B=a1(k&&k.map(Q=>Object.assign({},Q,{params:Object.assign({},b,Q.params),pathname:us([v,c.encodeLocation?c.encodeLocation(Q.pathname).pathname:Q.pathname]),pathnameBase:Q.pathnameBase==="/"?v:us([v,c.encodeLocation?c.encodeLocation(Q.pathnameBase).pathname:Q.pathnameBase])})),d,s,o);return n&&B?R.createElement(ql.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},B):B}function e1(){let a=c1(),n=Vx(a)?`${a.status} ${a.statusText}`:a instanceof Error?a.message:JSON.stringify(a),s=a instanceof Error?a.stack:null,o="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:o},d={padding:"2px 4px",backgroundColor:o},p=null;return console.error("Error handled by React Router default ErrorBoundary:",a),p=R.createElement(R.Fragment,null,R.createElement("p",null,"💿 Hey developer 👋"),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:d},"ErrorBoundary")," or"," ",R.createElement("code",{style:d},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},n),s?R.createElement("pre",{style:c},s):null,p)}var n1=R.createElement(e1,null),i1=class extends R.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,n){return n.location!==a.location||n.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:n.error,location:n.location,revalidation:a.revalidation||n.revalidation}}componentDidCatch(a,n){console.error("React Router caught the following error during render",a,n)}render(){return this.state.error!==void 0?R.createElement(ti.Provider,{value:this.props.routeContext},R.createElement(Gd.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function s1({routeContext:a,match:n,children:s}){let o=R.useContext(ao);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),R.createElement(ti.Provider,{value:a},s)}function a1(a,n=[],s=null,o=null){if(a==null){if(!s)return null;if(s.errors)a=s.matches;else if(n.length===0&&!s.initialized&&s.matches.length>0)a=s.matches;else return null}let c=a,d=s==null?void 0:s.errors;if(d!=null){let g=c.findIndex(v=>v.route.id&&(d==null?void 0:d[v.route.id])!==void 0);ye(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),c=c.slice(0,Math.min(c.length,g+1))}let p=!1,b=-1;if(s)for(let g=0;g<c.length;g++){let v=c[g];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(b=g),v.route.id){let{loaderData:A,errors:T}=s,C=v.route.loader&&!A.hasOwnProperty(v.route.id)&&(!T||T[v.route.id]===void 0);if(v.route.lazy||C){p=!0,b>=0?c=c.slice(0,b+1):c=[c[0]];break}}}return c.reduceRight((g,v,A)=>{let T,C=!1,P=null,M=null;s&&(T=d&&v.route.id?d[v.route.id]:void 0,P=v.route.errorElement||n1,p&&(b<0&&A===0?(iy("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),C=!0,M=null):b===A&&(C=!0,M=v.route.hydrateFallbackElement||null)));let k=n.concat(c.slice(0,A+1)),B=()=>{let U;return T?U=P:C?U=M:v.route.Component?U=R.createElement(v.route.Component,null):v.route.element?U=v.route.element:U=g,R.createElement(s1,{match:v,routeContext:{outlet:g,matches:k,isDataRoute:s!=null},children:U})};return s&&(v.route.ErrorBoundary||v.route.errorElement||A===0)?R.createElement(i1,{location:s.location,revalidation:s.revalidation,component:P,error:T,children:B(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):B()},null)}function Vd(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function r1(a){let n=R.useContext(ao);return ye(n,Vd(a)),n}function o1(a){let n=R.useContext(Fc);return ye(n,Vd(a)),n}function l1(a){let n=R.useContext(ti);return ye(n,Vd(a)),n}function Yd(a){let n=l1(a),s=n.matches[n.matches.length-1];return ye(s.route.id,`${a} can only be used on routes that contain a unique "id"`),s.route.id}function u1(){return Yd("useRouteId")}function c1(){var o;let a=R.useContext(Gd),n=o1("useRouteError"),s=Yd("useRouteError");return a!==void 0?a:(o=n.errors)==null?void 0:o[s]}function h1(){let{router:a}=r1("useNavigate"),n=Yd("useNavigate"),s=R.useRef(!1);return ey(()=>{s.current=!0}),R.useCallback(async(c,d={})=>{pi(s.current,ty),s.current&&(typeof c=="number"?a.navigate(c):await a.navigate(c,{fromRouteId:n,...d}))},[a,n])}var Ug={};function iy(a,n,s){!n&&!Ug[a]&&(Ug[a]=!0,pi(!1,s))}R.memo(f1);function f1({routes:a,future:n,state:s}){return ny(a,void 0,s,n)}function Hg({to:a,replace:n,state:s,relative:o}){ye(ro(),"<Navigate> may be used only in the context of a <Router> component.");let{static:c}=R.useContext(_i);pi(!c,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:d}=R.useContext(ti),{pathname:p}=ps(),b=Xc(),g=qd(a,Zd(d),p,o==="path"),v=JSON.stringify(g);return R.useEffect(()=>{b(JSON.parse(v),{replace:n,state:s,relative:o})},[b,v,o,n,s]),null}function d1(a){return $x(a.context)}function ci(a){ye(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function m1({basename:a="/",children:n=null,location:s,navigationType:o="POP",navigator:c,static:d=!1}){ye(!ro(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=a.replace(/^\/*/,"/"),b=R.useMemo(()=>({basename:p,navigator:c,static:d,future:{}}),[p,c,d]);typeof s=="string"&&(s=so(s));let{pathname:g="/",search:v="",hash:A="",state:T=null,key:C="default"}=s,P=R.useMemo(()=>{let M=hs(g,p);return M==null?null:{location:{pathname:M,search:v,hash:A,state:T,key:C},navigationType:o}},[p,g,v,A,T,C,o]);return pi(P!=null,`<Router basename="${p}"> is not able to match the URL "${g}${v}${A}" because it does not start with the basename, so the <Router> won't render anything.`),P==null?null:R.createElement(_i.Provider,{value:b},R.createElement(ql.Provider,{children:n,value:P}))}function p1({children:a,location:n}){return t1(xd(a),n)}function xd(a,n=[]){let s=[];return R.Children.forEach(a,(o,c)=>{if(!R.isValidElement(o))return;let d=[...n,c];if(o.type===R.Fragment){s.push.apply(s,xd(o.props.children,d));return}ye(o.type===ci,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ye(!o.props.index||!o.props.children,"An index route cannot have child routes.");let p={id:o.props.id||d.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(p.children=xd(o.props.children,d)),s.push(p)}),s}var Ec="get",Cc="application/x-www-form-urlencoded";function Qc(a){return a!=null&&typeof a.tagName=="string"}function _1(a){return Qc(a)&&a.tagName.toLowerCase()==="button"}function g1(a){return Qc(a)&&a.tagName.toLowerCase()==="form"}function v1(a){return Qc(a)&&a.tagName.toLowerCase()==="input"}function y1(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function b1(a,n){return a.button===0&&(!n||n==="_self")&&!y1(a)}var xc=null;function x1(){if(xc===null)try{new FormData(document.createElement("form"),0),xc=!1}catch{xc=!0}return xc}var S1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ld(a){return a!=null&&!S1.has(a)?(pi(!1,`"${a}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Cc}"`),null):a}function w1(a,n){let s,o,c,d,p;if(g1(a)){let b=a.getAttribute("action");o=b?hs(b,n):null,s=a.getAttribute("method")||Ec,c=ld(a.getAttribute("enctype"))||Cc,d=new FormData(a)}else if(_1(a)||v1(a)&&(a.type==="submit"||a.type==="image")){let b=a.form;if(b==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=a.getAttribute("formaction")||b.getAttribute("action");if(o=g?hs(g,n):null,s=a.getAttribute("formmethod")||b.getAttribute("method")||Ec,c=ld(a.getAttribute("formenctype"))||ld(b.getAttribute("enctype"))||Cc,d=new FormData(b,a),!x1()){let{name:v,type:A,value:T}=a;if(A==="image"){let C=v?`${v}.`:"";d.append(`${C}x`,"0"),d.append(`${C}y`,"0")}else v&&d.append(v,T)}}else{if(Qc(a))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=Ec,o=null,c=Cc,p=a}return d&&c==="text/plain"&&(p=d,d=void 0),{action:o,method:s.toLowerCase(),encType:c,formData:d,body:p}}function Fd(a,n){if(a===!1||a===null||typeof a>"u")throw new Error(n)}async function E1(a,n){if(a.id in n)return n[a.id];try{let s=await import(a.module);return n[a.id]=s,s}catch(s){return console.error(`Error loading route module \`${a.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function C1(a){return a==null?!1:a.href==null?a.rel==="preload"&&typeof a.imageSrcSet=="string"&&typeof a.imageSizes=="string":typeof a.rel=="string"&&typeof a.href=="string"}async function T1(a,n,s){let o=await Promise.all(a.map(async c=>{let d=n.routes[c.route.id];if(d){let p=await E1(d,s);return p.links?p.links():[]}return[]}));return R1(o.flat(1).filter(C1).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function Zg(a,n,s,o,c,d){let p=(g,v)=>s[v]?g.route.id!==s[v].route.id:!0,b=(g,v)=>{var A;return s[v].pathname!==g.pathname||((A=s[v].route.path)==null?void 0:A.endsWith("*"))&&s[v].params["*"]!==g.params["*"]};return d==="assets"?n.filter((g,v)=>p(g,v)||b(g,v)):d==="data"?n.filter((g,v)=>{var T;let A=o.routes[g.route.id];if(!A||!A.hasLoader)return!1;if(p(g,v)||b(g,v))return!0;if(g.route.shouldRevalidate){let C=g.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:((T=s[0])==null?void 0:T.params)||{},nextUrl:new URL(a,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof C=="boolean")return C}return!0}):[]}function A1(a,n,{includeHydrateFallback:s}={}){return N1(a.map(o=>{let c=n.routes[o.route.id];if(!c)return[];let d=[c.module];return c.clientActionModule&&(d=d.concat(c.clientActionModule)),c.clientLoaderModule&&(d=d.concat(c.clientLoaderModule)),s&&c.hydrateFallbackModule&&(d=d.concat(c.hydrateFallbackModule)),c.imports&&(d=d.concat(c.imports)),d}).flat(1))}function N1(a){return[...new Set(a)]}function M1(a){let n={},s=Object.keys(a).sort();for(let o of s)n[o]=a[o];return n}function R1(a,n){let s=new Set;return new Set(n),a.reduce((o,c)=>{let d=JSON.stringify(M1(c));return s.has(d)||(s.add(d),o.push({key:d,link:c})),o},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var L1=new Set([100,101,204,205]);function O1(a,n){let s=typeof a=="string"?new URL(a,typeof window>"u"?"server://singlefetch/":window.location.origin):a;return s.pathname==="/"?s.pathname="_root.data":n&&hs(s.pathname,n)==="/"?s.pathname=`${n.replace(/\/$/,"")}/_root.data`:s.pathname=`${s.pathname.replace(/\/$/,"")}.data`,s}function sy(){let a=R.useContext(ao);return Fd(a,"You must render this element inside a <DataRouterContext.Provider> element"),a}function D1(){let a=R.useContext(Fc);return Fd(a,"You must render this element inside a <DataRouterStateContext.Provider> element"),a}var Xd=R.createContext(void 0);Xd.displayName="FrameworkContext";function ay(){let a=R.useContext(Xd);return Fd(a,"You must render this element inside a <HydratedRouter> element"),a}function k1(a,n){let s=R.useContext(Xd),[o,c]=R.useState(!1),[d,p]=R.useState(!1),{onFocus:b,onBlur:g,onMouseEnter:v,onMouseLeave:A,onTouchStart:T}=n,C=R.useRef(null);R.useEffect(()=>{if(a==="render"&&p(!0),a==="viewport"){let k=U=>{U.forEach(Q=>{p(Q.isIntersecting)})},B=new IntersectionObserver(k,{threshold:.5});return C.current&&B.observe(C.current),()=>{B.disconnect()}}},[a]),R.useEffect(()=>{if(o){let k=setTimeout(()=>{p(!0)},100);return()=>{clearTimeout(k)}}},[o]);let P=()=>{c(!0)},M=()=>{c(!1),p(!1)};return s?a!=="intent"?[d,C,{}]:[d,C,{onFocus:bl(b,P),onBlur:bl(g,M),onMouseEnter:bl(v,P),onMouseLeave:bl(A,M),onTouchStart:bl(T,P)}]:[!1,C,{}]}function bl(a,n){return s=>{a&&a(s),s.defaultPrevented||n(s)}}function z1({page:a,...n}){let{router:s}=sy(),o=R.useMemo(()=>Qv(s.routes,a,s.basename),[s.routes,a,s.basename]);return o?R.createElement(I1,{page:a,matches:o,...n}):null}function P1(a){let{manifest:n,routeModules:s}=ay(),[o,c]=R.useState([]);return R.useEffect(()=>{let d=!1;return T1(a,n,s).then(p=>{d||c(p)}),()=>{d=!0}},[a,n,s]),o}function I1({page:a,matches:n,...s}){let o=ps(),{manifest:c,routeModules:d}=ay(),{basename:p}=sy(),{loaderData:b,matches:g}=D1(),v=R.useMemo(()=>Zg(a,n,g,c,o,"data"),[a,n,g,c,o]),A=R.useMemo(()=>Zg(a,n,g,c,o,"assets"),[a,n,g,c,o]),T=R.useMemo(()=>{if(a===o.pathname+o.search+o.hash)return[];let M=new Set,k=!1;if(n.forEach(U=>{var $;let Q=c.routes[U.route.id];!Q||!Q.hasLoader||(!v.some(ft=>ft.route.id===U.route.id)&&U.route.id in b&&(($=d[U.route.id])!=null&&$.shouldRevalidate)||Q.hasClientLoader?k=!0:M.add(U.route.id))}),M.size===0)return[];let B=O1(a,p);return k&&M.size>0&&B.searchParams.set("_routes",n.filter(U=>M.has(U.route.id)).map(U=>U.route.id).join(",")),[B.pathname+B.search]},[p,b,o,c,v,n,a,d]),C=R.useMemo(()=>A1(A,c),[A,c]),P=P1(A);return R.createElement(R.Fragment,null,T.map(M=>R.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...s})),C.map(M=>R.createElement("link",{key:M,rel:"modulepreload",href:M,...s})),P.map(({key:M,link:k})=>R.createElement("link",{key:M,...k})))}function B1(...a){return n=>{a.forEach(s=>{typeof s=="function"?s(n):s!=null&&(s.current=n)})}}var ry=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ry&&(window.__reactRouterVersion="7.6.2")}catch{}function j1({basename:a,children:n,window:s}){let o=R.useRef();o.current==null&&(o.current=Sx({window:s,v5Compat:!0}));let c=o.current,[d,p]=R.useState({action:c.action,location:c.location}),b=R.useCallback(g=>{R.startTransition(()=>p(g))},[p]);return R.useLayoutEffect(()=>c.listen(b),[c,b]),R.createElement(m1,{basename:a,children:n,location:d.location,navigationType:d.action,navigator:c})}var oy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ly=R.forwardRef(function({onClick:n,discover:s="render",prefetch:o="none",relative:c,reloadDocument:d,replace:p,state:b,target:g,to:v,preventScrollReset:A,viewTransition:T,...C},P){let{basename:M}=R.useContext(_i),k=typeof v=="string"&&oy.test(v),B,U=!1;if(typeof v=="string"&&k&&(B=v,ry))try{let xt=new URL(window.location.href),qt=v.startsWith("//")?new URL(xt.protocol+v):new URL(v),Rt=hs(qt.pathname,M);qt.origin===xt.origin&&Rt!=null?v=Rt+qt.search+qt.hash:U=!0}catch{pi(!1,`<Link to="${v}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Q=Qx(v,{relative:c}),[$,ft,lt]=k1(o,C),Ct=q1(v,{replace:p,state:b,target:g,preventScrollReset:A,relative:c,viewTransition:T});function kt(xt){n&&n(xt),xt.defaultPrevented||Ct(xt)}let dt=R.createElement("a",{...C,...lt,href:B||Q,onClick:U||d?n:kt,ref:B1(P,ft),target:g,"data-discover":!k&&s==="render"?"true":void 0});return $&&!k?R.createElement(R.Fragment,null,dt,R.createElement(z1,{page:Q})):dt});ly.displayName="Link";var U1=R.forwardRef(function({"aria-current":n="page",caseSensitive:s=!1,className:o="",end:c=!1,style:d,to:p,viewTransition:b,children:g,...v},A){let T=Gl(p,{relative:v.relative}),C=ps(),P=R.useContext(Fc),{navigator:M,basename:k}=R.useContext(_i),B=P!=null&&X1(T)&&b===!0,U=M.encodeLocation?M.encodeLocation(T).pathname:T.pathname,Q=C.pathname,$=P&&P.navigation&&P.navigation.location?P.navigation.location.pathname:null;s||(Q=Q.toLowerCase(),$=$?$.toLowerCase():null,U=U.toLowerCase()),$&&k&&($=hs($,k)||$);const ft=U!=="/"&&U.endsWith("/")?U.length-1:U.length;let lt=Q===U||!c&&Q.startsWith(U)&&Q.charAt(ft)==="/",Ct=$!=null&&($===U||!c&&$.startsWith(U)&&$.charAt(U.length)==="/"),kt={isActive:lt,isPending:Ct,isTransitioning:B},dt=lt?n:void 0,xt;typeof o=="function"?xt=o(kt):xt=[o,lt?"active":null,Ct?"pending":null,B?"transitioning":null].filter(Boolean).join(" ");let qt=typeof d=="function"?d(kt):d;return R.createElement(ly,{...v,"aria-current":dt,className:xt,ref:A,style:qt,to:p,viewTransition:b},typeof g=="function"?g(kt):g)});U1.displayName="NavLink";var H1=R.forwardRef(({discover:a="render",fetcherKey:n,navigate:s,reloadDocument:o,replace:c,state:d,method:p=Ec,action:b,onSubmit:g,relative:v,preventScrollReset:A,viewTransition:T,...C},P)=>{let M=Y1(),k=F1(b,{relative:v}),B=p.toLowerCase()==="get"?"get":"post",U=typeof b=="string"&&oy.test(b),Q=$=>{if(g&&g($),$.defaultPrevented)return;$.preventDefault();let ft=$.nativeEvent.submitter,lt=(ft==null?void 0:ft.getAttribute("formmethod"))||p;M(ft||$.currentTarget,{fetcherKey:n,method:lt,navigate:s,replace:c,state:d,relative:v,preventScrollReset:A,viewTransition:T})};return R.createElement("form",{ref:P,method:B,action:k,onSubmit:o?g:Q,...C,"data-discover":!U&&a==="render"?"true":void 0})});H1.displayName="Form";function Z1(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function uy(a){let n=R.useContext(ao);return ye(n,Z1(a)),n}function q1(a,{target:n,replace:s,state:o,preventScrollReset:c,relative:d,viewTransition:p}={}){let b=Xc(),g=ps(),v=Gl(a,{relative:d});return R.useCallback(A=>{if(b1(A,n)){A.preventDefault();let T=s!==void 0?s:Ol(g)===Ol(v);b(a,{replace:T,state:o,preventScrollReset:c,relative:d,viewTransition:p})}},[g,b,v,s,o,n,a,c,d,p])}var G1=0,V1=()=>`__${String(++G1)}__`;function Y1(){let{router:a}=uy("useSubmit"),{basename:n}=R.useContext(_i),s=u1();return R.useCallback(async(o,c={})=>{let{action:d,method:p,encType:b,formData:g,body:v}=w1(o,n);if(c.navigate===!1){let A=c.fetcherKey||V1();await a.fetch(A,s,c.action||d,{preventScrollReset:c.preventScrollReset,formData:g,body:v,formMethod:c.method||p,formEncType:c.encType||b,flushSync:c.flushSync})}else await a.navigate(c.action||d,{preventScrollReset:c.preventScrollReset,formData:g,body:v,formMethod:c.method||p,formEncType:c.encType||b,replace:c.replace,state:c.state,fromRouteId:s,flushSync:c.flushSync,viewTransition:c.viewTransition})},[a,n,s])}function F1(a,{relative:n}={}){let{basename:s}=R.useContext(_i),o=R.useContext(ti);ye(o,"useFormAction must be used inside a RouteContext");let[c]=o.matches.slice(-1),d={...Gl(a||".",{relative:n})},p=ps();if(a==null){d.search=p.search;let b=new URLSearchParams(d.search),g=b.getAll("index");if(g.some(A=>A==="")){b.delete("index"),g.filter(T=>T).forEach(T=>b.append("index",T));let A=b.toString();d.search=A?`?${A}`:""}}return(!a||a===".")&&c.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(d.pathname=d.pathname==="/"?s:us([s,d.pathname])),Ol(d)}function X1(a,n={}){let s=R.useContext(Jv);ye(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=uy("useViewTransitionState"),c=Gl(a,{relative:n.relative});if(!s.isTransitioning)return!1;let d=hs(s.currentLocation.pathname,o)||s.currentLocation.pathname,p=hs(s.nextLocation.pathname,o)||s.nextLocation.pathname;return Nc(c.pathname,p)!=null||Nc(c.pathname,d)!=null}[...L1];Xv();const Q1=()=>{};var qg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const st=function(a,n){if(!a)throw oo(n)},oo=function(a){return new Error("Firebase Database ("+cy.SDK_VERSION+") INTERNAL ASSERT FAILED: "+a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy=function(a){const n=[];let s=0;for(let o=0;o<a.length;o++){let c=a.charCodeAt(o);c<128?n[s++]=c:c<2048?(n[s++]=c>>6|192,n[s++]=c&63|128):(c&64512)===55296&&o+1<a.length&&(a.charCodeAt(o+1)&64512)===56320?(c=65536+((c&1023)<<10)+(a.charCodeAt(++o)&1023),n[s++]=c>>18|240,n[s++]=c>>12&63|128,n[s++]=c>>6&63|128,n[s++]=c&63|128):(n[s++]=c>>12|224,n[s++]=c>>6&63|128,n[s++]=c&63|128)}return n},W1=function(a){const n=[];let s=0,o=0;for(;s<a.length;){const c=a[s++];if(c<128)n[o++]=String.fromCharCode(c);else if(c>191&&c<224){const d=a[s++];n[o++]=String.fromCharCode((c&31)<<6|d&63)}else if(c>239&&c<365){const d=a[s++],p=a[s++],b=a[s++],g=((c&7)<<18|(d&63)<<12|(p&63)<<6|b&63)-65536;n[o++]=String.fromCharCode(55296+(g>>10)),n[o++]=String.fromCharCode(56320+(g&1023))}else{const d=a[s++],p=a[s++];n[o++]=String.fromCharCode((c&15)<<12|(d&63)<<6|p&63)}}return n.join("")},Qd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(a,n){if(!Array.isArray(a))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=n?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let c=0;c<a.length;c+=3){const d=a[c],p=c+1<a.length,b=p?a[c+1]:0,g=c+2<a.length,v=g?a[c+2]:0,A=d>>2,T=(d&3)<<4|b>>4;let C=(b&15)<<2|v>>6,P=v&63;g||(P=64,p||(C=64)),o.push(s[A],s[T],s[C],s[P])}return o.join("")},encodeString(a,n){return this.HAS_NATIVE_SUPPORT&&!n?btoa(a):this.encodeByteArray(hy(a),n)},decodeString(a,n){return this.HAS_NATIVE_SUPPORT&&!n?atob(a):W1(this.decodeStringToByteArray(a,n))},decodeStringToByteArray(a,n){this.init_();const s=n?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let c=0;c<a.length;){const d=s[a.charAt(c++)],b=c<a.length?s[a.charAt(c)]:0;++c;const v=c<a.length?s[a.charAt(c)]:64;++c;const T=c<a.length?s[a.charAt(c)]:64;if(++c,d==null||b==null||v==null||T==null)throw new K1;const C=d<<2|b>>4;if(o.push(C),v!==64){const P=b<<4&240|v>>2;if(o.push(P),T!==64){const M=v<<6&192|T;o.push(M)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let a=0;a<this.ENCODED_VALS.length;a++)this.byteToCharMap_[a]=this.ENCODED_VALS.charAt(a),this.charToByteMap_[this.byteToCharMap_[a]]=a,this.byteToCharMapWebSafe_[a]=this.ENCODED_VALS_WEBSAFE.charAt(a),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[a]]=a,a>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(a)]=a,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(a)]=a)}}};class K1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fy=function(a){const n=hy(a);return Qd.encodeByteArray(n,!0)},Mc=function(a){return fy(a).replace(/\./g,"")},Sd=function(a){try{return Qd.decodeString(a,!0)}catch(n){console.error("base64Decode failed: ",n)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(a){return dy(void 0,a)}function dy(a,n){if(!(n instanceof Object))return n;switch(n.constructor){case Date:const s=n;return new Date(s.getTime());case Object:a===void 0&&(a={});break;case Array:a=[];break;default:return n}for(const s in n)!n.hasOwnProperty(s)||!J1(s)||(a[s]=dy(a[s],n[s]));return a}function J1(a){return a!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS=()=>tS().__FIREBASE_DEFAULTS__,nS=()=>{if(typeof process>"u"||typeof qg>"u")return;const a=qg.__FIREBASE_DEFAULTS__;if(a)return JSON.parse(a)},iS=()=>{if(typeof document>"u")return;let a;try{a=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const n=a&&Sd(a[1]);return n&&JSON.parse(n)},my=()=>{try{return Q1()||eS()||nS()||iS()}catch(a){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${a}`);return}},sS=a=>{var n,s;return(s=(n=my())===null||n===void 0?void 0:n.emulatorHosts)===null||s===void 0?void 0:s[a]},aS=a=>{const n=sS(a);if(!n)return;const s=n.lastIndexOf(":");if(s<=0||s+1===n.length)throw new Error(`Invalid host ${n} with no separate hostname and port!`);const o=parseInt(n.substring(s+1),10);return n[0]==="["?[n.substring(1,s-1),o]:[n.substring(0,s),o]},py=()=>{var a;return(a=my())===null||a===void 0?void 0:a.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((n,s)=>{this.resolve=n,this.reject=s})}wrapCallback(n){return(s,o)=>{s?this.reject(s):this.resolve(o),typeof n=="function"&&(this.promise.catch(()=>{}),n.length===1?n(s):n(s,o))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wd(a){return a.endsWith(".cloudworkstations.dev")}async function rS(a){return(await fetch(a,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oS(a,n){if(a.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},o=n||"demo-project",c=a.iat||0,d=a.sub||a.user_id;if(!d)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const p=Object.assign({iss:`https://securetoken.google.com/${o}`,aud:o,iat:c,exp:c+3600,auth_time:c,sub:d,user_id:d,firebase:{sign_in_provider:"custom",identities:{}}},a);return[Mc(JSON.stringify(s)),Mc(JSON.stringify(p)),""].join(".")}const Tl={};function lS(){const a={prod:[],emulator:[]};for(const n of Object.keys(Tl))Tl[n]?a.emulator.push(n):a.prod.push(n);return a}function uS(a){let n=document.getElementById(a),s=!1;return n||(n=document.createElement("div"),n.setAttribute("id",a),s=!0),{created:s,element:n}}let Gg=!1;function cS(a,n){if(typeof window>"u"||typeof document>"u"||!Wd(window.location.host)||Tl[a]===n||Tl[a]||Gg)return;Tl[a]=n;function s(C){return`__firebase__banner__${C}`}const o="__firebase__banner",d=lS().prod.length>0;function p(){const C=document.getElementById(o);C&&C.remove()}function b(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function g(C,P){C.setAttribute("width","24"),C.setAttribute("id",P),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function v(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{Gg=!0,p()},C}function A(C,P){C.setAttribute("id",P),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function T(){const C=uS(o),P=s("text"),M=document.getElementById(P)||document.createElement("span"),k=s("learnmore"),B=document.getElementById(k)||document.createElement("a"),U=s("preprendIcon"),Q=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const $=C.element;b($),A(B,k);const ft=v();g(Q,U),$.append(Q,M,B,ft),document.body.appendChild($)}d?(M.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _y(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hS())}function fS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dS(){return cy.NODE_ADMIN===!0}function mS(){try{return typeof indexedDB=="object"}catch{return!1}}function pS(){return new Promise((a,n)=>{try{let s=!0;const o="validate-browser-context-for-indexeddb-analytics-module",c=self.indexedDB.open(o);c.onsuccess=()=>{c.result.close(),s||self.indexedDB.deleteDatabase(o),a(!0)},c.onupgradeneeded=()=>{s=!1},c.onerror=()=>{var d;n(((d=c.error)===null||d===void 0?void 0:d.message)||"")}}catch(s){n(s)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S="FirebaseError";class Vl extends Error{constructor(n,s,o){super(s),this.code=n,this.customData=o,this.name=_S,Object.setPrototypeOf(this,Vl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gy.prototype.create)}}class gy{constructor(n,s,o){this.service=n,this.serviceName=s,this.errors=o}create(n,...s){const o=s[0]||{},c=`${this.service}/${n}`,d=this.errors[n],p=d?gS(d,o):"Error",b=`${this.serviceName}: ${p} (${c}).`;return new Vl(c,b,o)}}function gS(a,n){return a.replace(vS,(s,o)=>{const c=n[o];return c!=null?String(c):`<${o}?>`})}const vS=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(a){return JSON.parse(a)}function Fe(a){return JSON.stringify(a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy=function(a){let n={},s={},o={},c="";try{const d=a.split(".");n=Dl(Sd(d[0])||""),s=Dl(Sd(d[1])||""),c=d[2],o=s.d||{},delete s.d}catch{}return{header:n,claims:s,data:o,signature:c}},yS=function(a){const n=vy(a),s=n.claims;return!!s&&typeof s=="object"&&s.hasOwnProperty("iat")},bS=function(a){const n=vy(a).claims;return typeof n=="object"&&n.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _s(a,n){return Object.prototype.hasOwnProperty.call(a,n)}function to(a,n){if(Object.prototype.hasOwnProperty.call(a,n))return a[n]}function Vg(a){for(const n in a)if(Object.prototype.hasOwnProperty.call(a,n))return!1;return!0}function Rc(a,n,s){const o={};for(const c in a)Object.prototype.hasOwnProperty.call(a,c)&&(o[c]=n.call(s,a[c],c,a));return o}function Lc(a,n){if(a===n)return!0;const s=Object.keys(a),o=Object.keys(n);for(const c of s){if(!o.includes(c))return!1;const d=a[c],p=n[c];if(Yg(d)&&Yg(p)){if(!Lc(d,p))return!1}else if(d!==p)return!1}for(const c of o)if(!s.includes(c))return!1;return!0}function Yg(a){return a!==null&&typeof a=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(a){const n=[];for(const[s,o]of Object.entries(a))Array.isArray(o)?o.forEach(c=>{n.push(encodeURIComponent(s)+"="+encodeURIComponent(c))}):n.push(encodeURIComponent(s)+"="+encodeURIComponent(o));return n.length?"&"+n.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let n=1;n<this.blockSize;++n)this.pad_[n]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(n,s){s||(s=0);const o=this.W_;if(typeof n=="string")for(let T=0;T<16;T++)o[T]=n.charCodeAt(s)<<24|n.charCodeAt(s+1)<<16|n.charCodeAt(s+2)<<8|n.charCodeAt(s+3),s+=4;else for(let T=0;T<16;T++)o[T]=n[s]<<24|n[s+1]<<16|n[s+2]<<8|n[s+3],s+=4;for(let T=16;T<80;T++){const C=o[T-3]^o[T-8]^o[T-14]^o[T-16];o[T]=(C<<1|C>>>31)&4294967295}let c=this.chain_[0],d=this.chain_[1],p=this.chain_[2],b=this.chain_[3],g=this.chain_[4],v,A;for(let T=0;T<80;T++){T<40?T<20?(v=b^d&(p^b),A=1518500249):(v=d^p^b,A=1859775393):T<60?(v=d&p|b&(d|p),A=2400959708):(v=d^p^b,A=3395469782);const C=(c<<5|c>>>27)+v+g+A+o[T]&4294967295;g=b,b=p,p=(d<<30|d>>>2)&4294967295,d=c,c=C}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+d&4294967295,this.chain_[2]=this.chain_[2]+p&4294967295,this.chain_[3]=this.chain_[3]+b&4294967295,this.chain_[4]=this.chain_[4]+g&4294967295}update(n,s){if(n==null)return;s===void 0&&(s=n.length);const o=s-this.blockSize;let c=0;const d=this.buf_;let p=this.inbuf_;for(;c<s;){if(p===0)for(;c<=o;)this.compress_(n,c),c+=this.blockSize;if(typeof n=="string"){for(;c<s;)if(d[p]=n.charCodeAt(c),++p,++c,p===this.blockSize){this.compress_(d),p=0;break}}else for(;c<s;)if(d[p]=n[c],++p,++c,p===this.blockSize){this.compress_(d),p=0;break}}this.inbuf_=p,this.total_+=s}digest(){const n=[];let s=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let c=this.blockSize-1;c>=56;c--)this.buf_[c]=s&255,s/=256;this.compress_(this.buf_);let o=0;for(let c=0;c<5;c++)for(let d=24;d>=0;d-=8)n[o]=this.chain_[c]>>d&255,++o;return n}}function Kd(a,n){return`${a} failed: ${n} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS=function(a){const n=[];let s=0;for(let o=0;o<a.length;o++){let c=a.charCodeAt(o);if(c>=55296&&c<=56319){const d=c-55296;o++,st(o<a.length,"Surrogate pair missing trail surrogate.");const p=a.charCodeAt(o)-56320;c=65536+(d<<10)+p}c<128?n[s++]=c:c<2048?(n[s++]=c>>6|192,n[s++]=c&63|128):c<65536?(n[s++]=c>>12|224,n[s++]=c>>6&63|128,n[s++]=c&63|128):(n[s++]=c>>18|240,n[s++]=c>>12&63|128,n[s++]=c>>6&63|128,n[s++]=c&63|128)}return n},Kc=function(a){let n=0;for(let s=0;s<a.length;s++){const o=a.charCodeAt(s);o<128?n++:o<2048?n+=2:o>=55296&&o<=56319?(n+=4,s++):n+=3}return n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(a){return a&&a._delegate?a._delegate:a}class kl{constructor(n,s,o){this.name=n,this.instanceFactory=s,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(n){return this.instantiationMode=n,this}setMultipleInstances(n){return this.multipleInstances=n,this}setServiceProps(n){return this.serviceProps=n,this}setInstanceCreatedCallback(n){return this.onInstanceCreated=n,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(n,s){this.name=n,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(n){const s=this.normalizeInstanceIdentifier(n);if(!this.instancesDeferred.has(s)){const o=new Wc;if(this.instancesDeferred.set(s,o),this.isInitialized(s)||this.shouldAutoInitialize())try{const c=this.getOrInitializeService({instanceIdentifier:s});c&&o.resolve(c)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(n){var s;const o=this.normalizeInstanceIdentifier(n==null?void 0:n.identifier),c=(s=n==null?void 0:n.optional)!==null&&s!==void 0?s:!1;if(this.isInitialized(o)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:o})}catch(d){if(c)return null;throw d}else{if(c)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(n){if(n.name!==this.name)throw Error(`Mismatching Component ${n.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=n,!!this.shouldAutoInitialize()){if(TS(n))try{this.getOrInitializeService({instanceIdentifier:Fa})}catch{}for(const[s,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(s);try{const d=this.getOrInitializeService({instanceIdentifier:c});o.resolve(d)}catch{}}}}clearInstance(n=Fa){this.instancesDeferred.delete(n),this.instancesOptions.delete(n),this.instances.delete(n)}async delete(){const n=Array.from(this.instances.values());await Promise.all([...n.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...n.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(n=Fa){return this.instances.has(n)}getOptions(n=Fa){return this.instancesOptions.get(n)||{}}initialize(n={}){const{options:s={}}=n,o=this.normalizeInstanceIdentifier(n.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const c=this.getOrInitializeService({instanceIdentifier:o,options:s});for(const[d,p]of this.instancesDeferred.entries()){const b=this.normalizeInstanceIdentifier(d);o===b&&p.resolve(c)}return c}onInit(n,s){var o;const c=this.normalizeInstanceIdentifier(s),d=(o=this.onInitCallbacks.get(c))!==null&&o!==void 0?o:new Set;d.add(n),this.onInitCallbacks.set(c,d);const p=this.instances.get(c);return p&&n(p,c),()=>{d.delete(n)}}invokeOnInitCallbacks(n,s){const o=this.onInitCallbacks.get(s);if(o)for(const c of o)try{c(n,s)}catch{}}getOrInitializeService({instanceIdentifier:n,options:s={}}){let o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:CS(n),options:s}),this.instances.set(n,o),this.instancesOptions.set(n,s),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch{}return o||null}normalizeInstanceIdentifier(n=Fa){return this.component?this.component.multipleInstances?n:Fa:n}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function CS(a){return a===Fa?void 0:a}function TS(a){return a.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(n){this.name=n,this.providers=new Map}addComponent(n){const s=this.getProvider(n.name);if(s.isComponentSet())throw new Error(`Component ${n.name} has already been registered with ${this.name}`);s.setComponent(n)}addOrOverwriteComponent(n){this.getProvider(n.name).isComponentSet()&&this.providers.delete(n.name),this.addComponent(n)}getProvider(n){if(this.providers.has(n))return this.providers.get(n);const s=new ES(n,this);return this.providers.set(n,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var de;(function(a){a[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT"})(de||(de={}));const NS={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},MS=de.INFO,RS={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},LS=(a,n,...s)=>{if(n<a.logLevel)return;const o=new Date().toISOString(),c=RS[n];if(c)console[c](`[${o}]  ${a.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${n})`)};class yy{constructor(n){this.name=n,this._logLevel=MS,this._logHandler=LS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(n){if(!(n in de))throw new TypeError(`Invalid value "${n}" assigned to \`logLevel\``);this._logLevel=n}setLogLevel(n){this._logLevel=typeof n=="string"?NS[n]:n}get logHandler(){return this._logHandler}set logHandler(n){if(typeof n!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=n}get userLogHandler(){return this._userLogHandler}set userLogHandler(n){this._userLogHandler=n}debug(...n){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...n),this._logHandler(this,de.DEBUG,...n)}log(...n){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...n),this._logHandler(this,de.VERBOSE,...n)}info(...n){this._userLogHandler&&this._userLogHandler(this,de.INFO,...n),this._logHandler(this,de.INFO,...n)}warn(...n){this._userLogHandler&&this._userLogHandler(this,de.WARN,...n),this._logHandler(this,de.WARN,...n)}error(...n){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...n),this._logHandler(this,de.ERROR,...n)}}const OS=(a,n)=>n.some(s=>a instanceof s);let Fg,Xg;function DS(){return Fg||(Fg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kS(){return Xg||(Xg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const by=new WeakMap,wd=new WeakMap,xy=new WeakMap,ud=new WeakMap,$d=new WeakMap;function zS(a){const n=new Promise((s,o)=>{const c=()=>{a.removeEventListener("success",d),a.removeEventListener("error",p)},d=()=>{s(ca(a.result)),c()},p=()=>{o(a.error),c()};a.addEventListener("success",d),a.addEventListener("error",p)});return n.then(s=>{s instanceof IDBCursor&&by.set(s,a)}).catch(()=>{}),$d.set(n,a),n}function PS(a){if(wd.has(a))return;const n=new Promise((s,o)=>{const c=()=>{a.removeEventListener("complete",d),a.removeEventListener("error",p),a.removeEventListener("abort",p)},d=()=>{s(),c()},p=()=>{o(a.error||new DOMException("AbortError","AbortError")),c()};a.addEventListener("complete",d),a.addEventListener("error",p),a.addEventListener("abort",p)});wd.set(a,n)}let Ed={get(a,n,s){if(a instanceof IDBTransaction){if(n==="done")return wd.get(a);if(n==="objectStoreNames")return a.objectStoreNames||xy.get(a);if(n==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return ca(a[n])},set(a,n,s){return a[n]=s,!0},has(a,n){return a instanceof IDBTransaction&&(n==="done"||n==="store")?!0:n in a}};function IS(a){Ed=a(Ed)}function BS(a){return a===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(n,...s){const o=a.call(cd(this),n,...s);return xy.set(o,n.sort?n.sort():[n]),ca(o)}:kS().includes(a)?function(...n){return a.apply(cd(this),n),ca(by.get(this))}:function(...n){return ca(a.apply(cd(this),n))}}function jS(a){return typeof a=="function"?BS(a):(a instanceof IDBTransaction&&PS(a),OS(a,DS())?new Proxy(a,Ed):a)}function ca(a){if(a instanceof IDBRequest)return zS(a);if(ud.has(a))return ud.get(a);const n=jS(a);return n!==a&&(ud.set(a,n),$d.set(n,a)),n}const cd=a=>$d.get(a);function US(a,n,{blocked:s,upgrade:o,blocking:c,terminated:d}={}){const p=indexedDB.open(a,n),b=ca(p);return o&&p.addEventListener("upgradeneeded",g=>{o(ca(p.result),g.oldVersion,g.newVersion,ca(p.transaction),g)}),s&&p.addEventListener("blocked",g=>s(g.oldVersion,g.newVersion,g)),b.then(g=>{d&&g.addEventListener("close",()=>d()),c&&g.addEventListener("versionchange",v=>c(v.oldVersion,v.newVersion,v))}).catch(()=>{}),b}const HS=["get","getKey","getAll","getAllKeys","count"],ZS=["put","add","delete","clear"],hd=new Map;function Qg(a,n){if(!(a instanceof IDBDatabase&&!(n in a)&&typeof n=="string"))return;if(hd.get(n))return hd.get(n);const s=n.replace(/FromIndex$/,""),o=n!==s,c=ZS.includes(s);if(!(s in(o?IDBIndex:IDBObjectStore).prototype)||!(c||HS.includes(s)))return;const d=async function(p,...b){const g=this.transaction(p,c?"readwrite":"readonly");let v=g.store;return o&&(v=v.index(b.shift())),(await Promise.all([v[s](...b),c&&g.done]))[0]};return hd.set(n,d),d}IS(a=>({...a,get:(n,s,o)=>Qg(n,s)||a.get(n,s,o),has:(n,s)=>!!Qg(n,s)||a.has(n,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(n){this.container=n}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(GS(s)){const o=s.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(s=>s).join(" ")}}function GS(a){const n=a.getComponent();return(n==null?void 0:n.type)==="VERSION"}const Cd="@firebase/app",Wg="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs=new yy("@firebase/app"),VS="@firebase/app-compat",YS="@firebase/analytics-compat",FS="@firebase/analytics",XS="@firebase/app-check-compat",QS="@firebase/app-check",WS="@firebase/auth",KS="@firebase/auth-compat",$S="@firebase/database",JS="@firebase/data-connect",tw="@firebase/database-compat",ew="@firebase/functions",nw="@firebase/functions-compat",iw="@firebase/installations",sw="@firebase/installations-compat",aw="@firebase/messaging",rw="@firebase/messaging-compat",ow="@firebase/performance",lw="@firebase/performance-compat",uw="@firebase/remote-config",cw="@firebase/remote-config-compat",hw="@firebase/storage",fw="@firebase/storage-compat",dw="@firebase/firestore",mw="@firebase/ai",pw="@firebase/firestore-compat",_w="firebase",gw="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Td="[DEFAULT]",vw={[Cd]:"fire-core",[VS]:"fire-core-compat",[FS]:"fire-analytics",[YS]:"fire-analytics-compat",[QS]:"fire-app-check",[XS]:"fire-app-check-compat",[WS]:"fire-auth",[KS]:"fire-auth-compat",[$S]:"fire-rtdb",[JS]:"fire-data-connect",[tw]:"fire-rtdb-compat",[ew]:"fire-fn",[nw]:"fire-fn-compat",[iw]:"fire-iid",[sw]:"fire-iid-compat",[aw]:"fire-fcm",[rw]:"fire-fcm-compat",[ow]:"fire-perf",[lw]:"fire-perf-compat",[uw]:"fire-rc",[cw]:"fire-rc-compat",[hw]:"fire-gcs",[fw]:"fire-gcs-compat",[dw]:"fire-fst",[pw]:"fire-fst-compat",[mw]:"fire-vertex","fire-js":"fire-js",[_w]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oc=new Map,yw=new Map,Ad=new Map;function Kg(a,n){try{a.container.addComponent(n)}catch(s){fs.debug(`Component ${n.name} failed to register with FirebaseApp ${a.name}`,s)}}function Dc(a){const n=a.name;if(Ad.has(n))return fs.debug(`There were multiple attempts to register component ${n}.`),!1;Ad.set(n,a);for(const s of Oc.values())Kg(s,a);for(const s of yw.values())Kg(s,a);return!0}function bw(a,n){const s=a.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),a.container.getProvider(n)}function xw(a){return a==null?!1:a.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ha=new gy("app","Firebase",Sw);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(n,s,o){this._isDeleted=!1,this._options=Object.assign({},n),this._config=Object.assign({},s),this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new kl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(n){this.checkDestroyed(),this._automaticDataCollectionEnabled=n}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(n){this._isDeleted=n}checkDestroyed(){if(this.isDeleted)throw ha.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew=gw;function Sy(a,n={}){let s=a;typeof n!="object"&&(n={name:n});const o=Object.assign({name:Td,automaticDataCollectionEnabled:!0},n),c=o.name;if(typeof c!="string"||!c)throw ha.create("bad-app-name",{appName:String(c)});if(s||(s=py()),!s)throw ha.create("no-options");const d=Oc.get(c);if(d){if(Lc(s,d.options)&&Lc(o,d.config))return d;throw ha.create("duplicate-app",{appName:c})}const p=new AS(c);for(const g of Ad.values())p.addComponent(g);const b=new ww(s,o,p);return Oc.set(c,b),b}function Cw(a=Td){const n=Oc.get(a);if(!n&&a===Td&&py())return Sy();if(!n)throw ha.create("no-app",{appName:a});return n}function Wr(a,n,s){var o;let c=(o=vw[a])!==null&&o!==void 0?o:a;s&&(c+=`-${s}`);const d=c.match(/\s|\//),p=n.match(/\s|\//);if(d||p){const b=[`Unable to register library "${c}" with version "${n}":`];d&&b.push(`library name "${c}" contains illegal characters (whitespace or "/")`),d&&p&&b.push("and"),p&&b.push(`version name "${n}" contains illegal characters (whitespace or "/")`),fs.warn(b.join(" "));return}Dc(new kl(`${c}-version`,()=>({library:c,version:n}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw="firebase-heartbeat-database",Aw=1,zl="firebase-heartbeat-store";let fd=null;function wy(){return fd||(fd=US(Tw,Aw,{upgrade:(a,n)=>{switch(n){case 0:try{a.createObjectStore(zl)}catch(s){console.warn(s)}}}}).catch(a=>{throw ha.create("idb-open",{originalErrorMessage:a.message})})),fd}async function Nw(a){try{const s=(await wy()).transaction(zl),o=await s.objectStore(zl).get(Ey(a));return await s.done,o}catch(n){if(n instanceof Vl)fs.warn(n.message);else{const s=ha.create("idb-get",{originalErrorMessage:n==null?void 0:n.message});fs.warn(s.message)}}}async function $g(a,n){try{const o=(await wy()).transaction(zl,"readwrite");await o.objectStore(zl).put(n,Ey(a)),await o.done}catch(s){if(s instanceof Vl)fs.warn(s.message);else{const o=ha.create("idb-set",{originalErrorMessage:s==null?void 0:s.message});fs.warn(o.message)}}}function Ey(a){return`${a.name}!${a.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw=1024,Rw=30;class Lw{constructor(n){this.container=n,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new Dw(s),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var n,s;try{const c=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),d=Jg();if(((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((s=this._heartbeatsCache)===null||s===void 0?void 0:s.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===d||this._heartbeatsCache.heartbeats.some(p=>p.date===d))return;if(this._heartbeatsCache.heartbeats.push({date:d,agent:c}),this._heartbeatsCache.heartbeats.length>Rw){const p=kw(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(p,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(o){fs.warn(o)}}async getHeartbeatsHeader(){var n;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const s=Jg(),{heartbeatsToSend:o,unsentEntries:c}=Ow(this._heartbeatsCache.heartbeats),d=Mc(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=s,c.length>0?(this._heartbeatsCache.heartbeats=c,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),d}catch(s){return fs.warn(s),""}}}function Jg(){return new Date().toISOString().substring(0,10)}function Ow(a,n=Mw){const s=[];let o=a.slice();for(const c of a){const d=s.find(p=>p.agent===c.agent);if(d){if(d.dates.push(c.date),tv(s)>n){d.dates.pop();break}}else if(s.push({agent:c.agent,dates:[c.date]}),tv(s)>n){s.pop();break}o=o.slice(1)}return{heartbeatsToSend:s,unsentEntries:o}}class Dw{constructor(n){this.app=n,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mS()?pS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await Nw(this.app);return s!=null&&s.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(n){var s;if(await this._canUseIndexedDBPromise){const c=await this.read();return $g(this.app,{lastSentHeartbeatDate:(s=n.lastSentHeartbeatDate)!==null&&s!==void 0?s:c.lastSentHeartbeatDate,heartbeats:n.heartbeats})}else return}async add(n){var s;if(await this._canUseIndexedDBPromise){const c=await this.read();return $g(this.app,{lastSentHeartbeatDate:(s=n.lastSentHeartbeatDate)!==null&&s!==void 0?s:c.lastSentHeartbeatDate,heartbeats:[...c.heartbeats,...n.heartbeats]})}else return}}function tv(a){return Mc(JSON.stringify({version:2,heartbeats:a})).length}function kw(a){if(a.length===0)return-1;let n=0,s=a[0].date;for(let o=1;o<a.length;o++)a[o].date<s&&(s=a[o].date,n=o);return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(a){Dc(new kl("platform-logger",n=>new qS(n),"PRIVATE")),Dc(new kl("heartbeat",n=>new Lw(n),"PRIVATE")),Wr(Cd,Wg,a),Wr(Cd,Wg,"esm2017"),Wr("fire-js","")}zw("");var ev={};const nv="@firebase/database",iv="1.0.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cy="";function Pw(a){Cy=a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(n){this.domStorage_=n,this.prefix_="firebase:"}set(n,s){s==null?this.domStorage_.removeItem(this.prefixedName_(n)):this.domStorage_.setItem(this.prefixedName_(n),Fe(s))}get(n){const s=this.domStorage_.getItem(this.prefixedName_(n));return s==null?null:Dl(s)}remove(n){this.domStorage_.removeItem(this.prefixedName_(n))}prefixedName_(n){return this.prefix_+n}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(n,s){s==null?delete this.cache_[n]:this.cache_[n]=s}get(n){return _s(this.cache_,n)?this.cache_[n]:null}remove(n){delete this.cache_[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty=function(a){try{if(typeof window<"u"&&typeof window[a]<"u"){const n=window[a];return n.setItem("firebase:sentinel","cache"),n.removeItem("firebase:sentinel"),new Iw(n)}}catch{}return new Bw},Qa=Ty("localStorage"),jw=Ty("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr=new yy("@firebase/database"),Uw=function(){let a=1;return function(){return a++}}(),Ay=function(a){const n=wS(a),s=new SS;s.update(n);const o=s.digest();return Qd.encodeByteArray(o)},Yl=function(...a){let n="";for(let s=0;s<a.length;s++){const o=a[s];Array.isArray(o)||o&&typeof o=="object"&&typeof o.length=="number"?n+=Yl.apply(null,o):typeof o=="object"?n+=Fe(o):n+=o,n+=" "}return n};let Al=null,sv=!0;const Hw=function(a,n){st(!0,"Can't turn on custom loggers persistently."),Kr.logLevel=de.VERBOSE,Al=Kr.log.bind(Kr)},ln=function(...a){if(sv===!0&&(sv=!1,Al===null&&jw.get("logging_enabled")===!0&&Hw()),Al){const n=Yl.apply(null,a);Al(n)}},Fl=function(a){return function(...n){ln(a,...n)}},Nd=function(...a){const n="FIREBASE INTERNAL ERROR: "+Yl(...a);Kr.error(n)},ds=function(...a){const n=`FIREBASE FATAL ERROR: ${Yl(...a)}`;throw Kr.error(n),new Error(n)},En=function(...a){const n="FIREBASE WARNING: "+Yl(...a);Kr.warn(n)},Zw=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&En("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Ny=function(a){return typeof a=="number"&&(a!==a||a===Number.POSITIVE_INFINITY||a===Number.NEGATIVE_INFINITY)},qw=function(a){if(document.readyState==="complete")a();else{let n=!1;const s=function(){if(!document.body){setTimeout(s,Math.floor(10));return}n||(n=!0,a())};document.addEventListener?(document.addEventListener("DOMContentLoaded",s,!1),window.addEventListener("load",s,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&s()}),window.attachEvent("onload",s))}},eo="[MIN_NAME]",Ka="[MAX_NAME]",uo=function(a,n){if(a===n)return 0;if(a===eo||n===Ka)return-1;if(n===eo||a===Ka)return 1;{const s=av(a),o=av(n);return s!==null?o!==null?s-o===0?a.length-n.length:s-o:-1:o!==null?1:a<n?-1:1}},Gw=function(a,n){return a===n?0:a<n?-1:1},xl=function(a,n){if(n&&a in n)return n[a];throw new Error("Missing required key ("+a+") in object: "+Fe(n))},Jd=function(a){if(typeof a!="object"||a===null)return Fe(a);const n=[];for(const o in a)n.push(o);n.sort();let s="{";for(let o=0;o<n.length;o++)o!==0&&(s+=","),s+=Fe(n[o]),s+=":",s+=Jd(a[n[o]]);return s+="}",s},My=function(a,n){const s=a.length;if(s<=n)return[a];const o=[];for(let c=0;c<s;c+=n)c+n>s?o.push(a.substring(c,s)):o.push(a.substring(c,c+n));return o};function Cn(a,n){for(const s in a)a.hasOwnProperty(s)&&n(s,a[s])}const Ry=function(a){st(!Ny(a),"Invalid JSON number");const n=11,s=52,o=(1<<n-1)-1;let c,d,p,b,g;a===0?(d=0,p=0,c=1/a===-1/0?1:0):(c=a<0,a=Math.abs(a),a>=Math.pow(2,1-o)?(b=Math.min(Math.floor(Math.log(a)/Math.LN2),o),d=b+o,p=Math.round(a*Math.pow(2,s-b)-Math.pow(2,s))):(d=0,p=Math.round(a/Math.pow(2,1-o-s))));const v=[];for(g=s;g;g-=1)v.push(p%2?1:0),p=Math.floor(p/2);for(g=n;g;g-=1)v.push(d%2?1:0),d=Math.floor(d/2);v.push(c?1:0),v.reverse();const A=v.join("");let T="";for(g=0;g<64;g+=8){let C=parseInt(A.substr(g,8),2).toString(16);C.length===1&&(C="0"+C),T=T+C}return T.toLowerCase()},Vw=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Yw=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Fw(a,n){let s="Unknown Error";a==="too_big"?s="The data requested exceeds the maximum size that can be accessed with a single request.":a==="permission_denied"?s="Client doesn't have permission to access the desired data.":a==="unavailable"&&(s="The service is unavailable");const o=new Error(a+" at "+n._path.toString()+": "+s);return o.code=a.toUpperCase(),o}const Xw=new RegExp("^-?(0*)\\d{1,10}$"),Qw=-2147483648,Ww=2147483647,av=function(a){if(Xw.test(a)){const n=Number(a);if(n>=Qw&&n<=Ww)return n}return null},co=function(a){try{a()}catch(n){setTimeout(()=>{const s=n.stack||"";throw En("Exception was thrown by user callback.",s),n},Math.floor(0))}},Kw=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Nl=function(a,n){const s=setTimeout(a,n);return typeof s=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(s):typeof s=="object"&&s.unref&&s.unref(),s};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(n,s){this.appCheckProvider=s,this.appName=n.name,xw(n)&&n.settings.appCheckToken&&(this.serverAppAppCheckToken=n.settings.appCheckToken),this.appCheck=s==null?void 0:s.getImmediate({optional:!0}),this.appCheck||s==null||s.get().then(o=>this.appCheck=o)}getToken(n){if(this.serverAppAppCheckToken){if(n)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(n):new Promise((s,o)=>{setTimeout(()=>{this.appCheck?this.getToken(n).then(s,o):s(null)},0)})}addTokenChangeListener(n){var s;(s=this.appCheckProvider)===null||s===void 0||s.get().then(o=>o.addTokenListener(n))}notifyForInvalidToken(){En(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(n,s,o){this.appName_=n,this.firebaseOptions_=s,this.authProvider_=o,this.auth_=null,this.auth_=o.getImmediate({optional:!0}),this.auth_||o.onInit(c=>this.auth_=c)}getToken(n){return this.auth_?this.auth_.getToken(n).catch(s=>s&&s.code==="auth/token-not-initialized"?(ln("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(s)):new Promise((s,o)=>{setTimeout(()=>{this.auth_?this.getToken(n).then(s,o):s(null)},0)})}addTokenChangeListener(n){this.auth_?this.auth_.addAuthTokenListener(n):this.authProvider_.get().then(s=>s.addAuthTokenListener(n))}removeTokenChangeListener(n){this.authProvider_.get().then(s=>s.removeAuthTokenListener(n))}notifyForInvalidToken(){let n='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?n+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?n+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':n+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',En(n)}}class Tc{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}Tc.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm="5",Ly="v",Oy="s",Dy="r",ky="f",zy=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Py="ls",Iy="p",Md="ac",By="websocket",jy="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(n,s,o,c,d=!1,p="",b=!1,g=!1,v=null){this.secure=s,this.namespace=o,this.webSocketOnly=c,this.nodeAdmin=d,this.persistenceKey=p,this.includeNamespaceInQueryParams=b,this.isUsingEmulator=g,this.emulatorOptions=v,this._host=n.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Qa.get("host:"+n)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(n){n!==this.internalHost&&(this.internalHost=n,this.isCacheableHost()&&Qa.set("host:"+this._host,this.internalHost))}toString(){let n=this.toURLString();return this.persistenceKey&&(n+="<"+this.persistenceKey+">"),n}toURLString(){const n=this.secure?"https://":"http://",s=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${n}${this.host}/${s}`}}function tE(a){return a.host!==a.internalHost||a.isCustomHost()||a.includeNamespaceInQueryParams}function Hy(a,n,s){st(typeof n=="string","typeof type must == string"),st(typeof s=="object","typeof params must == object");let o;if(n===By)o=(a.secure?"wss://":"ws://")+a.internalHost+"/.ws?";else if(n===jy)o=(a.secure?"https://":"http://")+a.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+n);tE(a)&&(s.ns=a.namespace);const c=[];return Cn(s,(d,p)=>{c.push(d+"="+p)}),o+c.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(){this.counters_={}}incrementCounter(n,s=1){_s(this.counters_,n)||(this.counters_[n]=0),this.counters_[n]+=s}get(){return $1(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dd={},md={};function em(a){const n=a.toString();return dd[n]||(dd[n]=new eE),dd[n]}function nE(a,n){const s=a.toString();return md[s]||(md[s]=n()),md[s]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(n){this.onMessage_=n,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(n,s){this.closeAfterResponse=n,this.onClose=s,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(n,s){for(this.pendingResponses[n]=s;this.pendingResponses[this.currentResponseNum];){const o=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let c=0;c<o.length;++c)o[c]&&co(()=>{this.onMessage_(o[c])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv="start",sE="close",aE="pLPCommand",rE="pRTLPCB",Zy="id",qy="pw",Gy="ser",oE="cb",lE="seg",uE="ts",cE="d",hE="dframe",Vy=1870,Yy=30,fE=Vy-Yy,dE=25e3,mE=3e4;class Qr{constructor(n,s,o,c,d,p,b){this.connId=n,this.repoInfo=s,this.applicationId=o,this.appCheckToken=c,this.authToken=d,this.transportSessionId=p,this.lastSessionId=b,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Fl(n),this.stats_=em(s),this.urlFn=g=>(this.appCheckToken&&(g[Md]=this.appCheckToken),Hy(s,jy,g))}open(n,s){this.curSegmentNum=0,this.onDisconnect_=s,this.myPacketOrderer=new iE(n),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(mE)),qw(()=>{if(this.isClosed_)return;this.scriptTagHolder=new nm((...d)=>{const[p,b,g,v,A]=d;if(this.incrementIncomingBytes_(d),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,p===rv)this.id=b,this.password=g;else if(p===sE)b?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(b,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+p)},(...d)=>{const[p,b]=d;this.incrementIncomingBytes_(d),this.myPacketOrderer.handleResponse(p,b)},()=>{this.onClosed_()},this.urlFn);const o={};o[rv]="t",o[Gy]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(o[oE]=this.scriptTagHolder.uniqueCallbackIdentifier),o[Ly]=tm,this.transportSessionId&&(o[Oy]=this.transportSessionId),this.lastSessionId&&(o[Py]=this.lastSessionId),this.applicationId&&(o[Iy]=this.applicationId),this.appCheckToken&&(o[Md]=this.appCheckToken),typeof location<"u"&&location.hostname&&zy.test(location.hostname)&&(o[Dy]=ky);const c=this.urlFn(o);this.log_("Connecting via long-poll to "+c),this.scriptTagHolder.addTag(c,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Qr.forceAllow_=!0}static forceDisallow(){Qr.forceDisallow_=!0}static isAvailable(){return Qr.forceAllow_?!0:!Qr.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Vw()&&!Yw()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(n){const s=Fe(n);this.bytesSent+=s.length,this.stats_.incrementCounter("bytes_sent",s.length);const o=fy(s),c=My(o,fE);for(let d=0;d<c.length;d++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,c.length,c[d]),this.curSegmentNum++}addDisconnectPingFrame(n,s){this.myDisconnFrame=document.createElement("iframe");const o={};o[hE]="t",o[Zy]=n,o[qy]=s,this.myDisconnFrame.src=this.urlFn(o),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(n){const s=Fe(n).length;this.bytesReceived+=s,this.stats_.incrementCounter("bytes_received",s)}}class nm{constructor(n,s,o,c){this.onDisconnect=o,this.urlFn=c,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Uw(),window[aE+this.uniqueCallbackIdentifier]=n,window[rE+this.uniqueCallbackIdentifier]=s,this.myIFrame=nm.createIFrame_();let d="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(d='<script>document.domain="'+document.domain+'";<\/script>');const p="<html><body>"+d+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(p),this.myIFrame.doc.close()}catch(b){ln("frame writing exception"),b.stack&&ln(b.stack),ln(b)}}}static createIFrame_(){const n=document.createElement("iframe");if(n.style.display="none",document.body){document.body.appendChild(n);try{n.contentWindow.document||ln("No IE domain setting required")}catch{const o=document.domain;n.src="javascript:void((function(){document.open();document.domain='"+o+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return n.contentDocument?n.doc=n.contentDocument:n.contentWindow?n.doc=n.contentWindow.document:n.document&&(n.doc=n.document),n}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const n=this.onDisconnect;n&&(this.onDisconnect=null,n())}startLongPoll(n,s){for(this.myID=n,this.myPW=s,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const n={};n[Zy]=this.myID,n[qy]=this.myPW,n[Gy]=this.currentSerial;let s=this.urlFn(n),o="",c=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Yy+o.length<=Vy;){const p=this.pendingSegs.shift();o=o+"&"+lE+c+"="+p.seg+"&"+uE+c+"="+p.ts+"&"+cE+c+"="+p.d,c++}return s=s+o,this.addLongPollTag_(s,this.currentSerial),!0}else return!1}enqueueSegment(n,s,o){this.pendingSegs.push({seg:n,ts:s,d:o}),this.alive&&this.newRequest_()}addLongPollTag_(n,s){this.outstandingRequests.add(s);const o=()=>{this.outstandingRequests.delete(s),this.newRequest_()},c=setTimeout(o,Math.floor(dE)),d=()=>{clearTimeout(c),o()};this.addTag(n,d)}addTag(n,s){setTimeout(()=>{try{if(!this.sendNewPolls)return;const o=this.myIFrame.doc.createElement("script");o.type="text/javascript",o.async=!0,o.src=n,o.onload=o.onreadystatechange=function(){const c=o.readyState;(!c||c==="loaded"||c==="complete")&&(o.onload=o.onreadystatechange=null,o.parentNode&&o.parentNode.removeChild(o),s())},o.onerror=()=>{ln("Long-poll script failed to load: "+n),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(o)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE=16384,_E=45e3;let kc=null;typeof MozWebSocket<"u"?kc=MozWebSocket:typeof WebSocket<"u"&&(kc=WebSocket);class hi{constructor(n,s,o,c,d,p,b){this.connId=n,this.applicationId=o,this.appCheckToken=c,this.authToken=d,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Fl(this.connId),this.stats_=em(s),this.connURL=hi.connectionURL_(s,p,b,c,o),this.nodeAdmin=s.nodeAdmin}static connectionURL_(n,s,o,c,d){const p={};return p[Ly]=tm,typeof location<"u"&&location.hostname&&zy.test(location.hostname)&&(p[Dy]=ky),s&&(p[Oy]=s),o&&(p[Py]=o),c&&(p[Md]=c),d&&(p[Iy]=d),Hy(n,By,p)}open(n,s){this.onDisconnect=s,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Qa.set("previous_websocket_failure",!0);try{let o;dS(),this.mySock=new kc(this.connURL,[],o)}catch(o){this.log_("Error instantiating WebSocket.");const c=o.message||o.data;c&&this.log_(c),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=o=>{this.handleIncomingFrame(o)},this.mySock.onerror=o=>{this.log_("WebSocket error.  Closing connection.");const c=o.message||o.data;c&&this.log_(c),this.onClosed_()}}start(){}static forceDisallow(){hi.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){const s=/Android ([0-9]{0,}\.[0-9]{0,})/,o=navigator.userAgent.match(s);o&&o.length>1&&parseFloat(o[1])<4.4&&(n=!0)}return!n&&kc!==null&&!hi.forceDisallow_}static previouslyFailed(){return Qa.isInMemoryStorage||Qa.get("previous_websocket_failure")===!0}markConnectionHealthy(){Qa.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){const s=this.frames.join("");this.frames=null;const o=Dl(s);this.onMessage(o)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(st(this.frames===null,"We already have a frame buffer"),n.length<=6){const s=Number(n);if(!isNaN(s))return this.handleNewFrameCount_(s),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;const s=n.data;if(this.bytesReceived+=s.length,this.stats_.incrementCounter("bytes_received",s.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(s);else{const o=this.extractFrameCount_(s);o!==null&&this.appendFrame_(o)}}send(n){this.resetKeepAlive();const s=Fe(n);this.bytesSent+=s.length,this.stats_.incrementCounter("bytes_sent",s.length);const o=My(s,pE);o.length>1&&this.sendString_(String(o.length));for(let c=0;c<o.length;c++)this.sendString_(o[c])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(_E))}sendString_(n){try{this.mySock.send(n)}catch(s){this.log_("Exception thrown from WebSocket.send():",s.message||s.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}hi.responsesRequiredToBeHealthy=2;hi.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{static get ALL_TRANSPORTS(){return[Qr,hi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(n){this.initTransports_(n)}initTransports_(n){const s=hi&&hi.isAvailable();let o=s&&!hi.previouslyFailed();if(n.webSocketOnly&&(s||En("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[hi];else{const c=this.transports_=[];for(const d of Pl.ALL_TRANSPORTS)d&&d.isAvailable()&&c.push(d);Pl.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Pl.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE=6e4,vE=5e3,yE=10*1024,bE=100*1024,pd="t",ov="d",xE="s",lv="r",SE="e",uv="o",cv="a",hv="n",fv="p",wE="h";class EE{constructor(n,s,o,c,d,p,b,g,v,A){this.id=n,this.repoInfo_=s,this.applicationId_=o,this.appCheckToken_=c,this.authToken_=d,this.onMessage_=p,this.onReady_=b,this.onDisconnect_=g,this.onKill_=v,this.lastSessionId=A,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Fl("c:"+this.id+":"),this.transportManager_=new Pl(s),this.log_("Connection created"),this.start_()}start_(){const n=this.transportManager_.initialTransport();this.conn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;const s=this.connReceiver_(this.conn_),o=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(s,o)},Math.floor(0));const c=n.healthyTimeout||0;c>0&&(this.healthyTimeout_=Nl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>bE?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>yE?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(c)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(n){return s=>{n===this.conn_?this.onConnectionLost_(s):n===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(n){return s=>{this.state_!==2&&(n===this.rx_?this.onPrimaryMessageReceived_(s):n===this.secondaryConn_?this.onSecondaryMessageReceived_(s):this.log_("message on old connection"))}}sendRequest(n){const s={t:"d",d:n};this.sendData_(s)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(n){if(pd in n){const s=n[pd];s===cv?this.upgradeIfSecondaryHealthy_():s===lv?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):s===uv&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(n){const s=xl("t",n),o=xl("d",n);if(s==="c")this.onSecondaryControl_(o);else if(s==="d")this.pendingDataMessages.push(o);else throw new Error("Unknown protocol layer: "+s)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:fv,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:cv,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:hv,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(n){const s=xl("t",n),o=xl("d",n);s==="c"?this.onControl_(o):s==="d"&&this.onDataMessage_(o)}onDataMessage_(n){this.onPrimaryResponse_(),this.onMessage_(n)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(n){const s=xl(pd,n);if(ov in n){const o=n[ov];if(s===wE){const c=Object.assign({},o);this.repoInfo_.isUsingEmulator&&(c.h=this.repoInfo_.host),this.onHandshake_(c)}else if(s===hv){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let c=0;c<this.pendingDataMessages.length;++c)this.onDataMessage_(this.pendingDataMessages[c]);this.pendingDataMessages=[],this.tryCleanupConnection()}else s===xE?this.onConnectionShutdown_(o):s===lv?this.onReset_(o):s===SE?Nd("Server Error: "+o):s===uv?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Nd("Unknown control packet command: "+s)}}onHandshake_(n){const s=n.ts,o=n.v,c=n.h;this.sessionId=n.s,this.repoInfo_.host=c,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,s),tm!==o&&En("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const n=this.transportManager_.upgradeTransport();n&&this.startUpgrade_(n)}startUpgrade_(n){this.secondaryConn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;const s=this.connReceiver_(this.secondaryConn_),o=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(s,o),Nl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(gE))}onReset_(n){this.log_("Reset packet received.  New host: "+n),this.repoInfo_.host=n,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(n,s){this.log_("Realtime connection established."),this.conn_=n,this.state_=1,this.onReady_&&(this.onReady_(s,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Nl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(vE))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:fv,d:{}}}))}onSecondaryConnectionLost_(){const n=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===n||this.rx_===n)&&this.close()}onConnectionLost_(n){this.conn_=null,!n&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Qa.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(n){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(n),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(n){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(n)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{put(n,s,o,c){}merge(n,s,o,c){}refreshAuthToken(n){}refreshAppCheckToken(n){}onDisconnectPut(n,s,o){}onDisconnectMerge(n,s,o){}onDisconnectCancel(n,s){}reportStats(n){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(n){this.allowedEvents_=n,this.listeners_={},st(Array.isArray(n)&&n.length>0,"Requires a non-empty array")}trigger(n,...s){if(Array.isArray(this.listeners_[n])){const o=[...this.listeners_[n]];for(let c=0;c<o.length;c++)o[c].callback.apply(o[c].context,s)}}on(n,s,o){this.validateEventType_(n),this.listeners_[n]=this.listeners_[n]||[],this.listeners_[n].push({callback:s,context:o});const c=this.getInitialEvent(n);c&&s.apply(o,c)}off(n,s,o){this.validateEventType_(n);const c=this.listeners_[n]||[];for(let d=0;d<c.length;d++)if(c[d].callback===s&&(!o||o===c[d].context)){c.splice(d,1);return}}validateEventType_(n){st(this.allowedEvents_.find(s=>s===n),"Unknown event: "+n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc extends Xy{static getInstance(){return new zc}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!_y()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(n){return st(n==="online","Unknown event type: "+n),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv=32,mv=768;class le{constructor(n,s){if(s===void 0){this.pieces_=n.split("/");let o=0;for(let c=0;c<this.pieces_.length;c++)this.pieces_[c].length>0&&(this.pieces_[o]=this.pieces_[c],o++);this.pieces_.length=o,this.pieceNum_=0}else this.pieces_=n,this.pieceNum_=s}toString(){let n="";for(let s=this.pieceNum_;s<this.pieces_.length;s++)this.pieces_[s]!==""&&(n+="/"+this.pieces_[s]);return n||"/"}}function Wt(){return new le("")}function It(a){return a.pieceNum_>=a.pieces_.length?null:a.pieces_[a.pieceNum_]}function da(a){return a.pieces_.length-a.pieceNum_}function me(a){let n=a.pieceNum_;return n<a.pieces_.length&&n++,new le(a.pieces_,n)}function Qy(a){return a.pieceNum_<a.pieces_.length?a.pieces_[a.pieces_.length-1]:null}function CE(a){let n="";for(let s=a.pieceNum_;s<a.pieces_.length;s++)a.pieces_[s]!==""&&(n+="/"+encodeURIComponent(String(a.pieces_[s])));return n||"/"}function Wy(a,n=0){return a.pieces_.slice(a.pieceNum_+n)}function Ky(a){if(a.pieceNum_>=a.pieces_.length)return null;const n=[];for(let s=a.pieceNum_;s<a.pieces_.length-1;s++)n.push(a.pieces_[s]);return new le(n,0)}function Pe(a,n){const s=[];for(let o=a.pieceNum_;o<a.pieces_.length;o++)s.push(a.pieces_[o]);if(n instanceof le)for(let o=n.pieceNum_;o<n.pieces_.length;o++)s.push(n.pieces_[o]);else{const o=n.split("/");for(let c=0;c<o.length;c++)o[c].length>0&&s.push(o[c])}return new le(s,0)}function Zt(a){return a.pieceNum_>=a.pieces_.length}function Sn(a,n){const s=It(a),o=It(n);if(s===null)return n;if(s===o)return Sn(me(a),me(n));throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+a+")")}function im(a,n){if(da(a)!==da(n))return!1;for(let s=a.pieceNum_,o=n.pieceNum_;s<=a.pieces_.length;s++,o++)if(a.pieces_[s]!==n.pieces_[o])return!1;return!0}function fi(a,n){let s=a.pieceNum_,o=n.pieceNum_;if(da(a)>da(n))return!1;for(;s<a.pieces_.length;){if(a.pieces_[s]!==n.pieces_[o])return!1;++s,++o}return!0}class TE{constructor(n,s){this.errorPrefix_=s,this.parts_=Wy(n,0),this.byteLength_=Math.max(1,this.parts_.length);for(let o=0;o<this.parts_.length;o++)this.byteLength_+=Kc(this.parts_[o]);$y(this)}}function AE(a,n){a.parts_.length>0&&(a.byteLength_+=1),a.parts_.push(n),a.byteLength_+=Kc(n),$y(a)}function NE(a){const n=a.parts_.pop();a.byteLength_-=Kc(n),a.parts_.length>0&&(a.byteLength_-=1)}function $y(a){if(a.byteLength_>mv)throw new Error(a.errorPrefix_+"has a key path longer than "+mv+" bytes ("+a.byteLength_+").");if(a.parts_.length>dv)throw new Error(a.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+dv+") or object contains a cycle "+Xa(a))}function Xa(a){return a.parts_.length===0?"":"in property '"+a.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm extends Xy{static getInstance(){return new sm}constructor(){super(["visible"]);let n,s;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(s="visibilitychange",n="hidden"):typeof document.mozHidden<"u"?(s="mozvisibilitychange",n="mozHidden"):typeof document.msHidden<"u"?(s="msvisibilitychange",n="msHidden"):typeof document.webkitHidden<"u"&&(s="webkitvisibilitychange",n="webkitHidden")),this.visible_=!0,s&&document.addEventListener(s,()=>{const o=!document[n];o!==this.visible_&&(this.visible_=o,this.trigger("visible",o))},!1)}getInitialEvent(n){return st(n==="visible","Unknown event type: "+n),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sl=1e3,ME=60*5*1e3,pv=30*1e3,RE=1.3,LE=3e4,OE="server_kill",_v=3;class cs extends Fy{constructor(n,s,o,c,d,p,b,g){if(super(),this.repoInfo_=n,this.applicationId_=s,this.onDataUpdate_=o,this.onConnectStatus_=c,this.onServerInfoUpdate_=d,this.authTokenProvider_=p,this.appCheckTokenProvider_=b,this.authOverride_=g,this.id=cs.nextPersistentConnectionId_++,this.log_=Fl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Sl,this.maxReconnectDelay_=ME,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,g)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");sm.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&zc.getInstance().on("online",this.onOnline_,this)}sendRequest(n,s,o){const c=++this.requestNumber_,d={r:c,a:n,b:s};this.log_(Fe(d)),st(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(d),o&&(this.requestCBHash_[c]=o)}get(n){this.initConnection_();const s=new Wc,c={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:p=>{const b=p.d;p.s==="ok"?s.resolve(b):s.reject(b)}};this.outstandingGets_.push(c),this.outstandingGetCount_++;const d=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(d),s.promise}listen(n,s,o,c){this.initConnection_();const d=n._queryIdentifier,p=n._path.toString();this.log_("Listen called for "+p+" "+d),this.listens.has(p)||this.listens.set(p,new Map),st(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),st(!this.listens.get(p).has(d),"listen() called twice for same path/queryId.");const b={onComplete:c,hashFn:s,query:n,tag:o};this.listens.get(p).set(d,b),this.connected_&&this.sendListen_(b)}sendGet_(n){const s=this.outstandingGets_[n];this.sendRequest("g",s.request,o=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),s.onComplete&&s.onComplete(o)})}sendListen_(n){const s=n.query,o=s._path.toString(),c=s._queryIdentifier;this.log_("Listen on "+o+" for "+c);const d={p:o},p="q";n.tag&&(d.q=s._queryObject,d.t=n.tag),d.h=n.hashFn(),this.sendRequest(p,d,b=>{const g=b.d,v=b.s;cs.warnOnListenWarnings_(g,s),(this.listens.get(o)&&this.listens.get(o).get(c))===n&&(this.log_("listen response",b),v!=="ok"&&this.removeListen_(o,c),n.onComplete&&n.onComplete(v,g))})}static warnOnListenWarnings_(n,s){if(n&&typeof n=="object"&&_s(n,"w")){const o=to(n,"w");if(Array.isArray(o)&&~o.indexOf("no_index")){const c='".indexOn": "'+s._queryParams.getIndex().toString()+'"',d=s._path.toString();En(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${c} at ${d} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||bS(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=pv)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const n=this.authToken_,s=yS(n)?"auth":"gauth",o={cred:n};this.authOverride_===null?o.noauth=!0:typeof this.authOverride_=="object"&&(o.authvar=this.authOverride_),this.sendRequest(s,o,c=>{const d=c.s,p=c.d||"error";this.authToken_===n&&(d==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(d,p))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{const s=n.s,o=n.d||"error";s==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(s,o)})}unlisten(n,s){const o=n._path.toString(),c=n._queryIdentifier;this.log_("Unlisten called for "+o+" "+c),st(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(o,c)&&this.connected_&&this.sendUnlisten_(o,c,n._queryObject,s)}sendUnlisten_(n,s,o,c){this.log_("Unlisten on "+n+" for "+s);const d={p:n},p="n";c&&(d.q=o,d.t=c),this.sendRequest(p,d)}onDisconnectPut(n,s,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,s,o):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:s,onComplete:o})}onDisconnectMerge(n,s,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,s,o):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:s,onComplete:o})}onDisconnectCancel(n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,s):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:s})}sendOnDisconnect_(n,s,o,c){const d={p:s,d:o};this.log_("onDisconnect "+n,d),this.sendRequest(n,d,p=>{c&&setTimeout(()=>{c(p.s,p.d)},Math.floor(0))})}put(n,s,o,c){this.putInternal("p",n,s,o,c)}merge(n,s,o,c){this.putInternal("m",n,s,o,c)}putInternal(n,s,o,c,d){this.initConnection_();const p={p:s,d:o};d!==void 0&&(p.h=d),this.outstandingPuts_.push({action:n,request:p,onComplete:c}),this.outstandingPutCount_++;const b=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(b):this.log_("Buffering put: "+s)}sendPut_(n){const s=this.outstandingPuts_[n].action,o=this.outstandingPuts_[n].request,c=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(s,o,d=>{this.log_(s+" response",d),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),c&&c(d.s,d.d)})}reportStats(n){if(this.connected_){const s={c:n};this.log_("reportStats",s),this.sendRequest("s",s,o=>{if(o.s!=="ok"){const d=o.d;this.log_("reportStats","Error sending stats: "+d)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+Fe(n));const s=n.r,o=this.requestCBHash_[s];o&&(delete this.requestCBHash_[s],o(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,s){this.log_("handleServerMessage",n,s),n==="d"?this.onDataUpdate_(s.p,s.d,!1,s.t):n==="m"?this.onDataUpdate_(s.p,s.d,!0,s.t):n==="c"?this.onListenRevoked_(s.p,s.q):n==="ac"?this.onAuthRevoked_(s.s,s.d):n==="apc"?this.onAppCheckRevoked_(s.s,s.d):n==="sd"?this.onSecurityDebugPacket_(s):Nd("Unrecognized action received from server: "+Fe(n)+`
Are you using the latest client?`)}onReady_(n,s){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=s,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){st(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Sl,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Sl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>LE&&(this.reconnectDelay_=Sl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const n=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let s=Math.max(0,this.reconnectDelay_-n);s=Math.random()*s,this.log_("Trying to reconnect in "+s+"ms"),this.scheduleConnect_(s),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*RE)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const n=this.onDataMessage_.bind(this),s=this.onReady_.bind(this),o=this.onRealtimeDisconnect_.bind(this),c=this.id+":"+cs.nextConnectionId_++,d=this.lastSessionId;let p=!1,b=null;const g=function(){b?b.close():(p=!0,o())},v=function(T){st(b,"sendRequest call when we're not connected not allowed."),b.sendRequest(T)};this.realtime_={close:g,sendRequest:v};const A=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[T,C]=await Promise.all([this.authTokenProvider_.getToken(A),this.appCheckTokenProvider_.getToken(A)]);p?ln("getToken() completed but was canceled"):(ln("getToken() completed. Creating connection."),this.authToken_=T&&T.accessToken,this.appCheckToken_=C&&C.token,b=new EE(c,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,s,o,P=>{En(P+" ("+this.repoInfo_.toString()+")"),this.interrupt(OE)},d))}catch(T){this.log_("Failed to get token: "+T),p||(this.repoInfo_.nodeAdmin&&En(T),g())}}}interrupt(n){ln("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){ln("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Vg(this.interruptReasons_)&&(this.reconnectDelay_=Sl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){const s=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:s})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){const s=this.outstandingPuts_[n];s&&"h"in s.request&&s.queued&&(s.onComplete&&s.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,s){let o;s?o=s.map(d=>Jd(d)).join("$"):o="default";const c=this.removeListen_(n,o);c&&c.onComplete&&c.onComplete("permission_denied")}removeListen_(n,s){const o=new le(n).toString();let c;if(this.listens.has(o)){const d=this.listens.get(o);c=d.get(s),d.delete(s),d.size===0&&this.listens.delete(o)}else c=void 0;return c}onAuthRevoked_(n,s){ln("Auth token revoked: "+n+"/"+s),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=_v&&(this.reconnectDelay_=pv,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,s){ln("App check token revoked: "+n+"/"+s),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=_v&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const n of this.listens.values())for(const s of n.values())this.sendListen_(s);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){const n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){const n={};let s="js";n["sdk."+s+"."+Cy.replace(/\./g,"-")]=1,_y()?n["framework.cordova"]=1:fS()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){const n=zc.getInstance().currentlyOnline();return Vg(this.interruptReasons_)&&n}}cs.nextPersistentConnectionId_=0;cs.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(n,s){this.name=n,this.node=s}static Wrap(n,s){return new Bt(n,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{getCompare(){return this.compare.bind(this)}indexedValueChanged(n,s){const o=new Bt(eo,n),c=new Bt(eo,s);return this.compare(o,c)!==0}minPost(){return Bt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sc;class Jy extends $c{static get __EMPTY_NODE(){return Sc}static set __EMPTY_NODE(n){Sc=n}compare(n,s){return uo(n.name,s.name)}isDefinedOn(n){throw oo("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(n,s){return!1}minPost(){return Bt.MIN}maxPost(){return new Bt(Ka,Sc)}makePost(n,s){return st(typeof n=="string","KeyIndex indexValue must always be a string."),new Bt(n,Sc)}toString(){return".key"}}const $r=new Jy;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(n,s,o,c,d=null){this.isReverse_=c,this.resultGenerator_=d,this.nodeStack_=[];let p=1;for(;!n.isEmpty();)if(n=n,p=s?o(n.key,s):1,c&&(p*=-1),p<0)this.isReverse_?n=n.left:n=n.right;else if(p===0){this.nodeStack_.push(n);break}else this.nodeStack_.push(n),this.isReverse_?n=n.right:n=n.left}getNext(){if(this.nodeStack_.length===0)return null;let n=this.nodeStack_.pop(),s;if(this.resultGenerator_?s=this.resultGenerator_(n.key,n.value):s={key:n.key,value:n.value},this.isReverse_)for(n=n.left;!n.isEmpty();)this.nodeStack_.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack_.push(n),n=n.left;return s}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const n=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(n.key,n.value):{key:n.key,value:n.value}}}class Ye{constructor(n,s,o,c,d){this.key=n,this.value=s,this.color=o??Ye.RED,this.left=c??wn.EMPTY_NODE,this.right=d??wn.EMPTY_NODE}copy(n,s,o,c,d){return new Ye(n??this.key,s??this.value,o??this.color,c??this.left,d??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,s,o){let c=this;const d=o(n,c.key);return d<0?c=c.copy(null,null,null,c.left.insert(n,s,o),null):d===0?c=c.copy(null,s,null,null,null):c=c.copy(null,null,null,null,c.right.insert(n,s,o)),c.fixUp_()}removeMin_(){if(this.left.isEmpty())return wn.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,s){let o,c;if(o=this,s(n,o.key)<0)!o.left.isEmpty()&&!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.remove(n,s),null);else{if(o.left.isRed_()&&(o=o.rotateRight_()),!o.right.isEmpty()&&!o.right.isRed_()&&!o.right.left.isRed_()&&(o=o.moveRedRight_()),s(n,o.key)===0){if(o.right.isEmpty())return wn.EMPTY_NODE;c=o.right.min_(),o=o.copy(c.key,c.value,null,null,o.right.removeMin_())}o=o.copy(null,null,null,null,o.right.remove(n,s))}return o.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){const n=this.copy(null,null,Ye.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){const n=this.copy(null,null,Ye.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){const n=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,s)}checkMaxDepth_(){const n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}Ye.RED=!0;Ye.BLACK=!1;class DE{copy(n,s,o,c,d){return this}insert(n,s,o){return new Ye(n,s,null)}remove(n,s){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class wn{constructor(n,s=wn.EMPTY_NODE){this.comparator_=n,this.root_=s}insert(n,s){return new wn(this.comparator_,this.root_.insert(n,s,this.comparator_).copy(null,null,Ye.BLACK,null,null))}remove(n){return new wn(this.comparator_,this.root_.remove(n,this.comparator_).copy(null,null,Ye.BLACK,null,null))}get(n){let s,o=this.root_;for(;!o.isEmpty();){if(s=this.comparator_(n,o.key),s===0)return o.value;s<0?o=o.left:s>0&&(o=o.right)}return null}getPredecessorKey(n){let s,o=this.root_,c=null;for(;!o.isEmpty();)if(s=this.comparator_(n,o.key),s===0){if(o.left.isEmpty())return c?c.key:null;for(o=o.left;!o.right.isEmpty();)o=o.right;return o.key}else s<0?o=o.left:s>0&&(c=o,o=o.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(n){return this.root_.inorderTraversal(n)}reverseTraversal(n){return this.root_.reverseTraversal(n)}getIterator(n){return new wc(this.root_,null,this.comparator_,!1,n)}getIteratorFrom(n,s){return new wc(this.root_,n,this.comparator_,!1,s)}getReverseIteratorFrom(n,s){return new wc(this.root_,n,this.comparator_,!0,s)}getReverseIterator(n){return new wc(this.root_,null,this.comparator_,!0,n)}}wn.EMPTY_NODE=new DE;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(a,n){return uo(a.name,n.name)}function am(a,n){return uo(a,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rd;function zE(a){Rd=a}const t0=function(a){return typeof a=="number"?"number:"+Ry(a):"string:"+a},e0=function(a){if(a.isLeafNode()){const n=a.val();st(typeof n=="string"||typeof n=="number"||typeof n=="object"&&_s(n,".sv"),"Priority must be a string or number.")}else st(a===Rd||a.isEmpty(),"priority of unexpected type.");st(a===Rd||a.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gv;class Ve{static set __childrenNodeConstructor(n){gv=n}static get __childrenNodeConstructor(){return gv}constructor(n,s=Ve.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=s,this.lazyHash_=null,st(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),e0(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new Ve(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:Ve.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return Zt(n)?this:It(n)===".priority"?this.priorityNode_:Ve.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,s){return null}updateImmediateChild(n,s){return n===".priority"?this.updatePriority(s):s.isEmpty()&&n!==".priority"?this:Ve.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,s).updatePriority(this.priorityNode_)}updateChild(n,s){const o=It(n);return o===null?s:s.isEmpty()&&o!==".priority"?this:(st(o!==".priority"||da(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(o,Ve.__childrenNodeConstructor.EMPTY_NODE.updateChild(me(n),s)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,s){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+t0(this.priorityNode_.val())+":");const s=typeof this.value_;n+=s+":",s==="number"?n+=Ry(this.value_):n+=this.value_,this.lazyHash_=Ay(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===Ve.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof Ve.__childrenNodeConstructor?-1:(st(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){const s=typeof n.value_,o=typeof this.value_,c=Ve.VALUE_TYPE_ORDER.indexOf(s),d=Ve.VALUE_TYPE_ORDER.indexOf(o);return st(c>=0,"Unknown leaf type: "+s),st(d>=0,"Unknown leaf type: "+o),c===d?o==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:d-c}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){const s=n;return this.value_===s.value_&&this.priorityNode_.equals(s.priorityNode_)}else return!1}}Ve.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let n0,i0;function PE(a){n0=a}function IE(a){i0=a}class BE extends $c{compare(n,s){const o=n.node.getPriority(),c=s.node.getPriority(),d=o.compareTo(c);return d===0?uo(n.name,s.name):d}isDefinedOn(n){return!n.getPriority().isEmpty()}indexedValueChanged(n,s){return!n.getPriority().equals(s.getPriority())}minPost(){return Bt.MIN}maxPost(){return new Bt(Ka,new Ve("[PRIORITY-POST]",i0))}makePost(n,s){const o=n0(n);return new Bt(s,new Ve("[PRIORITY-POST]",o))}toString(){return".priority"}}const Ae=new BE;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE=Math.log(2);class UE{constructor(n){const s=d=>parseInt(Math.log(d)/jE,10),o=d=>parseInt(Array(d+1).join("1"),2);this.count=s(n+1),this.current_=this.count-1;const c=o(this.count);this.bits_=n+1&c}nextBitIsOne(){const n=!(this.bits_&1<<this.current_);return this.current_--,n}}const Pc=function(a,n,s,o){a.sort(n);const c=function(g,v){const A=v-g;let T,C;if(A===0)return null;if(A===1)return T=a[g],C=s?s(T):T,new Ye(C,T.node,Ye.BLACK,null,null);{const P=parseInt(A/2,10)+g,M=c(g,P),k=c(P+1,v);return T=a[P],C=s?s(T):T,new Ye(C,T.node,Ye.BLACK,M,k)}},d=function(g){let v=null,A=null,T=a.length;const C=function(M,k){const B=T-M,U=T;T-=M;const Q=c(B+1,U),$=a[B],ft=s?s($):$;P(new Ye(ft,$.node,k,null,Q))},P=function(M){v?(v.left=M,v=M):(A=M,v=M)};for(let M=0;M<g.count;++M){const k=g.nextBitIsOne(),B=Math.pow(2,g.count-(M+1));k?C(B,Ye.BLACK):(C(B,Ye.BLACK),C(B,Ye.RED))}return A},p=new UE(a.length),b=d(p);return new wn(o||n,b)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _d;const Xr={};class ls{static get Default(){return st(Xr&&Ae,"ChildrenNode.ts has not been loaded"),_d=_d||new ls({".priority":Xr},{".priority":Ae}),_d}constructor(n,s){this.indexes_=n,this.indexSet_=s}get(n){const s=to(this.indexes_,n);if(!s)throw new Error("No index defined for "+n);return s instanceof wn?s:null}hasIndex(n){return _s(this.indexSet_,n.toString())}addIndex(n,s){st(n!==$r,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const o=[];let c=!1;const d=s.getIterator(Bt.Wrap);let p=d.getNext();for(;p;)c=c||n.isDefinedOn(p.node),o.push(p),p=d.getNext();let b;c?b=Pc(o,n.getCompare()):b=Xr;const g=n.toString(),v=Object.assign({},this.indexSet_);v[g]=n;const A=Object.assign({},this.indexes_);return A[g]=b,new ls(A,v)}addToIndexes(n,s){const o=Rc(this.indexes_,(c,d)=>{const p=to(this.indexSet_,d);if(st(p,"Missing index implementation for "+d),c===Xr)if(p.isDefinedOn(n.node)){const b=[],g=s.getIterator(Bt.Wrap);let v=g.getNext();for(;v;)v.name!==n.name&&b.push(v),v=g.getNext();return b.push(n),Pc(b,p.getCompare())}else return Xr;else{const b=s.get(n.name);let g=c;return b&&(g=g.remove(new Bt(n.name,b))),g.insert(n,n.node)}});return new ls(o,this.indexSet_)}removeFromIndexes(n,s){const o=Rc(this.indexes_,c=>{if(c===Xr)return c;{const d=s.get(n.name);return d?c.remove(new Bt(n.name,d)):c}});return new ls(o,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wl;class At{static get EMPTY_NODE(){return wl||(wl=new At(new wn(am),null,ls.Default))}constructor(n,s,o){this.children_=n,this.priorityNode_=s,this.indexMap_=o,this.lazyHash_=null,this.priorityNode_&&e0(this.priorityNode_),this.children_.isEmpty()&&st(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||wl}updatePriority(n){return this.children_.isEmpty()?this:new At(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{const s=this.children_.get(n);return s===null?wl:s}}getChild(n){const s=It(n);return s===null?this:this.getImmediateChild(s).getChild(me(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,s){if(st(s,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(s);{const o=new Bt(n,s);let c,d;s.isEmpty()?(c=this.children_.remove(n),d=this.indexMap_.removeFromIndexes(o,this.children_)):(c=this.children_.insert(n,s),d=this.indexMap_.addToIndexes(o,this.children_));const p=c.isEmpty()?wl:this.priorityNode_;return new At(c,p,d)}}updateChild(n,s){const o=It(n);if(o===null)return s;{st(It(n)!==".priority"||da(n)===1,".priority must be the last token in a path");const c=this.getImmediateChild(o).updateChild(me(n),s);return this.updateImmediateChild(o,c)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;const s={};let o=0,c=0,d=!0;if(this.forEachChild(Ae,(p,b)=>{s[p]=b.val(n),o++,d&&At.INTEGER_REGEXP_.test(p)?c=Math.max(c,Number(p)):d=!1}),!n&&d&&c<2*o){const p=[];for(const b in s)p[b]=s[b];return p}else return n&&!this.getPriority().isEmpty()&&(s[".priority"]=this.getPriority().val()),s}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+t0(this.getPriority().val())+":"),this.forEachChild(Ae,(s,o)=>{const c=o.hash();c!==""&&(n+=":"+s+":"+c)}),this.lazyHash_=n===""?"":Ay(n)}return this.lazyHash_}getPredecessorChildName(n,s,o){const c=this.resolveIndex_(o);if(c){const d=c.getPredecessorKey(new Bt(n,s));return d?d.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){const s=this.resolveIndex_(n);if(s){const o=s.minKey();return o&&o.name}else return this.children_.minKey()}getFirstChild(n){const s=this.getFirstChildName(n);return s?new Bt(s,this.children_.get(s)):null}getLastChildName(n){const s=this.resolveIndex_(n);if(s){const o=s.maxKey();return o&&o.name}else return this.children_.maxKey()}getLastChild(n){const s=this.getLastChildName(n);return s?new Bt(s,this.children_.get(s)):null}forEachChild(n,s){const o=this.resolveIndex_(n);return o?o.inorderTraversal(c=>s(c.name,c.node)):this.children_.inorderTraversal(s)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,s){const o=this.resolveIndex_(s);if(o)return o.getIteratorFrom(n,c=>c);{const c=this.children_.getIteratorFrom(n.name,Bt.Wrap);let d=c.peek();for(;d!=null&&s.compare(d,n)<0;)c.getNext(),d=c.peek();return c}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,s){const o=this.resolveIndex_(s);if(o)return o.getReverseIteratorFrom(n,c=>c);{const c=this.children_.getReverseIteratorFrom(n.name,Bt.Wrap);let d=c.peek();for(;d!=null&&s.compare(d,n)>0;)c.getNext(),d=c.peek();return c}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===Xl?-1:0}withIndex(n){if(n===$r||this.indexMap_.hasIndex(n))return this;{const s=this.indexMap_.addIndex(n,this.children_);return new At(this.children_,this.priorityNode_,s)}}isIndexed(n){return n===$r||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{const s=n;if(this.getPriority().equals(s.getPriority()))if(this.children_.count()===s.children_.count()){const o=this.getIterator(Ae),c=s.getIterator(Ae);let d=o.getNext(),p=c.getNext();for(;d&&p;){if(d.name!==p.name||!d.node.equals(p.node))return!1;d=o.getNext(),p=c.getNext()}return d===null&&p===null}else return!1;else return!1}}resolveIndex_(n){return n===$r?null:this.indexMap_.get(n.toString())}}At.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class HE extends At{constructor(){super(new wn(am),At.EMPTY_NODE,ls.Default)}compareTo(n){return n===this?0:1}equals(n){return n===this}getPriority(){return this}getImmediateChild(n){return At.EMPTY_NODE}isEmpty(){return!1}}const Xl=new HE;Object.defineProperties(Bt,{MIN:{value:new Bt(eo,At.EMPTY_NODE)},MAX:{value:new Bt(Ka,Xl)}});Jy.__EMPTY_NODE=At.EMPTY_NODE;Ve.__childrenNodeConstructor=At;zE(Xl);IE(Xl);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE=!0;function tn(a,n=null){if(a===null)return At.EMPTY_NODE;if(typeof a=="object"&&".priority"in a&&(n=a[".priority"]),st(n===null||typeof n=="string"||typeof n=="number"||typeof n=="object"&&".sv"in n,"Invalid priority type found: "+typeof n),typeof a=="object"&&".value"in a&&a[".value"]!==null&&(a=a[".value"]),typeof a!="object"||".sv"in a){const s=a;return new Ve(s,tn(n))}if(!(a instanceof Array)&&ZE){const s=[];let o=!1;if(Cn(a,(p,b)=>{if(p.substring(0,1)!=="."){const g=tn(b);g.isEmpty()||(o=o||!g.getPriority().isEmpty(),s.push(new Bt(p,g)))}}),s.length===0)return At.EMPTY_NODE;const d=Pc(s,kE,p=>p.name,am);if(o){const p=Pc(s,Ae.getCompare());return new At(d,tn(n),new ls({".priority":p},{".priority":Ae}))}else return new At(d,tn(n),ls.Default)}else{let s=At.EMPTY_NODE;return Cn(a,(o,c)=>{if(_s(a,o)&&o.substring(0,1)!=="."){const d=tn(c);(d.isLeafNode()||!d.isEmpty())&&(s=s.updateImmediateChild(o,d))}}),s.updatePriority(tn(n))}}PE(tn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE extends $c{constructor(n){super(),this.indexPath_=n,st(!Zt(n)&&It(n)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(n){return n.getChild(this.indexPath_)}isDefinedOn(n){return!n.getChild(this.indexPath_).isEmpty()}compare(n,s){const o=this.extractChild(n.node),c=this.extractChild(s.node),d=o.compareTo(c);return d===0?uo(n.name,s.name):d}makePost(n,s){const o=tn(n),c=At.EMPTY_NODE.updateChild(this.indexPath_,o);return new Bt(s,c)}maxPost(){const n=At.EMPTY_NODE.updateChild(this.indexPath_,Xl);return new Bt(Ka,n)}toString(){return Wy(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE extends $c{compare(n,s){const o=n.node.compareTo(s.node);return o===0?uo(n.name,s.name):o}isDefinedOn(n){return!0}indexedValueChanged(n,s){return!n.equals(s)}minPost(){return Bt.MIN}maxPost(){return Bt.MAX}makePost(n,s){const o=tn(n);return new Bt(s,o)}toString(){return".value"}}const VE=new GE;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s0(a){return{type:"value",snapshotNode:a}}function no(a,n){return{type:"child_added",snapshotNode:n,childName:a}}function Il(a,n){return{type:"child_removed",snapshotNode:n,childName:a}}function Bl(a,n,s){return{type:"child_changed",snapshotNode:n,childName:a,oldSnap:s}}function YE(a,n){return{type:"child_moved",snapshotNode:n,childName:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(n){this.index_=n}updateChild(n,s,o,c,d,p){st(n.isIndexed(this.index_),"A node must be indexed if only a child is updated");const b=n.getImmediateChild(s);return b.getChild(c).equals(o.getChild(c))&&b.isEmpty()===o.isEmpty()||(p!=null&&(o.isEmpty()?n.hasChild(s)?p.trackChildChange(Il(s,b)):st(n.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):b.isEmpty()?p.trackChildChange(no(s,o)):p.trackChildChange(Bl(s,o,b))),n.isLeafNode()&&o.isEmpty())?n:n.updateImmediateChild(s,o).withIndex(this.index_)}updateFullNode(n,s,o){return o!=null&&(n.isLeafNode()||n.forEachChild(Ae,(c,d)=>{s.hasChild(c)||o.trackChildChange(Il(c,d))}),s.isLeafNode()||s.forEachChild(Ae,(c,d)=>{if(n.hasChild(c)){const p=n.getImmediateChild(c);p.equals(d)||o.trackChildChange(Bl(c,d,p))}else o.trackChildChange(no(c,d))})),s.withIndex(this.index_)}updatePriority(n,s){return n.isEmpty()?At.EMPTY_NODE:n.updatePriority(s)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(n){this.indexedFilter_=new rm(n.getIndex()),this.index_=n.getIndex(),this.startPost_=jl.getStartPost_(n),this.endPost_=jl.getEndPost_(n),this.startIsInclusive_=!n.startAfterSet_,this.endIsInclusive_=!n.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(n){const s=this.startIsInclusive_?this.index_.compare(this.getStartPost(),n)<=0:this.index_.compare(this.getStartPost(),n)<0,o=this.endIsInclusive_?this.index_.compare(n,this.getEndPost())<=0:this.index_.compare(n,this.getEndPost())<0;return s&&o}updateChild(n,s,o,c,d,p){return this.matches(new Bt(s,o))||(o=At.EMPTY_NODE),this.indexedFilter_.updateChild(n,s,o,c,d,p)}updateFullNode(n,s,o){s.isLeafNode()&&(s=At.EMPTY_NODE);let c=s.withIndex(this.index_);c=c.updatePriority(At.EMPTY_NODE);const d=this;return s.forEachChild(Ae,(p,b)=>{d.matches(new Bt(p,b))||(c=c.updateImmediateChild(p,At.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(n,c,o)}updatePriority(n,s){return n}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(n){if(n.hasStart()){const s=n.getIndexStartName();return n.getIndex().makePost(n.getIndexStartValue(),s)}else return n.getIndex().minPost()}static getEndPost_(n){if(n.hasEnd()){const s=n.getIndexEndName();return n.getIndex().makePost(n.getIndexEndValue(),s)}else return n.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(n){this.withinDirectionalStart=s=>this.reverse_?this.withinEndPost(s):this.withinStartPost(s),this.withinDirectionalEnd=s=>this.reverse_?this.withinStartPost(s):this.withinEndPost(s),this.withinStartPost=s=>{const o=this.index_.compare(this.rangedFilter_.getStartPost(),s);return this.startIsInclusive_?o<=0:o<0},this.withinEndPost=s=>{const o=this.index_.compare(s,this.rangedFilter_.getEndPost());return this.endIsInclusive_?o<=0:o<0},this.rangedFilter_=new jl(n),this.index_=n.getIndex(),this.limit_=n.getLimit(),this.reverse_=!n.isViewFromLeft(),this.startIsInclusive_=!n.startAfterSet_,this.endIsInclusive_=!n.endBeforeSet_}updateChild(n,s,o,c,d,p){return this.rangedFilter_.matches(new Bt(s,o))||(o=At.EMPTY_NODE),n.getImmediateChild(s).equals(o)?n:n.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(n,s,o,c,d,p):this.fullLimitUpdateChild_(n,s,o,d,p)}updateFullNode(n,s,o){let c;if(s.isLeafNode()||s.isEmpty())c=At.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<s.numChildren()&&s.isIndexed(this.index_)){c=At.EMPTY_NODE.withIndex(this.index_);let d;this.reverse_?d=s.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):d=s.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let p=0;for(;d.hasNext()&&p<this.limit_;){const b=d.getNext();if(this.withinDirectionalStart(b))if(this.withinDirectionalEnd(b))c=c.updateImmediateChild(b.name,b.node),p++;else break;else continue}}else{c=s.withIndex(this.index_),c=c.updatePriority(At.EMPTY_NODE);let d;this.reverse_?d=c.getReverseIterator(this.index_):d=c.getIterator(this.index_);let p=0;for(;d.hasNext();){const b=d.getNext();p<this.limit_&&this.withinDirectionalStart(b)&&this.withinDirectionalEnd(b)?p++:c=c.updateImmediateChild(b.name,At.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(n,c,o)}updatePriority(n,s){return n}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(n,s,o,c,d){let p;if(this.reverse_){const T=this.index_.getCompare();p=(C,P)=>T(P,C)}else p=this.index_.getCompare();const b=n;st(b.numChildren()===this.limit_,"");const g=new Bt(s,o),v=this.reverse_?b.getFirstChild(this.index_):b.getLastChild(this.index_),A=this.rangedFilter_.matches(g);if(b.hasChild(s)){const T=b.getImmediateChild(s);let C=c.getChildAfterChild(this.index_,v,this.reverse_);for(;C!=null&&(C.name===s||b.hasChild(C.name));)C=c.getChildAfterChild(this.index_,C,this.reverse_);const P=C==null?1:p(C,g);if(A&&!o.isEmpty()&&P>=0)return d!=null&&d.trackChildChange(Bl(s,o,T)),b.updateImmediateChild(s,o);{d!=null&&d.trackChildChange(Il(s,T));const k=b.updateImmediateChild(s,At.EMPTY_NODE);return C!=null&&this.rangedFilter_.matches(C)?(d!=null&&d.trackChildChange(no(C.name,C.node)),k.updateImmediateChild(C.name,C.node)):k}}else return o.isEmpty()?n:A&&p(v,g)>=0?(d!=null&&(d.trackChildChange(Il(v.name,v.node)),d.trackChildChange(no(s,o))),b.updateImmediateChild(s,o).updateImmediateChild(v.name,At.EMPTY_NODE)):n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ae}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return st(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return st(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:eo}hasEnd(){return this.endSet_}getIndexEndValue(){return st(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return st(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ka}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return st(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ae}copy(){const n=new om;return n.limitSet_=this.limitSet_,n.limit_=this.limit_,n.startSet_=this.startSet_,n.startAfterSet_=this.startAfterSet_,n.indexStartValue_=this.indexStartValue_,n.startNameSet_=this.startNameSet_,n.indexStartName_=this.indexStartName_,n.endSet_=this.endSet_,n.endBeforeSet_=this.endBeforeSet_,n.indexEndValue_=this.indexEndValue_,n.endNameSet_=this.endNameSet_,n.indexEndName_=this.indexEndName_,n.index_=this.index_,n.viewFrom_=this.viewFrom_,n}}function XE(a){return a.loadsAllData()?new rm(a.getIndex()):a.hasLimit()?new FE(a):new jl(a)}function vv(a){const n={};if(a.isDefault())return n;let s;if(a.index_===Ae?s="$priority":a.index_===VE?s="$value":a.index_===$r?s="$key":(st(a.index_ instanceof qE,"Unrecognized index type!"),s=a.index_.toString()),n.orderBy=Fe(s),a.startSet_){const o=a.startAfterSet_?"startAfter":"startAt";n[o]=Fe(a.indexStartValue_),a.startNameSet_&&(n[o]+=","+Fe(a.indexStartName_))}if(a.endSet_){const o=a.endBeforeSet_?"endBefore":"endAt";n[o]=Fe(a.indexEndValue_),a.endNameSet_&&(n[o]+=","+Fe(a.indexEndName_))}return a.limitSet_&&(a.isViewFromLeft()?n.limitToFirst=a.limit_:n.limitToLast=a.limit_),n}function yv(a){const n={};if(a.startSet_&&(n.sp=a.indexStartValue_,a.startNameSet_&&(n.sn=a.indexStartName_),n.sin=!a.startAfterSet_),a.endSet_&&(n.ep=a.indexEndValue_,a.endNameSet_&&(n.en=a.indexEndName_),n.ein=!a.endBeforeSet_),a.limitSet_){n.l=a.limit_;let s=a.viewFrom_;s===""&&(a.isViewFromLeft()?s="l":s="r"),n.vf=s}return a.index_!==Ae&&(n.i=a.index_.toString()),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic extends Fy{reportStats(n){throw new Error("Method not implemented.")}static getListenId_(n,s){return s!==void 0?"tag$"+s:(st(n._queryParams.isDefault(),"should have a tag if it's not a default query."),n._path.toString())}constructor(n,s,o,c){super(),this.repoInfo_=n,this.onDataUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=c,this.log_=Fl("p:rest:"),this.listens_={}}listen(n,s,o,c){const d=n._path.toString();this.log_("Listen called for "+d+" "+n._queryIdentifier);const p=Ic.getListenId_(n,o),b={};this.listens_[p]=b;const g=vv(n._queryParams);this.restRequest_(d+".json",g,(v,A)=>{let T=A;if(v===404&&(T=null,v=null),v===null&&this.onDataUpdate_(d,T,!1,o),to(this.listens_,p)===b){let C;v?v===401?C="permission_denied":C="rest_error:"+v:C="ok",c(C,null)}})}unlisten(n,s){const o=Ic.getListenId_(n,s);delete this.listens_[o]}get(n){const s=vv(n._queryParams),o=n._path.toString(),c=new Wc;return this.restRequest_(o+".json",s,(d,p)=>{let b=p;d===404&&(b=null,d=null),d===null?(this.onDataUpdate_(o,b,!1,null),c.resolve(b)):c.reject(new Error(b))}),c.promise}refreshAuthToken(n){}restRequest_(n,s={},o){return s.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([c,d])=>{c&&c.accessToken&&(s.auth=c.accessToken),d&&d.token&&(s.ac=d.token);const p=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+n+"?ns="+this.repoInfo_.namespace+xS(s);this.log_("Sending REST request for "+p);const b=new XMLHttpRequest;b.onreadystatechange=()=>{if(o&&b.readyState===4){this.log_("REST Response for "+p+" received. status:",b.status,"response:",b.responseText);let g=null;if(b.status>=200&&b.status<300){try{g=Dl(b.responseText)}catch{En("Failed to parse JSON response for "+p+": "+b.responseText)}o(null,g)}else b.status!==401&&b.status!==404&&En("Got unsuccessful REST response for "+p+" Status: "+b.status),o(b.status);o=null}},b.open("GET",p,!0),b.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(){this.rootNode_=At.EMPTY_NODE}getNode(n){return this.rootNode_.getChild(n)}updateSnapshot(n,s){this.rootNode_=this.rootNode_.updateChild(n,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bc(){return{value:null,children:new Map}}function a0(a,n,s){if(Zt(n))a.value=s,a.children.clear();else if(a.value!==null)a.value=a.value.updateChild(n,s);else{const o=It(n);a.children.has(o)||a.children.set(o,Bc());const c=a.children.get(o);n=me(n),a0(c,n,s)}}function Ld(a,n,s){a.value!==null?s(n,a.value):WE(a,(o,c)=>{const d=new le(n.toString()+"/"+o);Ld(c,d,s)})}function WE(a,n){a.children.forEach((s,o)=>{n(o,s)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(n){this.collection_=n,this.last_=null}get(){const n=this.collection_.get(),s=Object.assign({},n);return this.last_&&Cn(this.last_,(o,c)=>{s[o]=s[o]-c}),this.last_=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv=10*1e3,$E=30*1e3,JE=5*60*1e3;class tC{constructor(n,s){this.server_=s,this.statsToReport_={},this.statsListener_=new KE(n);const o=bv+($E-bv)*Math.random();Nl(this.reportStats_.bind(this),Math.floor(o))}reportStats_(){const n=this.statsListener_.get(),s={};let o=!1;Cn(n,(c,d)=>{d>0&&_s(this.statsToReport_,c)&&(s[c]=d,o=!0)}),o&&this.server_.reportStats(s),Nl(this.reportStats_.bind(this),Math.floor(Math.random()*2*JE))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var di;(function(a){a[a.OVERWRITE=0]="OVERWRITE",a[a.MERGE=1]="MERGE",a[a.ACK_USER_WRITE=2]="ACK_USER_WRITE",a[a.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(di||(di={}));function r0(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function lm(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function um(a){return{fromUser:!1,fromServer:!0,queryId:a,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(n,s,o){this.path=n,this.affectedTree=s,this.revert=o,this.type=di.ACK_USER_WRITE,this.source=r0()}operationForChild(n){if(Zt(this.path)){if(this.affectedTree.value!=null)return st(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const s=this.affectedTree.subtree(new le(n));return new jc(Wt(),s,this.revert)}}else return st(It(this.path)===n,"operationForChild called for unrelated child."),new jc(me(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(n,s){this.source=n,this.path=s,this.type=di.LISTEN_COMPLETE}operationForChild(n){return Zt(this.path)?new Ul(this.source,Wt()):new Ul(this.source,me(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(n,s,o){this.source=n,this.path=s,this.snap=o,this.type=di.OVERWRITE}operationForChild(n){return Zt(this.path)?new $a(this.source,Wt(),this.snap.getImmediateChild(n)):new $a(this.source,me(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(n,s,o){this.source=n,this.path=s,this.children=o,this.type=di.MERGE}operationForChild(n){if(Zt(this.path)){const s=this.children.subtree(new le(n));return s.isEmpty()?null:s.value?new $a(this.source,Wt(),s.value):new Hl(this.source,Wt(),s)}else return st(It(this.path)===n,"Can't get a merge for a child not on the path of the operation"),new Hl(this.source,me(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(n,s,o){this.node_=n,this.fullyInitialized_=s,this.filtered_=o}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(n){if(Zt(n))return this.isFullyInitialized()&&!this.filtered_;const s=It(n);return this.isCompleteForChild(s)}isCompleteForChild(n){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(n)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(n){this.query_=n,this.index_=this.query_._queryParams.getIndex()}}function nC(a,n,s,o){const c=[],d=[];return n.forEach(p=>{p.type==="child_changed"&&a.index_.indexedValueChanged(p.oldSnap,p.snapshotNode)&&d.push(YE(p.childName,p.snapshotNode))}),El(a,c,"child_removed",n,o,s),El(a,c,"child_added",n,o,s),El(a,c,"child_moved",d,o,s),El(a,c,"child_changed",n,o,s),El(a,c,"value",n,o,s),c}function El(a,n,s,o,c,d){const p=o.filter(b=>b.type===s);p.sort((b,g)=>sC(a,b,g)),p.forEach(b=>{const g=iC(a,b,d);c.forEach(v=>{v.respondsTo(b.type)&&n.push(v.createEvent(g,a.query_))})})}function iC(a,n,s){return n.type==="value"||n.type==="child_removed"||(n.prevName=s.getPredecessorChildName(n.childName,n.snapshotNode,a.index_)),n}function sC(a,n,s){if(n.childName==null||s.childName==null)throw oo("Should only compare child_ events.");const o=new Bt(n.childName,n.snapshotNode),c=new Bt(s.childName,s.snapshotNode);return a.index_.compare(o,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(a,n){return{eventCache:a,serverCache:n}}function Ml(a,n,s,o){return Jc(new Ja(n,s,o),a.serverCache)}function o0(a,n,s,o){return Jc(a.eventCache,new Ja(n,s,o))}function Od(a){return a.eventCache.isFullyInitialized()?a.eventCache.getNode():null}function tr(a){return a.serverCache.isFullyInitialized()?a.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gd;const aC=()=>(gd||(gd=new wn(Gw)),gd);class _e{static fromObject(n){let s=new _e(null);return Cn(n,(o,c)=>{s=s.set(new le(o),c)}),s}constructor(n,s=aC()){this.value=n,this.children=s}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(n,s){if(this.value!=null&&s(this.value))return{path:Wt(),value:this.value};if(Zt(n))return null;{const o=It(n),c=this.children.get(o);if(c!==null){const d=c.findRootMostMatchingPathAndValue(me(n),s);return d!=null?{path:Pe(new le(o),d.path),value:d.value}:null}else return null}}findRootMostValueAndPath(n){return this.findRootMostMatchingPathAndValue(n,()=>!0)}subtree(n){if(Zt(n))return this;{const s=It(n),o=this.children.get(s);return o!==null?o.subtree(me(n)):new _e(null)}}set(n,s){if(Zt(n))return new _e(s,this.children);{const o=It(n),d=(this.children.get(o)||new _e(null)).set(me(n),s),p=this.children.insert(o,d);return new _e(this.value,p)}}remove(n){if(Zt(n))return this.children.isEmpty()?new _e(null):new _e(null,this.children);{const s=It(n),o=this.children.get(s);if(o){const c=o.remove(me(n));let d;return c.isEmpty()?d=this.children.remove(s):d=this.children.insert(s,c),this.value===null&&d.isEmpty()?new _e(null):new _e(this.value,d)}else return this}}get(n){if(Zt(n))return this.value;{const s=It(n),o=this.children.get(s);return o?o.get(me(n)):null}}setTree(n,s){if(Zt(n))return s;{const o=It(n),d=(this.children.get(o)||new _e(null)).setTree(me(n),s);let p;return d.isEmpty()?p=this.children.remove(o):p=this.children.insert(o,d),new _e(this.value,p)}}fold(n){return this.fold_(Wt(),n)}fold_(n,s){const o={};return this.children.inorderTraversal((c,d)=>{o[c]=d.fold_(Pe(n,c),s)}),s(n,this.value,o)}findOnPath(n,s){return this.findOnPath_(n,Wt(),s)}findOnPath_(n,s,o){const c=this.value?o(s,this.value):!1;if(c)return c;if(Zt(n))return null;{const d=It(n),p=this.children.get(d);return p?p.findOnPath_(me(n),Pe(s,d),o):null}}foreachOnPath(n,s){return this.foreachOnPath_(n,Wt(),s)}foreachOnPath_(n,s,o){if(Zt(n))return this;{this.value&&o(s,this.value);const c=It(n),d=this.children.get(c);return d?d.foreachOnPath_(me(n),Pe(s,c),o):new _e(null)}}foreach(n){this.foreach_(Wt(),n)}foreach_(n,s){this.children.inorderTraversal((o,c)=>{c.foreach_(Pe(n,o),s)}),this.value&&s(n,this.value)}foreachChild(n){this.children.inorderTraversal((s,o)=>{o.value&&n(s,o.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(n){this.writeTree_=n}static empty(){return new mi(new _e(null))}}function Rl(a,n,s){if(Zt(n))return new mi(new _e(s));{const o=a.writeTree_.findRootMostValueAndPath(n);if(o!=null){const c=o.path;let d=o.value;const p=Sn(c,n);return d=d.updateChild(p,s),new mi(a.writeTree_.set(c,d))}else{const c=new _e(s),d=a.writeTree_.setTree(n,c);return new mi(d)}}}function xv(a,n,s){let o=a;return Cn(s,(c,d)=>{o=Rl(o,Pe(n,c),d)}),o}function Sv(a,n){if(Zt(n))return mi.empty();{const s=a.writeTree_.setTree(n,new _e(null));return new mi(s)}}function Dd(a,n){return er(a,n)!=null}function er(a,n){const s=a.writeTree_.findRootMostValueAndPath(n);return s!=null?a.writeTree_.get(s.path).getChild(Sn(s.path,n)):null}function wv(a){const n=[],s=a.writeTree_.value;return s!=null?s.isLeafNode()||s.forEachChild(Ae,(o,c)=>{n.push(new Bt(o,c))}):a.writeTree_.children.inorderTraversal((o,c)=>{c.value!=null&&n.push(new Bt(o,c.value))}),n}function fa(a,n){if(Zt(n))return a;{const s=er(a,n);return s!=null?new mi(new _e(s)):new mi(a.writeTree_.subtree(n))}}function kd(a){return a.writeTree_.isEmpty()}function io(a,n){return l0(Wt(),a.writeTree_,n)}function l0(a,n,s){if(n.value!=null)return s.updateChild(a,n.value);{let o=null;return n.children.inorderTraversal((c,d)=>{c===".priority"?(st(d.value!==null,"Priority writes must always be leaf nodes"),o=d.value):s=l0(Pe(a,c),d,s)}),!s.getChild(a).isEmpty()&&o!==null&&(s=s.updateChild(Pe(a,".priority"),o)),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(a,n){return f0(n,a)}function rC(a,n,s,o,c){st(o>a.lastWriteId,"Stacking an older write on top of newer ones"),c===void 0&&(c=!0),a.allWrites.push({path:n,snap:s,writeId:o,visible:c}),c&&(a.visibleWrites=Rl(a.visibleWrites,n,s)),a.lastWriteId=o}function oC(a,n){for(let s=0;s<a.allWrites.length;s++){const o=a.allWrites[s];if(o.writeId===n)return o}return null}function lC(a,n){const s=a.allWrites.findIndex(b=>b.writeId===n);st(s>=0,"removeWrite called with nonexistent writeId.");const o=a.allWrites[s];a.allWrites.splice(s,1);let c=o.visible,d=!1,p=a.allWrites.length-1;for(;c&&p>=0;){const b=a.allWrites[p];b.visible&&(p>=s&&uC(b,o.path)?c=!1:fi(o.path,b.path)&&(d=!0)),p--}if(c){if(d)return cC(a),!0;if(o.snap)a.visibleWrites=Sv(a.visibleWrites,o.path);else{const b=o.children;Cn(b,g=>{a.visibleWrites=Sv(a.visibleWrites,Pe(o.path,g))})}return!0}else return!1}function uC(a,n){if(a.snap)return fi(a.path,n);for(const s in a.children)if(a.children.hasOwnProperty(s)&&fi(Pe(a.path,s),n))return!0;return!1}function cC(a){a.visibleWrites=u0(a.allWrites,hC,Wt()),a.allWrites.length>0?a.lastWriteId=a.allWrites[a.allWrites.length-1].writeId:a.lastWriteId=-1}function hC(a){return a.visible}function u0(a,n,s){let o=mi.empty();for(let c=0;c<a.length;++c){const d=a[c];if(n(d)){const p=d.path;let b;if(d.snap)fi(s,p)?(b=Sn(s,p),o=Rl(o,b,d.snap)):fi(p,s)&&(b=Sn(p,s),o=Rl(o,Wt(),d.snap.getChild(b)));else if(d.children){if(fi(s,p))b=Sn(s,p),o=xv(o,b,d.children);else if(fi(p,s))if(b=Sn(p,s),Zt(b))o=xv(o,Wt(),d.children);else{const g=to(d.children,It(b));if(g){const v=g.getChild(me(b));o=Rl(o,Wt(),v)}}}else throw oo("WriteRecord should have .snap or .children")}}return o}function c0(a,n,s,o,c){if(!o&&!c){const d=er(a.visibleWrites,n);if(d!=null)return d;{const p=fa(a.visibleWrites,n);if(kd(p))return s;if(s==null&&!Dd(p,Wt()))return null;{const b=s||At.EMPTY_NODE;return io(p,b)}}}else{const d=fa(a.visibleWrites,n);if(!c&&kd(d))return s;if(!c&&s==null&&!Dd(d,Wt()))return null;{const p=function(v){return(v.visible||c)&&(!o||!~o.indexOf(v.writeId))&&(fi(v.path,n)||fi(n,v.path))},b=u0(a.allWrites,p,n),g=s||At.EMPTY_NODE;return io(b,g)}}}function fC(a,n,s){let o=At.EMPTY_NODE;const c=er(a.visibleWrites,n);if(c)return c.isLeafNode()||c.forEachChild(Ae,(d,p)=>{o=o.updateImmediateChild(d,p)}),o;if(s){const d=fa(a.visibleWrites,n);return s.forEachChild(Ae,(p,b)=>{const g=io(fa(d,new le(p)),b);o=o.updateImmediateChild(p,g)}),wv(d).forEach(p=>{o=o.updateImmediateChild(p.name,p.node)}),o}else{const d=fa(a.visibleWrites,n);return wv(d).forEach(p=>{o=o.updateImmediateChild(p.name,p.node)}),o}}function dC(a,n,s,o,c){st(o||c,"Either existingEventSnap or existingServerSnap must exist");const d=Pe(n,s);if(Dd(a.visibleWrites,d))return null;{const p=fa(a.visibleWrites,d);return kd(p)?c.getChild(s):io(p,c.getChild(s))}}function mC(a,n,s,o){const c=Pe(n,s),d=er(a.visibleWrites,c);if(d!=null)return d;if(o.isCompleteForChild(s)){const p=fa(a.visibleWrites,c);return io(p,o.getNode().getImmediateChild(s))}else return null}function pC(a,n){return er(a.visibleWrites,n)}function _C(a,n,s,o,c,d,p){let b;const g=fa(a.visibleWrites,n),v=er(g,Wt());if(v!=null)b=v;else if(s!=null)b=io(g,s);else return[];if(b=b.withIndex(p),!b.isEmpty()&&!b.isLeafNode()){const A=[],T=p.getCompare(),C=d?b.getReverseIteratorFrom(o,p):b.getIteratorFrom(o,p);let P=C.getNext();for(;P&&A.length<c;)T(P,o)!==0&&A.push(P),P=C.getNext();return A}else return[]}function gC(){return{visibleWrites:mi.empty(),allWrites:[],lastWriteId:-1}}function Uc(a,n,s,o){return c0(a.writeTree,a.treePath,n,s,o)}function hm(a,n){return fC(a.writeTree,a.treePath,n)}function Ev(a,n,s,o){return dC(a.writeTree,a.treePath,n,s,o)}function Hc(a,n){return pC(a.writeTree,Pe(a.treePath,n))}function vC(a,n,s,o,c,d){return _C(a.writeTree,a.treePath,n,s,o,c,d)}function fm(a,n,s){return mC(a.writeTree,a.treePath,n,s)}function h0(a,n){return f0(Pe(a.treePath,n),a.writeTree)}function f0(a,n){return{treePath:a,writeTree:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(){this.changeMap=new Map}trackChildChange(n){const s=n.type,o=n.childName;st(s==="child_added"||s==="child_changed"||s==="child_removed","Only child changes supported for tracking"),st(o!==".priority","Only non-priority child changes can be tracked.");const c=this.changeMap.get(o);if(c){const d=c.type;if(s==="child_added"&&d==="child_removed")this.changeMap.set(o,Bl(o,n.snapshotNode,c.snapshotNode));else if(s==="child_removed"&&d==="child_added")this.changeMap.delete(o);else if(s==="child_removed"&&d==="child_changed")this.changeMap.set(o,Il(o,c.oldSnap));else if(s==="child_changed"&&d==="child_added")this.changeMap.set(o,no(o,n.snapshotNode));else if(s==="child_changed"&&d==="child_changed")this.changeMap.set(o,Bl(o,n.snapshotNode,c.oldSnap));else throw oo("Illegal combination of changes: "+n+" occurred after "+c)}else this.changeMap.set(o,n)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{getCompleteChild(n){return null}getChildAfterChild(n,s,o){return null}}const d0=new bC;class dm{constructor(n,s,o=null){this.writes_=n,this.viewCache_=s,this.optCompleteServerCache_=o}getCompleteChild(n){const s=this.viewCache_.eventCache;if(s.isCompleteForChild(n))return s.getNode().getImmediateChild(n);{const o=this.optCompleteServerCache_!=null?new Ja(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return fm(this.writes_,n,o)}}getChildAfterChild(n,s,o){const c=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:tr(this.viewCache_),d=vC(this.writes_,c,s,1,o,n);return d.length===0?null:d[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(a){return{filter:a}}function SC(a,n){st(n.eventCache.getNode().isIndexed(a.filter.getIndex()),"Event snap not indexed"),st(n.serverCache.getNode().isIndexed(a.filter.getIndex()),"Server snap not indexed")}function wC(a,n,s,o,c){const d=new yC;let p,b;if(s.type===di.OVERWRITE){const v=s;v.source.fromUser?p=zd(a,n,v.path,v.snap,o,c,d):(st(v.source.fromServer,"Unknown source."),b=v.source.tagged||n.serverCache.isFiltered()&&!Zt(v.path),p=Zc(a,n,v.path,v.snap,o,c,b,d))}else if(s.type===di.MERGE){const v=s;v.source.fromUser?p=CC(a,n,v.path,v.children,o,c,d):(st(v.source.fromServer,"Unknown source."),b=v.source.tagged||n.serverCache.isFiltered(),p=Pd(a,n,v.path,v.children,o,c,b,d))}else if(s.type===di.ACK_USER_WRITE){const v=s;v.revert?p=NC(a,n,v.path,o,c,d):p=TC(a,n,v.path,v.affectedTree,o,c,d)}else if(s.type===di.LISTEN_COMPLETE)p=AC(a,n,s.path,o,d);else throw oo("Unknown operation type: "+s.type);const g=d.getChanges();return EC(n,p,g),{viewCache:p,changes:g}}function EC(a,n,s){const o=n.eventCache;if(o.isFullyInitialized()){const c=o.getNode().isLeafNode()||o.getNode().isEmpty(),d=Od(a);(s.length>0||!a.eventCache.isFullyInitialized()||c&&!o.getNode().equals(d)||!o.getNode().getPriority().equals(d.getPriority()))&&s.push(s0(Od(n)))}}function m0(a,n,s,o,c,d){const p=n.eventCache;if(Hc(o,s)!=null)return n;{let b,g;if(Zt(s))if(st(n.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),n.serverCache.isFiltered()){const v=tr(n),A=v instanceof At?v:At.EMPTY_NODE,T=hm(o,A);b=a.filter.updateFullNode(n.eventCache.getNode(),T,d)}else{const v=Uc(o,tr(n));b=a.filter.updateFullNode(n.eventCache.getNode(),v,d)}else{const v=It(s);if(v===".priority"){st(da(s)===1,"Can't have a priority with additional path components");const A=p.getNode();g=n.serverCache.getNode();const T=Ev(o,s,A,g);T!=null?b=a.filter.updatePriority(A,T):b=p.getNode()}else{const A=me(s);let T;if(p.isCompleteForChild(v)){g=n.serverCache.getNode();const C=Ev(o,s,p.getNode(),g);C!=null?T=p.getNode().getImmediateChild(v).updateChild(A,C):T=p.getNode().getImmediateChild(v)}else T=fm(o,v,n.serverCache);T!=null?b=a.filter.updateChild(p.getNode(),v,T,A,c,d):b=p.getNode()}}return Ml(n,b,p.isFullyInitialized()||Zt(s),a.filter.filtersNodes())}}function Zc(a,n,s,o,c,d,p,b){const g=n.serverCache;let v;const A=p?a.filter:a.filter.getIndexedFilter();if(Zt(s))v=A.updateFullNode(g.getNode(),o,null);else if(A.filtersNodes()&&!g.isFiltered()){const P=g.getNode().updateChild(s,o);v=A.updateFullNode(g.getNode(),P,null)}else{const P=It(s);if(!g.isCompleteForPath(s)&&da(s)>1)return n;const M=me(s),B=g.getNode().getImmediateChild(P).updateChild(M,o);P===".priority"?v=A.updatePriority(g.getNode(),B):v=A.updateChild(g.getNode(),P,B,M,d0,null)}const T=o0(n,v,g.isFullyInitialized()||Zt(s),A.filtersNodes()),C=new dm(c,T,d);return m0(a,T,s,c,C,b)}function zd(a,n,s,o,c,d,p){const b=n.eventCache;let g,v;const A=new dm(c,n,d);if(Zt(s))v=a.filter.updateFullNode(n.eventCache.getNode(),o,p),g=Ml(n,v,!0,a.filter.filtersNodes());else{const T=It(s);if(T===".priority")v=a.filter.updatePriority(n.eventCache.getNode(),o),g=Ml(n,v,b.isFullyInitialized(),b.isFiltered());else{const C=me(s),P=b.getNode().getImmediateChild(T);let M;if(Zt(C))M=o;else{const k=A.getCompleteChild(T);k!=null?Qy(C)===".priority"&&k.getChild(Ky(C)).isEmpty()?M=k:M=k.updateChild(C,o):M=At.EMPTY_NODE}if(P.equals(M))g=n;else{const k=a.filter.updateChild(b.getNode(),T,M,C,A,p);g=Ml(n,k,b.isFullyInitialized(),a.filter.filtersNodes())}}}return g}function Cv(a,n){return a.eventCache.isCompleteForChild(n)}function CC(a,n,s,o,c,d,p){let b=n;return o.foreach((g,v)=>{const A=Pe(s,g);Cv(n,It(A))&&(b=zd(a,b,A,v,c,d,p))}),o.foreach((g,v)=>{const A=Pe(s,g);Cv(n,It(A))||(b=zd(a,b,A,v,c,d,p))}),b}function Tv(a,n,s){return s.foreach((o,c)=>{n=n.updateChild(o,c)}),n}function Pd(a,n,s,o,c,d,p,b){if(n.serverCache.getNode().isEmpty()&&!n.serverCache.isFullyInitialized())return n;let g=n,v;Zt(s)?v=o:v=new _e(null).setTree(s,o);const A=n.serverCache.getNode();return v.children.inorderTraversal((T,C)=>{if(A.hasChild(T)){const P=n.serverCache.getNode().getImmediateChild(T),M=Tv(a,P,C);g=Zc(a,g,new le(T),M,c,d,p,b)}}),v.children.inorderTraversal((T,C)=>{const P=!n.serverCache.isCompleteForChild(T)&&C.value===null;if(!A.hasChild(T)&&!P){const M=n.serverCache.getNode().getImmediateChild(T),k=Tv(a,M,C);g=Zc(a,g,new le(T),k,c,d,p,b)}}),g}function TC(a,n,s,o,c,d,p){if(Hc(c,s)!=null)return n;const b=n.serverCache.isFiltered(),g=n.serverCache;if(o.value!=null){if(Zt(s)&&g.isFullyInitialized()||g.isCompleteForPath(s))return Zc(a,n,s,g.getNode().getChild(s),c,d,b,p);if(Zt(s)){let v=new _e(null);return g.getNode().forEachChild($r,(A,T)=>{v=v.set(new le(A),T)}),Pd(a,n,s,v,c,d,b,p)}else return n}else{let v=new _e(null);return o.foreach((A,T)=>{const C=Pe(s,A);g.isCompleteForPath(C)&&(v=v.set(A,g.getNode().getChild(C)))}),Pd(a,n,s,v,c,d,b,p)}}function AC(a,n,s,o,c){const d=n.serverCache,p=o0(n,d.getNode(),d.isFullyInitialized()||Zt(s),d.isFiltered());return m0(a,p,s,o,d0,c)}function NC(a,n,s,o,c,d){let p;if(Hc(o,s)!=null)return n;{const b=new dm(o,n,c),g=n.eventCache.getNode();let v;if(Zt(s)||It(s)===".priority"){let A;if(n.serverCache.isFullyInitialized())A=Uc(o,tr(n));else{const T=n.serverCache.getNode();st(T instanceof At,"serverChildren would be complete if leaf node"),A=hm(o,T)}A=A,v=a.filter.updateFullNode(g,A,d)}else{const A=It(s);let T=fm(o,A,n.serverCache);T==null&&n.serverCache.isCompleteForChild(A)&&(T=g.getImmediateChild(A)),T!=null?v=a.filter.updateChild(g,A,T,me(s),b,d):n.eventCache.getNode().hasChild(A)?v=a.filter.updateChild(g,A,At.EMPTY_NODE,me(s),b,d):v=g,v.isEmpty()&&n.serverCache.isFullyInitialized()&&(p=Uc(o,tr(n)),p.isLeafNode()&&(v=a.filter.updateFullNode(v,p,d)))}return p=n.serverCache.isFullyInitialized()||Hc(o,Wt())!=null,Ml(n,v,p,a.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(n,s){this.query_=n,this.eventRegistrations_=[];const o=this.query_._queryParams,c=new rm(o.getIndex()),d=XE(o);this.processor_=xC(d);const p=s.serverCache,b=s.eventCache,g=c.updateFullNode(At.EMPTY_NODE,p.getNode(),null),v=d.updateFullNode(At.EMPTY_NODE,b.getNode(),null),A=new Ja(g,p.isFullyInitialized(),c.filtersNodes()),T=new Ja(v,b.isFullyInitialized(),d.filtersNodes());this.viewCache_=Jc(T,A),this.eventGenerator_=new eC(this.query_)}get query(){return this.query_}}function RC(a){return a.viewCache_.serverCache.getNode()}function LC(a,n){const s=tr(a.viewCache_);return s&&(a.query._queryParams.loadsAllData()||!Zt(n)&&!s.getImmediateChild(It(n)).isEmpty())?s.getChild(n):null}function Av(a){return a.eventRegistrations_.length===0}function OC(a,n){a.eventRegistrations_.push(n)}function Nv(a,n,s){const o=[];if(s){st(n==null,"A cancel should cancel all event registrations.");const c=a.query._path;a.eventRegistrations_.forEach(d=>{const p=d.createCancelEvent(s,c);p&&o.push(p)})}if(n){let c=[];for(let d=0;d<a.eventRegistrations_.length;++d){const p=a.eventRegistrations_[d];if(!p.matches(n))c.push(p);else if(n.hasAnyCallback()){c=c.concat(a.eventRegistrations_.slice(d+1));break}}a.eventRegistrations_=c}else a.eventRegistrations_=[];return o}function Mv(a,n,s,o){n.type===di.MERGE&&n.source.queryId!==null&&(st(tr(a.viewCache_),"We should always have a full cache before handling merges"),st(Od(a.viewCache_),"Missing event cache, even though we have a server cache"));const c=a.viewCache_,d=wC(a.processor_,c,n,s,o);return SC(a.processor_,d.viewCache),st(d.viewCache.serverCache.isFullyInitialized()||!c.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),a.viewCache_=d.viewCache,p0(a,d.changes,d.viewCache.eventCache.getNode(),null)}function DC(a,n){const s=a.viewCache_.eventCache,o=[];return s.getNode().isLeafNode()||s.getNode().forEachChild(Ae,(d,p)=>{o.push(no(d,p))}),s.isFullyInitialized()&&o.push(s0(s.getNode())),p0(a,o,s.getNode(),n)}function p0(a,n,s,o){const c=o?[o]:a.eventRegistrations_;return nC(a.eventGenerator_,n,s,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qc;class kC{constructor(){this.views=new Map}}function zC(a){st(!qc,"__referenceConstructor has already been defined"),qc=a}function PC(){return st(qc,"Reference.ts has not been loaded"),qc}function IC(a){return a.views.size===0}function mm(a,n,s,o){const c=n.source.queryId;if(c!==null){const d=a.views.get(c);return st(d!=null,"SyncTree gave us an op for an invalid query."),Mv(d,n,s,o)}else{let d=[];for(const p of a.views.values())d=d.concat(Mv(p,n,s,o));return d}}function BC(a,n,s,o,c){const d=n._queryIdentifier,p=a.views.get(d);if(!p){let b=Uc(s,c?o:null),g=!1;b?g=!0:o instanceof At?(b=hm(s,o),g=!1):(b=At.EMPTY_NODE,g=!1);const v=Jc(new Ja(b,g,!1),new Ja(o,c,!1));return new MC(n,v)}return p}function jC(a,n,s,o,c,d){const p=BC(a,n,o,c,d);return a.views.has(n._queryIdentifier)||a.views.set(n._queryIdentifier,p),OC(p,s),DC(p,s)}function UC(a,n,s,o){const c=n._queryIdentifier,d=[];let p=[];const b=ma(a);if(c==="default")for(const[g,v]of a.views.entries())p=p.concat(Nv(v,s,o)),Av(v)&&(a.views.delete(g),v.query._queryParams.loadsAllData()||d.push(v.query));else{const g=a.views.get(c);g&&(p=p.concat(Nv(g,s,o)),Av(g)&&(a.views.delete(c),g.query._queryParams.loadsAllData()||d.push(g.query)))}return b&&!ma(a)&&d.push(new(PC())(n._repo,n._path)),{removed:d,events:p}}function _0(a){const n=[];for(const s of a.views.values())s.query._queryParams.loadsAllData()||n.push(s);return n}function Jr(a,n){let s=null;for(const o of a.views.values())s=s||LC(o,n);return s}function g0(a,n){if(n._queryParams.loadsAllData())return th(a);{const o=n._queryIdentifier;return a.views.get(o)}}function v0(a,n){return g0(a,n)!=null}function ma(a){return th(a)!=null}function th(a){for(const n of a.views.values())if(n.query._queryParams.loadsAllData())return n;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gc;function HC(a){st(!Gc,"__referenceConstructor has already been defined"),Gc=a}function ZC(){return st(Gc,"Reference.ts has not been loaded"),Gc}let qC=1;class Rv{constructor(n){this.listenProvider_=n,this.syncPointTree_=new _e(null),this.pendingWriteTree_=gC(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function y0(a,n,s,o,c){return rC(a.pendingWriteTree_,n,s,o,c),c?Ql(a,new $a(r0(),n,s)):[]}function Wa(a,n,s=!1){const o=oC(a.pendingWriteTree_,n);if(lC(a.pendingWriteTree_,n)){let d=new _e(null);return o.snap!=null?d=d.set(Wt(),!0):Cn(o.children,p=>{d=d.set(new le(p),!0)}),Ql(a,new jc(o.path,d,s))}else return[]}function eh(a,n,s){return Ql(a,new $a(lm(),n,s))}function GC(a,n,s){const o=_e.fromObject(s);return Ql(a,new Hl(lm(),n,o))}function VC(a,n){return Ql(a,new Ul(lm(),n))}function YC(a,n,s){const o=_m(a,s);if(o){const c=gm(o),d=c.path,p=c.queryId,b=Sn(d,n),g=new Ul(um(p),b);return vm(a,d,g)}else return[]}function Id(a,n,s,o,c=!1){const d=n._path,p=a.syncPointTree_.get(d);let b=[];if(p&&(n._queryIdentifier==="default"||v0(p,n))){const g=UC(p,n,s,o);IC(p)&&(a.syncPointTree_=a.syncPointTree_.remove(d));const v=g.removed;if(b=g.events,!c){const A=v.findIndex(C=>C._queryParams.loadsAllData())!==-1,T=a.syncPointTree_.findOnPath(d,(C,P)=>ma(P));if(A&&!T){const C=a.syncPointTree_.subtree(d);if(!C.isEmpty()){const P=QC(C);for(let M=0;M<P.length;++M){const k=P[M],B=k.query,U=S0(a,k);a.listenProvider_.startListening(Ll(B),Vc(a,B),U.hashFn,U.onComplete)}}}!T&&v.length>0&&!o&&(A?a.listenProvider_.stopListening(Ll(n),null):v.forEach(C=>{const P=a.queryToTagMap.get(nh(C));a.listenProvider_.stopListening(Ll(C),P)}))}WC(a,v)}return b}function FC(a,n,s,o){const c=_m(a,o);if(c!=null){const d=gm(c),p=d.path,b=d.queryId,g=Sn(p,n),v=new $a(um(b),g,s);return vm(a,p,v)}else return[]}function XC(a,n,s,o){const c=_m(a,o);if(c){const d=gm(c),p=d.path,b=d.queryId,g=Sn(p,n),v=_e.fromObject(s),A=new Hl(um(b),g,v);return vm(a,p,A)}else return[]}function Lv(a,n,s,o=!1){const c=n._path;let d=null,p=!1;a.syncPointTree_.foreachOnPath(c,(C,P)=>{const M=Sn(C,c);d=d||Jr(P,M),p=p||ma(P)});let b=a.syncPointTree_.get(c);b?(p=p||ma(b),d=d||Jr(b,Wt())):(b=new kC,a.syncPointTree_=a.syncPointTree_.set(c,b));let g;d!=null?g=!0:(g=!1,d=At.EMPTY_NODE,a.syncPointTree_.subtree(c).foreachChild((P,M)=>{const k=Jr(M,Wt());k&&(d=d.updateImmediateChild(P,k))}));const v=v0(b,n);if(!v&&!n._queryParams.loadsAllData()){const C=nh(n);st(!a.queryToTagMap.has(C),"View does not exist, but we have a tag");const P=KC();a.queryToTagMap.set(C,P),a.tagToQueryMap.set(P,C)}const A=cm(a.pendingWriteTree_,c);let T=jC(b,n,s,A,d,g);if(!v&&!p&&!o){const C=g0(b,n);T=T.concat($C(a,n,C))}return T}function pm(a,n,s){const c=a.pendingWriteTree_,d=a.syncPointTree_.findOnPath(n,(p,b)=>{const g=Sn(p,n),v=Jr(b,g);if(v)return v});return c0(c,n,d,s,!0)}function Ql(a,n){return b0(n,a.syncPointTree_,null,cm(a.pendingWriteTree_,Wt()))}function b0(a,n,s,o){if(Zt(a.path))return x0(a,n,s,o);{const c=n.get(Wt());s==null&&c!=null&&(s=Jr(c,Wt()));let d=[];const p=It(a.path),b=a.operationForChild(p),g=n.children.get(p);if(g&&b){const v=s?s.getImmediateChild(p):null,A=h0(o,p);d=d.concat(b0(b,g,v,A))}return c&&(d=d.concat(mm(c,a,o,s))),d}}function x0(a,n,s,o){const c=n.get(Wt());s==null&&c!=null&&(s=Jr(c,Wt()));let d=[];return n.children.inorderTraversal((p,b)=>{const g=s?s.getImmediateChild(p):null,v=h0(o,p),A=a.operationForChild(p);A&&(d=d.concat(x0(A,b,g,v)))}),c&&(d=d.concat(mm(c,a,o,s))),d}function S0(a,n){const s=n.query,o=Vc(a,s);return{hashFn:()=>(RC(n)||At.EMPTY_NODE).hash(),onComplete:c=>{if(c==="ok")return o?YC(a,s._path,o):VC(a,s._path);{const d=Fw(c,s);return Id(a,s,null,d)}}}}function Vc(a,n){const s=nh(n);return a.queryToTagMap.get(s)}function nh(a){return a._path.toString()+"$"+a._queryIdentifier}function _m(a,n){return a.tagToQueryMap.get(n)}function gm(a){const n=a.indexOf("$");return st(n!==-1&&n<a.length-1,"Bad queryKey."),{queryId:a.substr(n+1),path:new le(a.substr(0,n))}}function vm(a,n,s){const o=a.syncPointTree_.get(n);st(o,"Missing sync point for query tag that we're tracking");const c=cm(a.pendingWriteTree_,n);return mm(o,s,c,null)}function QC(a){return a.fold((n,s,o)=>{if(s&&ma(s))return[th(s)];{let c=[];return s&&(c=_0(s)),Cn(o,(d,p)=>{c=c.concat(p)}),c}})}function Ll(a){return a._queryParams.loadsAllData()&&!a._queryParams.isDefault()?new(ZC())(a._repo,a._path):a}function WC(a,n){for(let s=0;s<n.length;++s){const o=n[s];if(!o._queryParams.loadsAllData()){const c=nh(o),d=a.queryToTagMap.get(c);a.queryToTagMap.delete(c),a.tagToQueryMap.delete(d)}}}function KC(){return qC++}function $C(a,n,s){const o=n._path,c=Vc(a,n),d=S0(a,s),p=a.listenProvider_.startListening(Ll(n),c,d.hashFn,d.onComplete),b=a.syncPointTree_.subtree(o);if(c)st(!ma(b.value),"If we're adding a query, it shouldn't be shadowed");else{const g=b.fold((v,A,T)=>{if(!Zt(v)&&A&&ma(A))return[th(A).query];{let C=[];return A&&(C=C.concat(_0(A).map(P=>P.query))),Cn(T,(P,M)=>{C=C.concat(M)}),C}});for(let v=0;v<g.length;++v){const A=g[v];a.listenProvider_.stopListening(Ll(A),Vc(a,A))}}return p}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(n){this.node_=n}getImmediateChild(n){const s=this.node_.getImmediateChild(n);return new ym(s)}node(){return this.node_}}class bm{constructor(n,s){this.syncTree_=n,this.path_=s}getImmediateChild(n){const s=Pe(this.path_,n);return new bm(this.syncTree_,s)}node(){return pm(this.syncTree_,this.path_)}}const JC=function(a){return a=a||{},a.timestamp=a.timestamp||new Date().getTime(),a},Ov=function(a,n,s){if(!a||typeof a!="object")return a;if(st(".sv"in a,"Unexpected leaf node or priority contents"),typeof a[".sv"]=="string")return tT(a[".sv"],n,s);if(typeof a[".sv"]=="object")return eT(a[".sv"],n);st(!1,"Unexpected server value: "+JSON.stringify(a,null,2))},tT=function(a,n,s){switch(a){case"timestamp":return s.timestamp;default:st(!1,"Unexpected server value: "+a)}},eT=function(a,n,s){a.hasOwnProperty("increment")||st(!1,"Unexpected server value: "+JSON.stringify(a,null,2));const o=a.increment;typeof o!="number"&&st(!1,"Unexpected increment value: "+o);const c=n.node();if(st(c!==null&&typeof c<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!c.isLeafNode())return o;const p=c.getValue();return typeof p!="number"?o:p+o},nT=function(a,n,s,o){return xm(n,new bm(s,a),o)},w0=function(a,n,s){return xm(a,new ym(n),s)};function xm(a,n,s){const o=a.getPriority().val(),c=Ov(o,n.getImmediateChild(".priority"),s);let d;if(a.isLeafNode()){const p=a,b=Ov(p.getValue(),n,s);return b!==p.getValue()||c!==p.getPriority().val()?new Ve(b,tn(c)):a}else{const p=a;return d=p,c!==p.getPriority().val()&&(d=d.updatePriority(new Ve(c))),p.forEachChild(Ae,(b,g)=>{const v=xm(g,n.getImmediateChild(b),s);v!==g&&(d=d.updateImmediateChild(b,v))}),d}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(n="",s=null,o={children:{},childCount:0}){this.name=n,this.parent=s,this.node=o}}function wm(a,n){let s=n instanceof le?n:new le(n),o=a,c=It(s);for(;c!==null;){const d=to(o.node.children,c)||{children:{},childCount:0};o=new Sm(c,o,d),s=me(s),c=It(s)}return o}function ho(a){return a.node.value}function E0(a,n){a.node.value=n,Bd(a)}function C0(a){return a.node.childCount>0}function iT(a){return ho(a)===void 0&&!C0(a)}function ih(a,n){Cn(a.node.children,(s,o)=>{n(new Sm(s,a,o))})}function T0(a,n,s,o){s&&n(a),ih(a,c=>{T0(c,n,!0)})}function sT(a,n,s){let o=a.parent;for(;o!==null;){if(n(o))return!0;o=o.parent}return!1}function Wl(a){return new le(a.parent===null?a.name:Wl(a.parent)+"/"+a.name)}function Bd(a){a.parent!==null&&aT(a.parent,a.name,a)}function aT(a,n,s){const o=iT(s),c=_s(a.node.children,n);o&&c?(delete a.node.children[n],a.node.childCount--,Bd(a)):!o&&!c&&(a.node.children[n]=s.node,a.node.childCount++,Bd(a))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT=/[\[\].#$\/\u0000-\u001F\u007F]/,oT=/[\[\].#$\u0000-\u001F\u007F]/,vd=10*1024*1024,A0=function(a){return typeof a=="string"&&a.length!==0&&!rT.test(a)},N0=function(a){return typeof a=="string"&&a.length!==0&&!oT.test(a)},lT=function(a){return a&&(a=a.replace(/^\/*\.info(\/|$)/,"/")),N0(a)},M0=function(a,n,s,o){o&&n===void 0||Em(Kd(a,"value"),n,s)},Em=function(a,n,s){const o=s instanceof le?new TE(s,a):s;if(n===void 0)throw new Error(a+"contains undefined "+Xa(o));if(typeof n=="function")throw new Error(a+"contains a function "+Xa(o)+" with contents = "+n.toString());if(Ny(n))throw new Error(a+"contains "+n.toString()+" "+Xa(o));if(typeof n=="string"&&n.length>vd/3&&Kc(n)>vd)throw new Error(a+"contains a string greater than "+vd+" utf8 bytes "+Xa(o)+" ('"+n.substring(0,50)+"...')");if(n&&typeof n=="object"){let c=!1,d=!1;if(Cn(n,(p,b)=>{if(p===".value")c=!0;else if(p!==".priority"&&p!==".sv"&&(d=!0,!A0(p)))throw new Error(a+" contains an invalid key ("+p+") "+Xa(o)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);AE(o,p),Em(a,b,o),NE(o)}),c&&d)throw new Error(a+' contains ".value" child '+Xa(o)+" in addition to actual children.")}},R0=function(a,n,s,o){if(!N0(s))throw new Error(Kd(a,n)+'was an invalid path = "'+s+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},uT=function(a,n,s,o){s&&(s=s.replace(/^\/*\.info(\/|$)/,"/")),R0(a,n,s)},Cm=function(a,n){if(It(n)===".info")throw new Error(a+" failed = Can't modify data under /.info/")},cT=function(a,n){const s=n.path.toString();if(typeof n.repoInfo.host!="string"||n.repoInfo.host.length===0||!A0(n.repoInfo.namespace)&&n.repoInfo.host.split(":")[0]!=="localhost"||s.length!==0&&!lT(s))throw new Error(Kd(a,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Tm(a,n){let s=null;for(let o=0;o<n.length;o++){const c=n[o],d=c.getPath();s!==null&&!im(d,s.path)&&(a.eventLists_.push(s),s=null),s===null&&(s={events:[],path:d}),s.events.push(c)}s&&a.eventLists_.push(s)}function L0(a,n,s){Tm(a,s),O0(a,o=>im(o,n))}function ms(a,n,s){Tm(a,s),O0(a,o=>fi(o,n)||fi(n,o))}function O0(a,n){a.recursionDepth_++;let s=!0;for(let o=0;o<a.eventLists_.length;o++){const c=a.eventLists_[o];if(c){const d=c.path;n(d)?(fT(a.eventLists_[o]),a.eventLists_[o]=null):s=!1}}s&&(a.eventLists_=[]),a.recursionDepth_--}function fT(a){for(let n=0;n<a.events.length;n++){const s=a.events[n];if(s!==null){a.events[n]=null;const o=s.getEventRunner();Al&&ln("event: "+s.toString()),co(o)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT="repo_interrupt",mT=25;class pT{constructor(n,s,o,c){this.repoInfo_=n,this.forceRestClient_=s,this.authTokenProvider_=o,this.appCheckProvider_=c,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new hT,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Bc(),this.transactionQueueTree_=new Sm,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function _T(a,n,s){if(a.stats_=em(a.repoInfo_),a.forceRestClient_||Kw())a.server_=new Ic(a.repoInfo_,(o,c,d,p)=>{Dv(a,o,c,d,p)},a.authTokenProvider_,a.appCheckProvider_),setTimeout(()=>kv(a,!0),0);else{if(typeof s<"u"&&s!==null){if(typeof s!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Fe(s)}catch(o){throw new Error("Invalid authOverride provided: "+o)}}a.persistentConnection_=new cs(a.repoInfo_,n,(o,c,d,p)=>{Dv(a,o,c,d,p)},o=>{kv(a,o)},o=>{gT(a,o)},a.authTokenProvider_,a.appCheckProvider_,s),a.server_=a.persistentConnection_}a.authTokenProvider_.addTokenChangeListener(o=>{a.server_.refreshAuthToken(o)}),a.appCheckProvider_.addTokenChangeListener(o=>{a.server_.refreshAppCheckToken(o.token)}),a.statsReporter_=nE(a.repoInfo_,()=>new tC(a.stats_,a.server_)),a.infoData_=new QE,a.infoSyncTree_=new Rv({startListening:(o,c,d,p)=>{let b=[];const g=a.infoData_.getNode(o._path);return g.isEmpty()||(b=eh(a.infoSyncTree_,o._path,g),setTimeout(()=>{p("ok")},0)),b},stopListening:()=>{}}),Nm(a,"connected",!1),a.serverSyncTree_=new Rv({startListening:(o,c,d,p)=>(a.server_.listen(o,d,c,(b,g)=>{const v=p(b,g);ms(a.eventQueue_,o._path,v)}),[]),stopListening:(o,c)=>{a.server_.unlisten(o,c)}})}function D0(a){const s=a.infoData_.getNode(new le(".info/serverTimeOffset")).val()||0;return new Date().getTime()+s}function Am(a){return JC({timestamp:D0(a)})}function Dv(a,n,s,o,c){a.dataUpdateCount++;const d=new le(n);s=a.interceptServerDataCallback_?a.interceptServerDataCallback_(n,s):s;let p=[];if(c)if(o){const g=Rc(s,v=>tn(v));p=XC(a.serverSyncTree_,d,g,c)}else{const g=tn(s);p=FC(a.serverSyncTree_,d,g,c)}else if(o){const g=Rc(s,v=>tn(v));p=GC(a.serverSyncTree_,d,g)}else{const g=tn(s);p=eh(a.serverSyncTree_,d,g)}let b=d;p.length>0&&(b=sh(a,d)),ms(a.eventQueue_,b,p)}function kv(a,n){Nm(a,"connected",n),n===!1&&yT(a)}function gT(a,n){Cn(n,(s,o)=>{Nm(a,s,o)})}function Nm(a,n,s){const o=new le("/.info/"+n),c=tn(s);a.infoData_.updateSnapshot(o,c);const d=eh(a.infoSyncTree_,o,c);ms(a.eventQueue_,o,d)}function k0(a){return a.nextWriteId_++}function vT(a,n,s,o,c){Mm(a,"set",{path:n.toString(),value:s,priority:o});const d=Am(a),p=tn(s,o),b=pm(a.serverSyncTree_,n),g=w0(p,b,d),v=k0(a),A=y0(a.serverSyncTree_,n,g,v,!0);Tm(a.eventQueue_,A),a.server_.put(n.toString(),p.val(!0),(C,P)=>{const M=C==="ok";M||En("set at "+n+" failed: "+C);const k=Wa(a.serverSyncTree_,v,!M);ms(a.eventQueue_,n,k),ST(a,c,C,P)});const T=j0(a,n);sh(a,T),ms(a.eventQueue_,T,[])}function yT(a){Mm(a,"onDisconnectEvents");const n=Am(a),s=Bc();Ld(a.onDisconnect_,Wt(),(c,d)=>{const p=nT(c,d,a.serverSyncTree_,n);a0(s,c,p)});let o=[];Ld(s,Wt(),(c,d)=>{o=o.concat(eh(a.serverSyncTree_,c,d));const p=j0(a,c);sh(a,p)}),a.onDisconnect_=Bc(),ms(a.eventQueue_,Wt(),o)}function bT(a,n,s){let o;It(n._path)===".info"?o=Lv(a.infoSyncTree_,n,s):o=Lv(a.serverSyncTree_,n,s),L0(a.eventQueue_,n._path,o)}function zv(a,n,s){let o;It(n._path)===".info"?o=Id(a.infoSyncTree_,n,s):o=Id(a.serverSyncTree_,n,s),L0(a.eventQueue_,n._path,o)}function xT(a){a.persistentConnection_&&a.persistentConnection_.interrupt(dT)}function Mm(a,...n){let s="";a.persistentConnection_&&(s=a.persistentConnection_.id+":"),ln(s,...n)}function ST(a,n,s,o){n&&co(()=>{if(s==="ok")n(null);else{const c=(s||"error").toUpperCase();let d=c;o&&(d+=": "+o);const p=new Error(d);p.code=c,n(p)}})}function z0(a,n,s){return pm(a.serverSyncTree_,n,s)||At.EMPTY_NODE}function Rm(a,n=a.transactionQueueTree_){if(n||ah(a,n),ho(n)){const s=I0(a,n);st(s.length>0,"Sending zero length transaction queue"),s.every(c=>c.status===0)&&wT(a,Wl(n),s)}else C0(n)&&ih(n,s=>{Rm(a,s)})}function wT(a,n,s){const o=s.map(v=>v.currentWriteId),c=z0(a,n,o);let d=c;const p=c.hash();for(let v=0;v<s.length;v++){const A=s[v];st(A.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),A.status=1,A.retryCount++;const T=Sn(n,A.path);d=d.updateChild(T,A.currentOutputSnapshotRaw)}const b=d.val(!0),g=n;a.server_.put(g.toString(),b,v=>{Mm(a,"transaction put response",{path:g.toString(),status:v});let A=[];if(v==="ok"){const T=[];for(let C=0;C<s.length;C++)s[C].status=2,A=A.concat(Wa(a.serverSyncTree_,s[C].currentWriteId)),s[C].onComplete&&T.push(()=>s[C].onComplete(null,!0,s[C].currentOutputSnapshotResolved)),s[C].unwatcher();ah(a,wm(a.transactionQueueTree_,n)),Rm(a,a.transactionQueueTree_),ms(a.eventQueue_,n,A);for(let C=0;C<T.length;C++)co(T[C])}else{if(v==="datastale")for(let T=0;T<s.length;T++)s[T].status===3?s[T].status=4:s[T].status=0;else{En("transaction at "+g.toString()+" failed: "+v);for(let T=0;T<s.length;T++)s[T].status=4,s[T].abortReason=v}sh(a,n)}},p)}function sh(a,n){const s=P0(a,n),o=Wl(s),c=I0(a,s);return ET(a,c,o),o}function ET(a,n,s){if(n.length===0)return;const o=[];let c=[];const p=n.filter(b=>b.status===0).map(b=>b.currentWriteId);for(let b=0;b<n.length;b++){const g=n[b],v=Sn(s,g.path);let A=!1,T;if(st(v!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),g.status===4)A=!0,T=g.abortReason,c=c.concat(Wa(a.serverSyncTree_,g.currentWriteId,!0));else if(g.status===0)if(g.retryCount>=mT)A=!0,T="maxretry",c=c.concat(Wa(a.serverSyncTree_,g.currentWriteId,!0));else{const C=z0(a,g.path,p);g.currentInputSnapshot=C;const P=n[b].update(C.val());if(P!==void 0){Em("transaction failed: Data returned ",P,g.path);let M=tn(P);typeof P=="object"&&P!=null&&_s(P,".priority")||(M=M.updatePriority(C.getPriority()));const B=g.currentWriteId,U=Am(a),Q=w0(M,C,U);g.currentOutputSnapshotRaw=M,g.currentOutputSnapshotResolved=Q,g.currentWriteId=k0(a),p.splice(p.indexOf(B),1),c=c.concat(y0(a.serverSyncTree_,g.path,Q,g.currentWriteId,g.applyLocally)),c=c.concat(Wa(a.serverSyncTree_,B,!0))}else A=!0,T="nodata",c=c.concat(Wa(a.serverSyncTree_,g.currentWriteId,!0))}ms(a.eventQueue_,s,c),c=[],A&&(n[b].status=2,function(C){setTimeout(C,Math.floor(0))}(n[b].unwatcher),n[b].onComplete&&(T==="nodata"?o.push(()=>n[b].onComplete(null,!1,n[b].currentInputSnapshot)):o.push(()=>n[b].onComplete(new Error(T),!1,null))))}ah(a,a.transactionQueueTree_);for(let b=0;b<o.length;b++)co(o[b]);Rm(a,a.transactionQueueTree_)}function P0(a,n){let s,o=a.transactionQueueTree_;for(s=It(n);s!==null&&ho(o)===void 0;)o=wm(o,s),n=me(n),s=It(n);return o}function I0(a,n){const s=[];return B0(a,n,s),s.sort((o,c)=>o.order-c.order),s}function B0(a,n,s){const o=ho(n);if(o)for(let c=0;c<o.length;c++)s.push(o[c]);ih(n,c=>{B0(a,c,s)})}function ah(a,n){const s=ho(n);if(s){let o=0;for(let c=0;c<s.length;c++)s[c].status!==2&&(s[o]=s[c],o++);s.length=o,E0(n,s.length>0?s:void 0)}ih(n,o=>{ah(a,o)})}function j0(a,n){const s=Wl(P0(a,n)),o=wm(a.transactionQueueTree_,n);return sT(o,c=>{yd(a,c)}),yd(a,o),T0(o,c=>{yd(a,c)}),s}function yd(a,n){const s=ho(n);if(s){const o=[];let c=[],d=-1;for(let p=0;p<s.length;p++)s[p].status===3||(s[p].status===1?(st(d===p-1,"All SENT items should be at beginning of queue."),d=p,s[p].status=3,s[p].abortReason="set"):(st(s[p].status===0,"Unexpected transaction status in abort"),s[p].unwatcher(),c=c.concat(Wa(a.serverSyncTree_,s[p].currentWriteId,!0)),s[p].onComplete&&o.push(s[p].onComplete.bind(null,new Error("set"),!1,null))));d===-1?E0(n,void 0):s.length=d+1,ms(a.eventQueue_,Wl(n),c);for(let p=0;p<o.length;p++)co(o[p])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(a){let n="";const s=a.split("/");for(let o=0;o<s.length;o++)if(s[o].length>0){let c=s[o];try{c=decodeURIComponent(c.replace(/\+/g," "))}catch{}n+="/"+c}return n}function TT(a){const n={};a.charAt(0)==="?"&&(a=a.substring(1));for(const s of a.split("&")){if(s.length===0)continue;const o=s.split("=");o.length===2?n[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):En(`Invalid query segment '${s}' in query '${a}'`)}return n}const Pv=function(a,n){const s=AT(a),o=s.namespace;s.domain==="firebase.com"&&ds(s.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!o||o==="undefined")&&s.domain!=="localhost"&&ds("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),s.secure||Zw();const c=s.scheme==="ws"||s.scheme==="wss";return{repoInfo:new Uy(s.host,s.secure,o,c,n,"",o!==s.subdomain),path:new le(s.pathString)}},AT=function(a){let n="",s="",o="",c="",d="",p=!0,b="https",g=443;if(typeof a=="string"){let v=a.indexOf("//");v>=0&&(b=a.substring(0,v-1),a=a.substring(v+2));let A=a.indexOf("/");A===-1&&(A=a.length);let T=a.indexOf("?");T===-1&&(T=a.length),n=a.substring(0,Math.min(A,T)),A<T&&(c=CT(a.substring(A,T)));const C=TT(a.substring(Math.min(a.length,T)));v=n.indexOf(":"),v>=0?(p=b==="https"||b==="wss",g=parseInt(n.substring(v+1),10)):v=n.length;const P=n.slice(0,v);if(P.toLowerCase()==="localhost")s="localhost";else if(P.split(".").length<=2)s=P;else{const M=n.indexOf(".");o=n.substring(0,M).toLowerCase(),s=n.substring(M+1),d=o}"ns"in C&&(d=C.ns)}return{host:n,port:g,domain:s,subdomain:o,secure:p,scheme:b,pathString:c,namespace:d}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",NT=function(){let a=0;const n=[];return function(s){const o=s===a;a=s;let c;const d=new Array(8);for(c=7;c>=0;c--)d[c]=Iv.charAt(s%64),s=Math.floor(s/64);st(s===0,"Cannot push at time == 0");let p=d.join("");if(o){for(c=11;c>=0&&n[c]===63;c--)n[c]=0;n[c]++}else for(c=0;c<12;c++)n[c]=Math.floor(Math.random()*64);for(c=0;c<12;c++)p+=Iv.charAt(n[c]);return st(p.length===20,"nextPushId: Length should be 20."),p}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(n,s,o,c){this.eventType=n,this.eventRegistration=s,this.snapshot=o,this.prevName=c}getPath(){const n=this.snapshot.ref;return this.eventType==="value"?n._path:n.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Fe(this.snapshot.exportVal())}}class RT{constructor(n,s,o){this.eventRegistration=n,this.error=s,this.path=o}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(n,s){this.snapshotCallback=n,this.cancelCallback=s}onValue(n,s){this.snapshotCallback.call(null,n,s)}onCancel(n){return st(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,n)}get hasCancelCallback(){return!!this.cancelCallback}matches(n){return this.snapshotCallback===n.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===n.snapshotCallback.userCallback&&this.snapshotCallback.context===n.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(n,s,o,c){this._repo=n,this._path=s,this._queryParams=o,this._orderByCalled=c}get key(){return Zt(this._path)?null:Qy(this._path)}get ref(){return new pa(this._repo,this._path)}get _queryIdentifier(){const n=yv(this._queryParams),s=Jd(n);return s==="{}"?"default":s}get _queryObject(){return yv(this._queryParams)}isEqual(n){if(n=lo(n),!(n instanceof Lm))return!1;const s=this._repo===n._repo,o=im(this._path,n._path),c=this._queryIdentifier===n._queryIdentifier;return s&&o&&c}toJSON(){return this.toString()}toString(){return this._repo.toString()+CE(this._path)}}class pa extends Lm{constructor(n,s){super(n,s,new om,!1)}get parent(){const n=Ky(this._path);return n===null?null:new pa(this._repo,n)}get root(){let n=this;for(;n.parent!==null;)n=n.parent;return n}}class Yc{constructor(n,s,o){this._node=n,this.ref=s,this._index=o}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(n){const s=new le(n),o=Zl(this.ref,n);return new Yc(this._node.getChild(s),o,Ae)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(n){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(o,c)=>n(new Yc(c,Zl(this.ref,o),Ae)))}hasChild(n){const s=new le(n);return!this._node.getChild(s).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function re(a,n){return a=lo(a),a._checkNotDeleted("ref"),n!==void 0?Zl(a._root,n):a._root}function Zl(a,n){return a=lo(a),It(a._path)===null?uT("child","path",n):R0("child","path",n),new pa(a._repo,Pe(a._path,n))}function Bv(a,n){a=lo(a),Cm("push",a._path),M0("push",n,a._path,!0);const s=D0(a._repo),o=NT(s),c=Zl(a,o),d=Zl(a,o);let p;return n!=null?p=Ge(d,n).then(()=>d):p=Promise.resolve(d),c.then=p.then.bind(p),c.catch=p.then.bind(p,void 0),c}function U0(a){return Cm("remove",a._path),Ge(a,null)}function Ge(a,n){a=lo(a),Cm("set",a._path),M0("set",n,a._path,!1);const s=new Wc;return vT(a._repo,a._path,n,null,s.wrapCallback(()=>{})),s.promise}class Om{constructor(n){this.callbackContext=n}respondsTo(n){return n==="value"}createEvent(n,s){const o=s._queryParams.getIndex();return new MT("value",this,new Yc(n.snapshotNode,new pa(s._repo,s._path),o))}getEventRunner(n){return n.getEventType()==="cancel"?()=>this.callbackContext.onCancel(n.error):()=>this.callbackContext.onValue(n.snapshot,null)}createCancelEvent(n,s){return this.callbackContext.hasCancelCallback?new RT(this,n,s):null}matches(n){return n instanceof Om?!n.callbackContext||!this.callbackContext?!0:n.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function OT(a,n,s,o,c){let d;if(typeof o=="object"&&(d=void 0,c=o),typeof o=="function"&&(d=o),c&&c.onlyOnce){const g=s,v=(A,T)=>{zv(a._repo,a,b),g(A,T)};v.userCallback=s.userCallback,v.context=s.context,s=v}const p=new LT(s,d||void 0),b=new Om(p);return bT(a._repo,a,b),()=>zv(a._repo,a,b)}function Oi(a,n,s,o){return OT(a,"value",n,s,o)}zC(pa);HC(pa);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT="FIREBASE_DATABASE_EMULATOR_HOST",jd={};let kT=!1;function zT(a,n,s,o){const c=n.lastIndexOf(":"),d=n.substring(0,c),p=Wd(d);a.repoInfo_=new Uy(n,p,a.repoInfo_.namespace,a.repoInfo_.webSocketOnly,a.repoInfo_.nodeAdmin,a.repoInfo_.persistenceKey,a.repoInfo_.includeNamespaceInQueryParams,!0,s),o&&(a.authTokenProvider_=o)}function PT(a,n,s,o,c){let d=o||a.options.databaseURL;d===void 0&&(a.options.projectId||ds("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ln("Using default host for project ",a.options.projectId),d=`${a.options.projectId}-default-rtdb.firebaseio.com`);let p=Pv(d,c),b=p.repoInfo,g;typeof process<"u"&&ev&&(g=ev[DT]),g?(d=`http://${g}?ns=${b.namespace}`,p=Pv(d,c),b=p.repoInfo):p.repoInfo.secure;const v=new Jw(a.name,a.options,n);cT("Invalid Firebase Database URL",p),Zt(p.path)||ds("Database URL must point to the root of a Firebase Database (not including a child path).");const A=BT(b,a,v,new $w(a,s));return new jT(A,a)}function IT(a,n){const s=jd[n];(!s||s[a.key]!==a)&&ds(`Database ${n}(${a.repoInfo_}) has already been deleted.`),xT(a),delete s[a.key]}function BT(a,n,s,o){let c=jd[n.name];c||(c={},jd[n.name]=c);let d=c[a.toURLString()];return d&&ds("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),d=new pT(a,kT,s,o),c[a.toURLString()]=d,d}class jT{constructor(n,s){this._repoInternal=n,this.app=s,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(_T(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new pa(this._repo,Wt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(IT(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(n){this._rootInternal===null&&ds("Cannot call "+n+" on a deleted database.")}}function UT(a=Cw(),n){const s=bw(a,"database").getImmediate({identifier:n});if(!s._instanceStarted){const o=aS("database");o&&HT(s,...o)}return s}function HT(a,n,s,o={}){a=lo(a),a._checkNotDeleted("useEmulator");const c=`${n}:${s}`,d=a._repoInternal;if(a._instanceStarted){if(c===a._repoInternal.repoInfo_.host&&Lc(o,d.repoInfo_.emulatorOptions))return;ds("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let p;if(d.repoInfo_.nodeAdmin)o.mockUserToken&&ds('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),p=new Tc(Tc.OWNER);else if(o.mockUserToken){const b=typeof o.mockUserToken=="string"?o.mockUserToken:oS(o.mockUserToken,a.app.options.projectId);p=new Tc(b)}Wd(n)&&(rS(n),cS("Database",!0)),zT(d,c,o,p)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(a){Pw(Ew),Dc(new kl("database",(n,{instanceIdentifier:s})=>{const o=n.getProvider("app").getImmediate(),c=n.getProvider("auth-internal"),d=n.getProvider("app-check-internal");return PT(o,c,d,s)},"PUBLIC").setMultipleInstances(!0)),Wr(nv,iv,a),Wr(nv,iv,"esm2017")}cs.prototype.simpleListen=function(a,n){this.sendRequest("q",{p:a},n)};cs.prototype.echo=function(a,n){this.sendRequest("echo",{d:a},n)};ZT();var qT="firebase",GT="11.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wr(qT,GT,"app");const VT={apiKey:"AIzaSyCczdBoTbwcJlUVZPNocc0UlHUmaN0DMHY",authDomain:"bubblemapar.firebaseapp.com",databaseURL:"https://bubblemapar-default-rtdb.europe-west1.firebasedatabase.app",projectId:"bubblemapar",storageBucket:"bubblemapar.appspot.com",messagingSenderId:"86688271888",appId:"1:86688271888:web:268324fec2a13881bca453"},YT=Sy(VT),oe=UT(YT);function FT(a,n,s,o={}){return{id:a,lat:n,lng:s,r:o.r||30,color:o.color||"#3388ff",...o}}function jv(){return`hsl(${Math.floor(Math.random()*360)}, 70%, 80%)`}const H0=R.createContext();function XT({children:a}){const[n,s]=R.useState(""),[o,c]=R.useState([]),[d,p]=R.useState([]),[b,g]=R.useState([]),[v,A]=R.useState(""),[T,C]=R.useState(null),[P,M]=R.useState([]),[k,B]=R.useState("idle"),[U,Q]=R.useState(!1),[$,ft]=R.useState(!1),[lt,Ct]=R.useState([]),[kt,dt]=R.useState(null),[xt,qt]=R.useState(!1),[Rt,pt]=R.useState([]),[we,Ft]=R.useState([]),[Kt,Y]=R.useState([]),at=async(ot,et)=>{if(ot)try{await Ge(re(oe,`arlibrary/${ot}`),{...et}),console.log("✅ AR mis à jour dans Firebase :",ot,et)}catch(ht){console.error("❌ Erreur updateResource :",ht)}},nt=ot=>{Y(et=>et.some(ht=>ht.id===ot.id)?et.filter(ht=>ht.id!==ot.id):[...et,ot])},jt=async ot=>{if(ot)try{await U0(re(oe,`arlibrary/${ot}`)),Ft(et=>et.filter(ht=>ht.id!==ot)),console.log("🗑 AR supprimé :",ot)}catch(et){console.error("❌ Erreur suppression AR :",et)}},[N,F]=R.useState([]);function it(ot,et){return new Promise(ht=>Oi(ot,Et=>{et(Et),ht()},{onlyOnce:!0}))}const tt=async ot=>{if(!v)return;const et=re(oe,`sessions/${v}/groups`);await it(et,ht=>{const pe=[...ht.val()||[],ot];Ge(et,pe)})};R.useEffect(()=>{if(!v)return;const ot=re(oe,`sessions/${v}/groups`),et=Oi(ot,ht=>{F(ht.val()||[])});return()=>et()},[v]);const ut=async(ot,et)=>{if(!v)return;const ht=re(oe,`sessions/${v}/groups`);await it(ht,Et=>{const en=(Et.val()||[]).map((Ee,pn)=>pn===ot?{...Ee,members:[...Ee.members||[],et]}:Ee);Ge(ht,en)})},gt=async ot=>{if(!v)return;const et=re(oe,`sessions/${v}/groups`);await it(et,ht=>{const pe=(ht.val()||[]).filter((en,Ee)=>Ee!==ot);Ge(et,pe)})},rt=async(ot,et)=>{if(!v)return;const ht=re(oe,`sessions/${v}/groups`);await it(ht,Et=>{const en=(Et.val()||[]).map((Ee,pn)=>pn===ot?{...Ee,members:(Ee.members||[]).filter((va,Nn)=>Nn!==et)}:Ee);Ge(ht,en)})},[ie,Gt]=R.useState(Array(8).fill(null));R.useEffect(()=>{if(!v)return;const ot=re(oe,`sessions/${v}/pads`),et=Oi(ot,ht=>{let Et=ht.val()||[];Array.isArray(Et)||(Et=[]),Et.length<8&&(Et=[...Et,...Array(8-Et.length).fill(null)]),Et.length>8&&(Et=Et.slice(0,8)),Gt(Et)});return()=>et()},[v]);const Tn=async(ot,et)=>{let ht=ie.slice();ht.length<8&&(ht=[...ht,...Array(8-ht.length).fill(null)]),ht.length>8&&(ht=ht.slice(0,8)),ht[ot]=et,await Ge(re(oe,`sessions/${v}/pads`),ht)},Di=async ot=>{const et=ie.map((ht,Et)=>Et===ot?null:ht);await Ge(re(oe,`sessions/${v}/pads`),et)},Zn=R.useRef(null),An=R.useRef(null),gi=R.useRef(null),gs=R.useRef(null),nr=(ot,et)=>{dt({id:ot,type:et}),qt(!0),pt([ot])},ir=()=>dt(null);R.useEffect(()=>{const ot=re(oe,"arlibrary"),et=Oi(ot,ht=>{const Et=ht.val()||{},pe=Object.entries(Et).map(([en,Ee])=>({id:en,...Ee}));Ft(pe.reverse())});return()=>et()},[]),R.useEffect(()=>{v&&(Zn.current=re(oe,`sessions/${v}/bubbles`),An.current=re(oe,`sessions/${v}/links`),gi.current=re(oe,`sessions/${v}/meta`),gs.current=re(oe,`sessions/${v}/participants`))},[v]);const se=R.useCallback(async(ot,et)=>{if(v)try{B("syncing"),await Ge(Zn.current,ot),await Ge(An.current,et),c(ot),p(et),B("idle")}catch(ht){console.error("Erreur syncFirebase :",ht),B("error")}},[v]);R.useEffect(()=>{if(!v||o.length!==0)return;const et={id:"b"+Date.now(),lat:48.85,lng:2.35,r:300,color:"#2288ee"};c([et]),p([]),Ge(re(oe,`sessions/${v}/bubbles`),[et]),Ge(re(oe,`sessions/${v}/links`),[])},[v,o.length]),R.useEffect(()=>{if(!v||U)return;const ot=Oi(Zn.current,pe=>c(pe.val()||[])),et=Oi(An.current,pe=>p(pe.val()||[])),ht=Oi(gi.current,pe=>C(pe.val()||null)),Et=Oi(gs.current,pe=>M(pe.val()||[]));return()=>{ot(),et(),ht(),Et()}},[v,U]);const vs=R.useCallback((ot,et)=>{const ht=o.map(Et=>Et.id===ot?{...Et,...et}:Et);se(ht,d)},[o,d,se]),sr=R.useCallback(ot=>{const et=o.map(ht=>b.includes(ht.id)?{...ht,r:Math.max(5,(ht.r||30)+ot)}:ht);se(et,d)},[o,d,b,se]),_a=()=>{const ot=o.filter(ht=>!b.includes(ht.id)),et=d.filter(ht=>!b.includes(ht.from)&&!b.includes(ht.to));se(ot,et),g([])},vi=()=>{const ot=b.map(et=>{const ht=o.find(pe=>pe.id===et);if(!ht)return null;const Et="b"+Date.now()+Math.random().toString(36).slice(2,5);return{...ht,id:Et,lat:ht.lat+5e-4,lng:ht.lng+5e-4}}).filter(Boolean);se([...o,...ot],d)},ar=()=>{const ot=o.map(et=>b.includes(et.id)?{...et,color:jv()}:et);se(ot,d)},ga=()=>{if(b.length!==2)return;const[ot,et]=b;if(!d.some(Et=>Et.from===ot&&Et.to===et||Et.from===et&&Et.to===ot)){const Et={id:"l"+Date.now(),from:ot,to:et,thickness:10,color:jv()};se(o,[...d,Et])}},mo=()=>{const ot=d.map(et=>b.includes(et.from)||b.includes(et.to)?{...et,thickness:(et.thickness||10)+2}:et);se(o,ot)},po=()=>{const ot=d.map(et=>b.includes(et.from)||b.includes(et.to)?{...et,thickness:Math.max(2,(et.thickness||10)-2)}:et);se(o,ot)},ei=async ot=>{try{const et="ds_"+Date.now();await Ge(re(oe,`designsets/${et}`),{...ot,id:et,createdAt:Date.now()}),console.log("✅ DesignSet enregistré :",et)}catch(et){console.error("❌ Erreur lors de l'enregistrement du DesignSet :",et)}},Ie=async ot=>{if(!(!v||Rt.length===0))try{const et=`sessions/${v}/assignations/${ot}`,ht=Rt.reduce((Et,pe)=>(Et[pe]=!0,Et),{});await Ge(re(oe,et),ht),console.log(`✅ Assignation enregistrée pour ${ot}`,ht),pt([]),qt(!1)}catch(et){console.error("❌ Erreur assignation :",et)}};return R.useEffect(()=>{const ot=re(oe,"designsets"),et=Oi(ot,ht=>{const Et=ht.val()||{},pe=Object.entries(Et).map(([en,Ee])=>({id:en,...Ee}));Ct(pe)});return()=>et()},[]),S.jsx(H0.Provider,{value:{pseudo:n,setPseudo:s,bubbles:o,links:d,selectedIds:b,setSelectedIds:g,sessionCode:v,setSessionCode:A,sessionMeta:T,participants:P,syncStatus:k,isDragging:U,setIsDragging:Q,linkEditMode:$,setLinkEditMode:ft,designSets:lt,setDesignSets:Ct,saveDesignSetToFirebase:ei,assignationTarget:kt,openAssignationModal:nr,closeAssignationModal:ir,assignationMode:xt,setAssignationMode:qt,resources:we,selectedResources:Kt,setSelectedResources:Y,updateResource:at,deleteResource:jt,toggleResourceInSet:nt,assignationSelection:Rt,setAssignationSelection:pt,validerAssignation:Ie,syncFirebase:se,groups:N,setGroups:F,addGroup:tt,addMemberToGroup:ut,removeGroup:gt,removeMemberFromGroup:rt,pads:ie,assignPad:Tn,clearPad:Di,addBubble:(ot,et)=>{const ht="b"+Date.now(),Et=FT(ht,ot,et);se([...o,Et],d)},updateBubble:vs,resizeSelected:sr,deleteSelected:_a,duplicateSelected:vi,colorizeSelected:ar,createLinkBetweenSelected:ga,increaseLinkThickness:mo,decreaseLinkThickness:po},children:a})}const Hn=()=>R.useContext(H0),QT=R.createContext();function WT({children:a}){const[n,s]=R.useState(""),[o,c]=R.useState(!1),[d,p]=R.useState("resonance"),[b,g]=R.useState(null),[v,A]=R.useState([]),[T,C]=R.useState(""),[P,M]=R.useState(""),k=async B=>{if(B.trim()){c(!0),s("");try{await new Promise($=>setTimeout($,1e3));const U=`↪️ Résonance : "${B}"`;s(U);const Q={user:B,bot:U};A($=>[...$,Q]),C($=>$+`
🌱 ${B}
🎶 ${U}
`)}catch{s("❌ Erreur IA")}finally{c(!1)}}};return S.jsx(QT.Provider,{value:{iaOutput:n,setIaOutput:s,iaLoading:o,setIaLoading:c,iaPromptStyle:d,setIaPromptStyle:p,iaMeta:b,setIaMeta:g,history:v,setHistory:A,fullTranscript:T,setFullTranscript:C,sendToIA:k,wikidataSummary:P,setWikidataSummary:M},children:a})}function KT(){const[a,n]=R.useState(""),[s,o]=R.useState(""),[c,d]=R.useState(""),[p,b]=R.useState(!1),[g,v]=R.useState(null),A=Xc(),T=R.useRef(null),{sessionCode:C,setSessionCode:P,bubbles:M,links:k,selectedIds:B}=Hn(),U=g?`${window.location.origin}/cabine/${g.code}/public`:"",Q=()=>{const lt="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";return Array.from({length:6},()=>lt[Math.floor(Math.random()*lt.length)]).join("")},$=async()=>{if(d(""),!s.trim())return d("Nom requis");const lt=Q(),Ct={bubbles:[],links:[],meta:{name:s,createdBy:a||"Anonyme",createdAt:Date.now()}};try{await Ge(re(oe,`sessions/${lt}`),Ct),v({code:lt,name:s}),P(lt)}catch{d("Erreur lors de la création de session")}},ft=()=>{g!=null&&g.code&&A(`/cabine/${g.code}/configreso`)};return R.useEffect(()=>{const lt=T.current,Ct=lt.getContext("2d");let kt=lt.width=window.innerWidth,dt=lt.height=window.innerHeight;const xt=Array.from({length:40},()=>({x:Math.random()*kt,y:Math.random()*dt,r:2+Math.random()*16,dx:(Math.random()-.5)*.4,dy:(Math.random()-.5)*.4}));function qt(){Ct.clearRect(0,0,kt,dt);for(let pt=0;pt<xt.length;pt++)for(let we=pt+1;we<xt.length;we++){const Ft=xt[pt],Kt=xt[we],Y=Math.hypot(Ft.x-Kt.x,Ft.y-Kt.y);Y<100&&(Ct.strokeStyle=`rgba(100, 120, 255, ${1-Y/100})`,Ct.lineWidth=.5,Ct.beginPath(),Ct.moveTo(Ft.x,Ft.y),Ct.lineTo(Kt.x,Kt.y),Ct.stroke())}for(let pt of xt)Ct.beginPath(),Ct.arc(pt.x,pt.y,pt.r,0,10*Math.PI),Ct.fillStyle="rgba(50, 100, 255, 0.5)",Ct.fill(),pt.x+=pt.dx,pt.y+=pt.dy,(pt.x<0||pt.x>kt)&&(pt.dx*=-1),(pt.y<0||pt.y>dt)&&(pt.dy*=-1);requestAnimationFrame(qt)}qt();const Rt=()=>{kt=lt.width=window.innerWidth,dt=lt.height=window.innerHeight};return window.addEventListener("resize",Rt),()=>window.removeEventListener("resize",Rt)},[]),S.jsxs("div",{className:"min-h-screen bg-white text-gray-800 relative font-sans overflow-hidden",children:[S.jsx("canvas",{ref:T,className:"fixed top-0 left-0 w-full h-full z-0"}),S.jsxs("div",{className:"absolute top-10 w-full text-center z-10",children:[S.jsx("h1",{className:"text-6xl font-bold text-gray-900 mb-1 font-[cursive] tracking-wider",children:"BubbleMap"}),S.jsx("p",{className:"text-blue-500 italic text-xl",children:"Designer les résonances"})]}),S.jsxs("div",{className:"relative z-10 max-w-md mx-auto mt-40 bg-white/80 backdrop-blur-lg border border-blue-300 rounded-2xl p-6 shadow-xl",children:[S.jsx("input",{className:"w-full p-3 mb-3 rounded-lg bg-white border border-blue-300 text-gray-700 placeholder-gray-400",placeholder:"Votre pseudo",value:a,onChange:lt=>n(lt.target.value)}),S.jsx("input",{className:"w-full p-3 mb-3 rounded-lg bg-white border border-blue-300 text-gray-700 placeholder-gray-400",placeholder:"Nom de la session",value:s,onChange:lt=>o(lt.target.value)}),S.jsx("button",{onClick:$,className:"w-full py-3 bg-blue-500 hover:bg-blue-400 text-white font-bold rounded-lg",children:"Créer la session"}),c&&S.jsx("p",{className:"mt-2 text-red-600 text-sm",children:c}),g&&S.jsxs("div",{className:"mt-4 text-center text-sm text-blue-800",children:[S.jsxs("p",{children:["✅ Session : ",S.jsx("b",{children:g.code})]}),S.jsx("p",{className:"text-xs mt-2 break-all text-blue-600",children:U}),S.jsx("button",{onClick:()=>{navigator.clipboard.writeText(U),b(!0),setTimeout(()=>b(!1),1e3)},className:"mt-2 px-4 py-2 bg-blue-500 hover:bg-blue-400 text-white text-sm rounded-lg",children:p?"Lien copié !":"Copier le lien"}),S.jsx("button",{onClick:ft,className:"w-full mt-4 py-2 bg-gray-800 hover:bg-gray-600 text-white rounded-lg",children:"Entrer dans la cabine"})]})]}),S.jsx("footer",{className:"absolute bottom-6 w-full text-center text-gray-500 italic z-10",children:"Pier•°"})]})}/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $T=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),JT=a=>a.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,s,o)=>o?o.toUpperCase():s.toLowerCase()),Uv=a=>{const n=JT(a);return n.charAt(0).toUpperCase()+n.slice(1)},Z0=(...a)=>a.filter((n,s,o)=>!!n&&n.trim()!==""&&o.indexOf(n)===s).join(" ").trim(),t2=a=>{for(const n in a)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var e2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2=R.forwardRef(({color:a="currentColor",size:n=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:c="",children:d,iconNode:p,...b},g)=>R.createElement("svg",{ref:g,...e2,width:n,height:n,stroke:a,strokeWidth:o?Number(s)*24/Number(n):s,className:Z0("lucide",c),...!d&&!t2(b)&&{"aria-hidden":"true"},...b},[...p.map(([v,A])=>R.createElement(v,A)),...Array.isArray(d)?d:[d]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=(a,n)=>{const s=R.forwardRef(({className:o,...c},d)=>R.createElement(n2,{ref:d,iconNode:n,className:Z0(`lucide-${$T(Uv(a))}`,`lucide-${a}`,o),...c}));return s.displayName=Uv(a),s};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],s2=Ne("activity",i2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],Hv=Ne("brain-circuit",a2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],o2=Ne("circle",r2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],u2=Ne("copy",l2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]],h2=Ne("flame",c2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],q0=Ne("info",f2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],m2=Ne("link-2",d2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],_2=Ne("link",p2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=[["path",{d:"M18 8c0 3.613-3.869 7.429-5.393 8.795a1 1 0 0 1-1.214 0C9.87 15.429 6 11.613 6 8a6 6 0 0 1 12 0",key:"11u0oz"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M8.714 14h-3.71a1 1 0 0 0-.948.683l-2.004 6A1 1 0 0 0 3 22h18a1 1 0 0 0 .948-1.316l-2-6a1 1 0 0 0-.949-.684h-3.712",key:"q8zwxj"}]],v2=Ne("map-pinned",g2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],b2=Ne("map",y2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],S2=Ne("menu",x2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w2=[["path",{d:"M5 12h14",key:"1ays0h"}]],Zv=Ne("minus",w2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E2=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],C2=Ne("network",E2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2=[["path",{d:"m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z",key:"irua1i"}],["path",{d:"m5 2 5 5",key:"1lls2c"}],["path",{d:"M2 13h15",key:"1hkzvu"}],["path",{d:"M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z",key:"xk76lq"}]],A2=Ne("paint-bucket",T2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],M2=Ne("palette",N2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],L2=Ne("pencil",R2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O2=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],qv=Ne("plus",O2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2=[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],k2=Ne("settings-2",D2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}]],P2=Ne("sparkle",z2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Dm=Ne("trash-2",I2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],j2=Ne("users",B2);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],rh=Ne("x",U2);function G0({isOpen:a,onClose:n,selected:s}){const{bubbles:o,links:c,syncFirebase:d,resources:p=[],sessionCode:b}=Hn(),[g,v]=R.useState([]),[A,T]=R.useState(""),[C,P]=R.useState(!1);if(!a||!s)return null;const M=B=>{v(U=>U.includes(B)?U.filter(Q=>Q!==B):[...U,B])},k=async()=>{if(g.length===0||!s||C)return;P(!0);let B=o,U=c,Q="",$={};s.type==="bulle"?(B=o.map(ft=>ft.id===s.id?{...ft,arIds:[...new Set([...ft.arIds||[],...g])]}:ft),Q=`sessions/${b}/bubbles`,$=B):s.type==="cordon"&&(U=c.map(ft=>ft.id===s.id?{...ft,arIds:[...new Set([...ft.arIds||[],...g])]}:ft),Q=`sessions/${b}/links`,$=U);try{await Ge(re(oe,Q),$),T(`✅ Assignation : ${g.length} AR → ${s.type} ${s.id}`),v([]),s.type==="bulle"&&d($,c),s.type==="cordon"&&d(o,$),setTimeout(()=>{T(""),P(!1),n()},600)}catch(ft){T("❌ Erreur assignation : "+ft.message),P(!1)}};return S.jsx("div",{className:"fixed inset-0 bg-white z-5000 flex justify-center items-start p-8 overflow-y-auto",children:S.jsxs("div",{className:"w-full max-w-lg bg-white p-6 rounded-xl shadow-lg border",children:[S.jsxs("div",{className:"flex justify-between items-center mb-4",children:[S.jsx("h2",{className:"text-xl font-bold text-indigo-700",children:"🎭 Assignation AR"}),S.jsx("button",{onClick:n,className:"text-gray-500 hover:text-black",children:S.jsx(rh,{className:"w-5 h-5"})})]}),S.jsxs("p",{className:"text-sm mb-2 text-gray-700",children:["Assigner un ou plusieurs AR à ",S.jsx("strong",{children:s.id})," (",S.jsx("em",{children:s.type==="bulle"?"Bulle":"Lien"}),")"]}),S.jsxs("div",{className:"border p-2 rounded mb-4 max-h-48 overflow-y-auto text-sm space-y-1",children:[p.length===0&&S.jsx("p",{className:"text-xs text-gray-400",children:"Aucun AR disponible."}),p.map(B=>S.jsxs("label",{className:"flex items-center gap-2",children:[S.jsx("input",{type:"checkbox",checked:g.includes(B.id),onChange:()=>M(B.id),disabled:C}),B.label||B.nom||B.id]},B.id))]}),S.jsx("button",{className:`w-full py-2 rounded text-sm ${g.length===0||C?"bg-gray-300 text-gray-400 cursor-not-allowed":"bg-indigo-600 text-white hover:bg-indigo-700"}`,onClick:k,disabled:g.length===0||C,children:C?"Enregistrement...":"💾 Valider l’assignation"}),A&&S.jsx("div",{className:"mt-4 text-xs bg-gray-50 border rounded p-2 text-center",children:A})]})})}function H2(){const{code:a}=Jx(),{setSessionCode:n,pseudo:s,participantCount:o,bubbles:c=[],links:d=[],arList:p=[],designSets:b=[],assignationTarget:g,closeAssignationModal:v}=Hn(),A=Xc(),C=ps().pathname.split("/").pop(),[P,M]=R.useState(!1),k=R.useRef(null);R.useEffect(()=>{a&&n(a)},[a]),R.useEffect(()=>{const Q=$=>{k.current&&!k.current.contains($.target)&&M(!1)};return P&&document.addEventListener("mousedown",Q),()=>document.removeEventListener("mousedown",Q)},[P]);const B=[{id:"configreso",label:"Réglages",icon:S.jsx(k2,{size:18})},{id:"map",label:"Carte",icon:S.jsx(v2,{size:18})},{id:"orchestrator",label:"A.R.T",icon:S.jsx(M2,{size:18})},{id:"pad",label:"Live",icon:S.jsx(h2,{size:18})},{id:"ia",label:"I.Âme",icon:S.jsx(P2,{size:18})},{id:"infos",label:"Infos",icon:S.jsx(q0,{size:18})}],U=Q=>{var $;M(!1),($=navigator.vibrate)==null||$.call(navigator,20),A(`/cabine/${a}/${Q}`)};return S.jsxs("div",{className:"h-screen flex flex-col overflow-y-auto",children:[S.jsx("button",{onClick:()=>M(!P),"aria-label":"Menu",className:"fixed top-3 right-3 z-50 bg-black text-white rounded px-3 py-2 burger-btn hidden md:block",children:P?S.jsx(rh,{size:24}):S.jsx(S2,{size:24})}),S.jsxs("div",{className:"flex flex-1 relative",children:[S.jsxs("aside",{ref:k,className:`side-menu ${P?"open":""}`,style:{width:280,background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(8px)",borderRight:"1px solid #ddd",boxShadow:"2px 0 8px rgba(0,0,0,0.1)",transform:P?"translateX(0)":"translateX(-100%)",transition:"transform 0.3s ease-in-out",zIndex:40,padding:16},children:[S.jsx("div",{className:"font-bold mb-4 text-lg",children:"Console"}),S.jsxs("div",{className:"mb-4 text-sm",children:[S.jsxs("p",{children:[S.jsx("strong",{children:"Session :"})," ",a]}),S.jsxs("p",{children:[S.jsx("strong",{children:"Pseudo :"})," ",s||"Anonyme"]}),S.jsxs("p",{children:[S.jsx("strong",{children:"Connectés :"})," ",o]})]}),S.jsx("nav",{className:"flex flex-col gap-2",children:B.map(({id:Q,label:$,icon:ft})=>S.jsxs("button",{onClick:()=>U(Q),className:`flex items-center gap-2 px-3 py-2 rounded ${C===Q?"bg-gray-200 font-semibold":""}`,children:[ft,$]},Q))})]}),S.jsx("main",{className:"flex-1 h-full flex flex-col",children:S.jsx(d1,{})})]}),S.jsx("style",{children:`
        @media (max-width: 768px) {
          .burger-btn {
            display: block !important;
          }
          .side-menu {
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            z-index: 60;
          }
        }
      `}),g&&S.jsx(G0,{isOpen:!!g,selected:g,onClose:v,arList:p,designSets:b})]})}function V0(){const[a,n]=R.useState(null),[s,o]=R.useState(null),[c,d]=R.useState(!1),p=async()=>{try{const v=await(await fetch("https://ipapi.co/json/")).json();v!=null&&v.latitude&&(v!=null&&v.longitude)?n({lat:v.latitude,lng:v.longitude}):o("Localisation IP indisponible.")}catch{o("Erreur de fallback IP.")}d(!1)},b=R.useCallback(()=>{if(d(!0),o(null),!navigator.geolocation){o("Géolocalisation non supportée."),p();return}navigator.geolocation.getCurrentPosition(g=>{n({lat:g.coords.latitude,lng:g.coords.longitude}),d(!1)},g=>{o("Erreur GPS : "+g.message),p()},{enableHighAccuracy:!0,timeout:7e3,maximumAge:3e4})},[]);return R.useEffect(()=>{b()},[b]),{coords:a,error:s,loading:c,refresh:b}}function Z2(a){const[n,s]=R.useState(null);return R.useEffect(()=>{a&&fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${a.lat}&longitude=${a.lng}&localityLanguage=fr`).then(o=>o.json()).then(o=>{s({city:o.city||o.locality||o.principalSubdivision,admin1:o.principalSubdivision,country:o.countryName})}).catch(console.error)},[a]),n}function q2(a,n,s=2e3){const o=`
    [out:json][timeout:15];
    (
      node(around:${s},${a},${n})[tourism~"museum|attraction|artwork|viewpoint"];
      node(around:${s},${a},${n})[historic];
    );
    out body;
  `;return fetch("https://overpass-api.de/api/interpreter",{method:"POST",body:o}).then(c=>c.json())}function G2(a,n){const s=`https://nominatim.openstreetmap.org/reverse?format=json&lat=${a}&lon=${n}&zoom=10&addressdetails=1`;return fetch(s,{headers:{"User-Agent":"IAme-app"}}).then(o=>o.json())}const V2=["wayside_cross","cross","yes"];function Y2({onContextReady:a}){const{coords:n,error:s,loading:o,refresh:c}=V0(),[d,p]=R.useState([]);return R.useEffect(()=>{if(!n)return;const{lat:b,lng:g}=n;Promise.all([q2(b,g),G2(b,g)]).then(([v,A])=>{const C=(v.elements||[]).filter(k=>k.tags).map(k=>({name:k.tags.name||k.tags.tourism||k.tags.historic||"",lat:k.lat,lon:k.lon})).filter(k=>k.name&&!V2.includes(k.name.toLowerCase())),P=[...new Set(C.map(k=>k.name))];p(C);const M=A.address||{};a==null||a({coords:n,resume:P,pois:C,city:M.city||M.town||M.village||M.hamlet||"",department:M.county||"",region:M.state||""})}).catch(v=>console.error("Erreur récupération zone :",v))},[n]),S.jsxs("div",{style:{marginBottom:10},children:[S.jsx("button",{onClick:c,disabled:o,children:o?"Recherche GPS...":"Actualiser ma position"}),s&&S.jsx("div",{style:{color:"red"},children:s}),n&&S.jsxs("div",{children:["GPS : ",n.lat.toFixed(4),", ",n.lng.toFixed(4)]}),d.length>0&&S.jsx("ul",{children:d.slice(0,5).map((b,g)=>S.jsx("li",{children:b.name},g))})]})}function F2({city:a,admin1:n,onKeywords:s}){const[o,c]=R.useState([]);return R.useEffect(()=>{if(!a)return;const d=`mythes légendes contes ${a} ${n}`;fetch(`https://fr.wikipedia.org/w/api.php?action=query&list=search&format=json&origin=*&srsearch=${encodeURIComponent(d)}`).then(p=>p.json()).then(p=>{var A;const b=((A=p.query)==null?void 0:A.search)||[],g=b.slice(0,5).map(T=>T.title),v=b.slice(0,5).map(T=>`• ${T.title} : ${T.snippet.replace(/<\/?[^>]+>/g,"")}…`);c(v),s(g)}).catch(()=>{c(["• Aucune légende trouvée."]),s([])})},[a,n]),o.length?S.jsxs("div",{className:"bg-gray-50 p-3 rounded shadow text-sm",children:[S.jsx("h4",{className:"font-semibold mb-2",children:"🧚 Mythes & contes locaux"}),o.map((d,p)=>S.jsx("p",{className:"mb-1",children:d},p))]}):null}const X2="https://openrouter.ai/api/v1/chat/completions",Q2="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";async function W2({context:a="",keywords:n=[],style:s="Résonance"}){var g,v,A,T;const c={Résonance:(C,P)=>`Texte symbolique inspiré de : ${C.join(", ")}. ${P}`,Mythe:(C,P)=>`Invente un mythe enraciné localement autour de : ${C.join(", ")}. ${P}`,Conte:(C,P)=>`Crée un conte initiatique inspiré par : ${C.join(", ")}. ${P}`}[s](n,a),b=(T=(A=(v=(g=(await(await fetch(X2,{method:"POST",headers:{Authorization:`Bearer ${Q2}`,"Content-Type":"application/json"},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"system",content:`
Tu es un générateur poétique de récits incarnés, enracinés dans la mémoire symbolique, sensorielle et existentielle des lieux.
Ta mission est de révéler l’âme d’un territoire à travers des récits inspirants, comme des chants qui relient le passé au présent, le visible à l’invisible, le réel à l’imaginal.
Tu accueilles les mots-clés comme des indices sensibles (formes, sons, croyances, traces, figures historiques ou mythiques) et les tisses en récits profonds, évocateurs, et toujours reliés à la terre.
Ton style est organique, métaphorique, vivant. Tu n’analyses pas : tu fais résonner.`},{role:"user",content:c}],max_tokens:250,temperature:.85})})).json()).choices)==null?void 0:g[0])==null?void 0:v.message)==null?void 0:A.content)==null?void 0:T.trim();return b&&b.length>10?b:"Même si le lieu semble silencieux, écoute ce qu’il murmure sous la surface…"}async function K2({label:a,content:n,type:s="texte",session:o="default",image:c=null}){const d=`ar_${Date.now()}`;return await Ge(re(oe,`arlibrary/${d}`),{id:d,label:a,type:s,content:n,image:c,session:o,createdAt:Date.now()}),d}function $2(a,n){if(!a)return{};const s=a.toLowerCase(),o=[47.2173,-1.5534],c=s.split(/[.!?]\s+/).filter(g=>g.length>20),d=[];["chapelle","forêt","dolmen","lavoir","ruine","colline"].forEach(g=>{s.includes(g)&&d.push(g)});const b={ancrageLocal:/(?:\b(?:bourg|forêt|chapelle|colline|source|ruine|église|lavoir|menhir|dolmen|falaise)\b)/.test(s)?1:0,symbolisation:(s.match(/\b(âme|lien|souffle|souvenir|racine|murmure|voix|mémoire)\b/g)||[]).length,narration:/(il était une fois|lorsqu|un jour|jusqu’à|depuis ce jour)/.test(s)?1:0,commentairesRecyclés:n.commentairesAR||n.commentairesParticipants?1:0,gps:o,textes:c,resume:d};return b.total=b.ancrageLocal+b.narration+b.commentairesRecyclés+Math.min(2,b.symbolisation),b}function J2({texte:a,inputs:n}){const[s,o]=R.useState({});R.useEffect(()=>{o($2(a,n))},[a,n]);const c=d=>d>0?"🟢":"⚪";return S.jsxs("div",{className:"bg-white rounded p-4 shadow mt-4",children:[S.jsx("h3",{className:"font-semibold mb-2",children:"🧭 Vitalité de l'IÂme"}),S.jsxs("ul",{className:"text-sm space-y-1",children:[S.jsxs("li",{children:[c(s.ancrageLocal)," Ancrage dans le territoire"]}),S.jsxs("li",{children:[c(s.symbolisation)," Richesse symbolique (",s.symbolisation||0,")"]}),S.jsxs("li",{children:[c(s.narration)," Structure narrative présente"]}),S.jsxs("li",{children:[c(s.commentairesRecyclés)," Résonance sociale"]})]}),typeof s.total=="number"&&S.jsxs("p",{className:"mt-3 text-xs text-gray-500",children:["Score global : ",s.total," / 5"]})]})}function tA(){const{coords:a}=V0(),n=Z2(a),[s,o]=R.useState([]),[c,d]=R.useState({texteLibre:""}),[p,b]=R.useState("Résonance"),[g,v]=R.useState(null),[A,T]=R.useState(!1),[C,P]=R.useState(""),[M,k]=R.useState(!1),B=async()=>{T(!0);const U=`${c.texteLibre}
${s.join(", ")}`,Q=await W2({context:U,keywords:[],style:p});v(Q),T(!1),k(!1)};return S.jsxs("div",{className:"min-h-screen p-4 flex flex-col",children:[S.jsx("h1",{className:"text-center text-2xl font-bold mb-4",children:"✨ IÂme du lieu"}),S.jsx(Y2,{}),n&&S.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Vous êtes à : ",n.city,", ",n.admin1,", ",n.country]}),(n==null?void 0:n.city)&&S.jsx(F2,{city:n.city,admin1:n.admin1,onKeywords:o}),S.jsx("textarea",{value:c.texteLibre,onChange:U=>d({texteLibre:U.target.value}),placeholder:"Votre inspiration…",className:"w-full p-2 border rounded mb-4",rows:4}),S.jsxs("select",{value:p,onChange:U=>b(U.target.value),className:"w-full p-2 border rounded mb-4",children:[S.jsx("option",{children:"Résonance"}),S.jsx("option",{children:"Mythe"}),S.jsx("option",{children:"Conte"})]}),S.jsx("button",{onClick:B,disabled:A,className:"bg-indigo-600 text-white py-2 rounded mb-4",children:A?"Génération…":"🎭 Générer l’IÂme du lieu"}),g&&S.jsxs("div",{className:"flex-grow overflow-auto",children:[S.jsx("pre",{className:"whitespace-pre-wrap bg-gray-100 p-3 rounded mb-4 text-sm",children:g}),S.jsx(J2,{texte:g,inputs:c}),S.jsxs("div",{className:"mt-4 flex",children:[S.jsx("input",{value:C,onChange:U=>P(U.target.value),placeholder:"Titre de cette Âme…",className:"flex-1 p-2 border rounded mr-2"}),S.jsx("button",{onClick:()=>{K2({label:C,content:g,type:"IAme"}),k(!0)},disabled:M||!C.trim(),className:"bg-green-600 text-white py-2 px-4 rounded",children:M?"✔️ Sauvé":"💾 Sauvegarder"})]})]})]})}function eA({resources:a,onSelect:n}){return a!=null&&a.length?S.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:10,maxHeight:260,overflowY:"auto",margin:"8px 0"},children:a.map(s=>S.jsx("button",{onClick:()=>n(s),style:{background:"#e0e7ff",color:"#222",border:"2px solid #6366f1",borderRadius:8,padding:"11px 5px",fontSize:13,fontWeight:500,cursor:"pointer"},children:s.label||s.nom||s.id},s.id))}):S.jsx("div",{children:"Aucune ressource disponible."})}function nA({pads:a,groups:n,onClickPad:s,onClearPad:o,onPlayPad:c}){const d=Array(8).fill(null).map((p,b)=>a&&a[b]?a[b]:null);return S.jsx("div",{className:`
        grid gap-3 mx-auto
        grid-cols-2
        sm:grid-cols-4
        max-w-md
        `,style:{margin:"30px 0 12px"},children:d.map((p,b)=>{var v,A,T;const g=p!=null&&p.groupId?((v=n.find(C=>C.id===p.groupId))==null?void 0:v.name)||p.groupId:"Aucun";return S.jsxs("div",{className:`
              rounded-xl shadow border
              flex flex-col items-center justify-center
              relative p-3 min-h-[80px] min-w-[70px]
              ${p!=null&&p.ar?"bg-blue-100 border-blue-200":"bg-gray-100 border-gray-300"}
            `,children:[S.jsxs("div",{className:"font-semibold text-base mb-1",children:["Pad ",b+1]}),S.jsx("div",{className:"min-h-[28px] text-sm text-gray-900 truncate max-w-[90%] text-center",children:((A=p==null?void 0:p.ar)==null?void 0:A.label)||((T=p==null?void 0:p.ar)==null?void 0:T.nom)||"Aucun AR"}),S.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Groupe : ",S.jsx("b",{className:"text-gray-700",children:g})]}),S.jsxs("div",{className:"mt-3 flex gap-2",children:[S.jsx("button",{className:"bg-indigo-600 text-white rounded px-3 py-1 text-sm font-bold",onClick:()=>s(b),title:p!=null&&p.ar?"Modifier":"Assigner",children:p!=null&&p.ar?"✏️":"➕"}),(p==null?void 0:p.ar)&&S.jsxs(S.Fragment,{children:[S.jsx("button",{className:"bg-yellow-400 text-gray-900 rounded px-3 py-1 text-sm font-bold",onClick:()=>c(p),title:"Jouer",children:"▶️"}),S.jsx("button",{className:"bg-red-500 text-white rounded px-3 py-1 text-sm font-bold",onClick:()=>o(b),title:"Supprimer",children:"🗑️"})]})]})]},b)})})}function iA(){const{sessionCode:a,pseudo:n,resources:s=[],pads:o,assignPad:c,groups:d}=Hn(),[p,b]=R.useState(null),[g,v]=R.useState(null),[A,T]=R.useState(""),C=B=>{var U,Q;b(B),v(((U=o[B])==null?void 0:U.ar)||null),T(((Q=o[B])==null?void 0:Q.groupId)||"")},P=async()=>{g&&(await c(p,{ar:g,groupId:A}),b(null),v(null),T(""))},M=B=>{c(B,null)},k=B=>{var U,Q,$,ft;alert(`▶️ Diffusion AR: ${((U=B==null?void 0:B.ar)==null?void 0:U.label)||((Q=B==null?void 0:B.ar)==null?void 0:Q.nom)||(($=B==null?void 0:B.ar)==null?void 0:$.id)||"(vide)"}
Groupe: ${((ft=d.find(lt=>lt.id===(B==null?void 0:B.groupId)))==null?void 0:ft.name)||"aucun"}`)};return S.jsxs("div",{className:"w-full max-w-2xl mx-auto min-h-screen bg-gray-50 p-4",children:[S.jsx("h3",{className:"mb-2 font-bold text-lg text-indigo-800",children:"🎛️ Pad DJ Live (AR + Groupe)"}),S.jsxs("div",{className:"text-sm mb-4 text-gray-500",children:[S.jsx("b",{children:"Session :"})," ",a||"aucune",S.jsx("br",{}),S.jsx("b",{children:"Utilisateur :"})," ",n||"Anonyme"]}),S.jsx(nA,{pads:o,groups:d,onClickPad:C,onClearPad:M,onPlayPad:k,activeIdx:p}),p!==null&&S.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black/30",children:S.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-lg max-w-xs w-full relative",children:[S.jsx("div",{className:"mb-3 font-bold text-indigo-800",children:"📚 Sélectionne AR et groupe"}),S.jsx(eA,{resources:s,selectedAR:g,onSelect:v}),S.jsxs("div",{className:"my-3",children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Groupe :"}),S.jsxs("select",{className:"mt-1 w-full border rounded px-2 py-1",value:A,onChange:B=>T(B.target.value),children:[S.jsx("option",{value:"",children:"— Aucun —"}),d.map((B,U)=>S.jsx("option",{value:B.id||B.name,children:B.name},B.id||B.name))]})]}),S.jsx("button",{onClick:P,className:`w-full mt-2 py-2 rounded-lg font-bold ${g?"bg-indigo-600 text-white":"bg-gray-300 text-gray-500"}`,disabled:!g,children:"✅ Assigner à ce pad"}),S.jsx("button",{onClick:()=>b(null),className:"w-full mt-2 py-2 rounded-lg text-indigo-700 bg-indigo-50",children:"Annuler"})]})})]})}function sA(){return S.jsx(iA,{})}function aA({onClose:a}){const[n,s]=R.useState(""),[o,c]=R.useState(""),[d,p]=R.useState(""),{sessionCode:b,pseudo:g,resources:v,saveDesignSetToFirebase:A,selectedResources:T,setSelectedResources:C,toggleResourceInSet:P}=Hn(),M=()=>{if(!n.trim()){p("⚠️ Le titre est requis.");return}A({title:n,description:o,items:T,sessionCode:b,createdBy:g||"anonyme"}),a()},k=U=>U.type==="image"?S.jsx("img",{src:U.url,alt:U.label,className:"h-16 rounded"}):U.type==="audio"?S.jsx("audio",{src:U.url,controls:!0,className:"w-full"}):U.type==="video"?S.jsx("video",{src:U.url,controls:!0,className:"h-20 w-auto rounded"}):U.type==="pdf"?S.jsx("div",{className:"text-xs text-gray-500",children:"📄 PDF"}):S.jsx("a",{href:U.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline text-xs",children:"🌐 Ouvrir lien"}),B=U=>T.some(Q=>Q.id===U.id);return S.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex justify-center items-center p-4",children:S.jsxs("div",{className:"bg-white w-full max-w-4xl rounded-xl p-6 shadow-lg max-h-[90vh] overflow-y-auto",children:[S.jsx("h2",{className:"text-xl font-bold text-indigo-600 mb-4",children:"🎨 Composer un DesignSet"}),S.jsx("input",{type:"text",value:n,onChange:U=>{s(U.target.value),p("")},placeholder:"Titre du DesignSet",className:"w-full mb-2 border px-3 py-1 rounded text-sm"}),S.jsx("textarea",{value:o,onChange:U=>c(U.target.value),placeholder:"Description (facultative)",className:"w-full mb-4 border px-3 py-2 rounded text-sm",rows:2}),S.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:v.map(U=>S.jsxs("div",{className:"flex items-start gap-3 p-2 border rounded relative",children:[S.jsxs("div",{className:"flex-1",children:[S.jsx("div",{className:"font-semibold text-sm",children:U.label||"Sans titre"}),S.jsx("div",{className:"text-xs text-gray-500",children:U.type}),k(U)]}),S.jsx("button",{onClick:()=>P(U),className:`text-xs font-bold px-2 py-1 rounded ${B(U)?"bg-red-100 text-red-600 border border-red-400":"bg-green-100 text-green-600 border border-green-400"}`,children:B(U)?"– Retirer":"+ Ajouter"})]},U.id))}),d&&S.jsx("p",{className:"text-red-500 text-sm mt-4 italic",children:d}),S.jsxs("div",{className:"mt-6 flex justify-between items-center",children:[S.jsxs("span",{className:"text-sm italic text-gray-500",children:[T.length," élément(s) sélectionné(s)"]}),S.jsxs("div",{className:"flex gap-2",children:[S.jsx("button",{onClick:a,className:"text-sm px-3 py-1 border rounded hover:bg-gray-100",children:"✖ Annuler"}),S.jsx("button",{onClick:M,className:"text-sm px-4 py-1 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"💾 Sauvegarder"})]})]})]})})}const rA="dmi4nm3ro",oA="BubMap",lA=`https://api.cloudinary.com/v1_1/${rA}/auto/upload`,Gv=a=>{const n=a.split(".").pop().toLowerCase();return a.includes("soundcloud")||n==="mp3"?"audio":["mp4","mov","webm"].includes(n)?"video":["jpg","jpeg","png","gif","webp"].includes(n)?"image":n==="pdf"?"pdf":"web"};function uA({isOpen:a,onClose:n,onSelect:s,sessionCode:o}){const{resources:c=[],setResources:d}=Hn(),[p,b]=R.useState("import"),[g,v]=R.useState(!1),[A,T]=R.useState(""),[C,P]=R.useState([]),[M,k]=R.useState(!1),B=R.useRef(),[U,Q]=R.useState([]);R.useEffect(()=>{if(!a)return;const dt=re(oe,"arlibrary"),xt=Oi(dt,qt=>{const Rt=qt.val()||{},pt=Object.entries(Rt).map(([we,Ft])=>({id:we,...Ft}));d(pt.reverse())});return()=>xt()},[a]);const $=async dt=>{if(!dt)return;if(v(!0),T("⏳ Envoi en cours..."),dt.type==="text/plain"){try{const Rt=(await dt.text()).split(`
`).map(pt=>pt.trim()).filter(pt=>pt.startsWith("http"));P(Rt),T(`🔍 ${Rt.length} lien(s) détecté(s)`)}catch{T("❌ Erreur fichier texte")}finally{v(!1)}return}const xt=new FormData;xt.append("file",dt),xt.append("upload_preset",oA);try{const pt=(await(await fetch(lA,{method:"POST",body:xt})).json()).secure_url,we=Gv(pt),Ft=dt.name.slice(0,20),Kt={url:pt,type:we,label:Ft,content:"",tag:"",createdAt:Date.now()};Bv(re(oe,"arlibrary"),Kt),T("✅ Importation réussie !")}catch{T("❌ Échec d’import")}finally{v(!1)}},ft=async()=>{for(const dt of C){const xt=Gv(dt),qt={url:dt,type:xt,label:dt.slice(0,30),content:"",tag:"",createdAt:Date.now()};await Bv(re(oe,"arlibrary"),qt)}T("✅ URLs ajoutées"),P([])},lt=async()=>{confirm("🧹 Supprimer tous les fichiers ?")&&await U0(re(oe,"arlibrary"))};if(!a)return null;const Ct=dt=>U.some(xt=>xt.id===dt),kt=dt=>{Q(xt=>Ct(dt.id)?xt.filter(qt=>qt.id!==dt.id):[...xt,dt])};return S.jsx("div",{className:"fixed inset-0 bg-black/50 flex justify-center items-center p-4 z-50",children:S.jsxs("div",{className:"bg-white w-full max-w-lg rounded-xl p-6 shadow-xl relative",children:[S.jsxs("div",{className:"flex justify-between items-center mb-4",children:[S.jsx("h2",{className:"text-lg font-bold text-indigo-600",children:"🎒 Bibliothèque AR"}),S.jsx("button",{onClick:n,className:"text-gray-400 hover:text-red-500 text-xl",children:"✖"})]}),S.jsxs("div",{className:"flex mb-4 border-b",children:[S.jsx("button",{onClick:()=>b("import"),className:`px-4 py-2 text-sm ${p==="import"?"border-b-2 border-indigo-500 font-bold":"text-gray-500"}`,children:"➕ Importer"}),S.jsx("button",{onClick:()=>b("bibliotheque"),className:`px-4 py-2 text-sm ${p==="bibliotheque"?"border-b-2 border-indigo-500 font-bold":"text-gray-500"}`,children:"📁 Fichiers"})]}),p==="import"&&S.jsxs("div",{className:"space-y-4",children:[S.jsx("input",{type:"file",accept:"image/*,video/*,audio/*,application/pdf,text/plain",ref:B,onChange:dt=>$(dt.target.files[0])}),A&&S.jsx("p",{className:"text-sm text-blue-600",children:A}),C.length>0&&S.jsxs("div",{className:"space-y-2",children:[S.jsx("p",{className:"text-sm font-bold text-indigo-600",children:"🧾 Liens détectés :"}),S.jsx("ul",{className:"max-h-32 overflow-y-auto text-xs list-disc list-inside",children:C.map((dt,xt)=>S.jsx("li",{children:S.jsx("a",{href:dt,className:"text-blue-600 underline",target:"_blank",rel:"noreferrer",children:dt})},xt))}),S.jsx("button",{onClick:ft,className:"px-4 py-2 text-sm bg-green-600 text-white rounded",children:"✅ Valider l'import"})]})]}),p==="bibliotheque"&&S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"max-h-[40vh] overflow-y-auto space-y-2",children:S.jsx("div",{className:"max-h-[40vh] overflow-y-auto space-y-2",children:c.map(dt=>S.jsx("div",{className:"border p-2 rounded shadow-sm",children:S.jsxs("div",{className:"flex justify-between items-center",children:[S.jsx("span",{className:"text-sm",children:dt.name}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("a",{href:dt.url,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 underline text-xs",children:"🌐 Ouvrir"}),s&&S.jsx("button",{onClick:()=>kt(dt),className:`ml-4 text-xs underline ${Ct(dt.id)?"text-red-600":"text-green-600"}`,children:Ct(dt.id)?"− Retirer":"+ Ajouter"})]})]})},dt.id))})}),S.jsxs("div",{className:"mt-4 flex flex-col items-end gap-2",children:[S.jsx("button",{onClick:()=>k(!0),className:"text-sm px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"🎨 Composer un DesignSet"}),S.jsx("button",{onClick:lt,className:"text-sm px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"🧹 Vider la bibliothèque"})]})]}),M&&S.jsx(aA,{resources:U,sessionCode:o,onClose:()=>k(!1)})]})})}function cA({ar:a,onClose:n}){const{updateResource:s,deleteResource:o}=Hn(),[c,d]=R.useState((a==null?void 0:a.label)||""),[p,b]=R.useState((a==null?void 0:a.description)||""),g=(a==null?void 0:a.url)||(a==null?void 0:a.src)||(a==null?void 0:a.data),v=(a==null?void 0:a.type)||"text",A=async()=>{if(!(a!=null&&a.id))return alert("Erreur : ID manquant");await s(a.id,{...a,label:c.trim(),description:p.trim()}),n("updated")},T=async()=>{a!=null&&a.id&&(await o(a.id),n("deleted"))},C=()=>{if(!g)return S.jsx("p",{className:"text-xs italic text-gray-400",children:"Aucun contenu."});switch(v){case"text":return S.jsx("pre",{className:"text-xs p-2 bg-gray-100 rounded whitespace-pre-wrap",children:g});case"image":return S.jsx("img",{src:g,alt:"Aperçu",className:"w-full max-h-64 object-contain rounded"});case"audio":return S.jsx("audio",{controls:!0,className:"w-full mt-2",children:S.jsx("source",{src:g})});case"video":return S.jsx("video",{controls:!0,className:"w-full max-h-64 mt-2 rounded",children:S.jsx("source",{src:g})});case"pdf":return S.jsxs(S.Fragment,{children:[S.jsx("iframe",{src:g,className:"w-full h-64 rounded border mt-2"}),S.jsx("a",{href:g,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-indigo-600 underline block mt-1",children:"📄 Ouvrir le PDF"})]});case"web":return S.jsxs(S.Fragment,{children:[S.jsx("iframe",{src:g,className:"w-full h-64 rounded border mt-2"}),S.jsx("a",{href:g,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-indigo-600 underline block mt-1",children:"🌐 Accéder au site"})]});default:return S.jsx("p",{className:"text-xs italic text-gray-400",children:"Type non pris en charge."})}};return S.jsx("div",{className:"fixed inset-0 bg-black/30 z-50 flex justify-center items-center p-4",children:S.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-lg w-full max-w-lg space-y-4",children:[S.jsxs("div",{className:"flex justify-between items-center",children:[S.jsx("h3",{className:"text-lg font-bold text-indigo-700",children:"✏️ Modifier l’AR"}),S.jsx("button",{onClick:()=>n(),className:"text-gray-500 hover:text-black",children:S.jsx(rh,{size:18})})]}),S.jsxs("div",{className:"space-y-3 text-sm",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-gray-600",children:"Titre"}),S.jsx("input",{type:"text",value:c,onChange:P=>d(P.target.value),className:"w-full border px-2 py-1 rounded"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-gray-600",children:"Type"}),S.jsx("input",{type:"text",value:v,disabled:!0,className:"w-full border px-2 py-1 rounded bg-gray-100 text-gray-600"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-gray-600",children:"Description"}),S.jsx("textarea",{value:p,onChange:P=>b(P.target.value),rows:3,className:"w-full border px-2 py-1 rounded"})]})]}),S.jsxs("div",{children:[S.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-1",children:"🔍 Aperçu"}),S.jsx("div",{className:"border p-2 rounded bg-gray-50",children:C()})]}),S.jsxs("div",{className:"flex justify-between mt-4",children:[S.jsxs("button",{onClick:T,className:"text-sm px-3 py-1 bg-red-100 text-red-600 hover:bg-red-200 rounded flex items-center gap-1",children:[S.jsx(Dm,{size:14})," Supprimer"]}),S.jsx("button",{onClick:A,className:"ml-auto text-sm px-4 py-1 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"✅ Valider"})]})]})})}function hA(){const{sessionCode:a,sessionMeta:n,resources:s=[],deleteResource:o}=Hn()||{},[c,d]=R.useState(!1),[p,b]=R.useState(null),[g,v]=R.useState(null),A=M=>{if(!o)return;window.confirm("Supprimer définitivement cet ART?")&&o(M)},T=M=>{b(null),(M==="updated"||M==="deleted")&&(v(M),setTimeout(()=>v(null),2e3))},C=()=>g==="updated"?S.jsx("div",{className:"mb-4 px-4 py-2 bg-green-100 text-green-800 border border-green-300 rounded text-sm",children:"✅  ART modifié avec succès"}):g==="deleted"?S.jsx("div",{className:"mb-4 px-4 py-2 bg-red-100 text-red-700 border border-red-300 rounded text-sm",children:"🗑️ART supprimé"}):null,P=M=>{const k=(M==null?void 0:M.url)||(M==null?void 0:M.src);return k&&{audio:S.jsx("audio",{controls:!0,src:k,className:"w-full mt-2"}),video:S.jsx("video",{controls:!0,src:k,className:"w-full mt-2 rounded"}),image:S.jsx("img",{src:k,alt:M.label,className:"w-full mt-2 rounded shadow"}),pdf:S.jsx("a",{href:k,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 text-xs underline mt-2",children:"📄 Ouvrir le document PDF"}),url:S.jsx("a",{href:k,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 text-xs underline mt-2",children:"🌐 Accéder au lien externe"})}[M.type]||null};return S.jsxs("div",{className:"p-4 text-sm text-gray-800",children:[S.jsx("h2",{className:"text-xl font-bold text-indigo-700 mb-4",children:"🎛 Acteurs Ressources Transnuméristes"}),C(),S.jsx("div",{className:"mb-4",children:S.jsx("button",{onClick:()=>d(!0),className:"px-3 py-1 text-sm bg-gray-200 rounded hover:bg-gray-300",children:"📥 Ouvrir la bibliothèque d’ART"})}),S.jsxs("p",{children:[S.jsx("strong",{children:"Session :"})," ",a||"–"]}),n&&S.jsxs("p",{children:[S.jsx("strong",{children:"Nom :"})," ",n.name," —"," ",S.jsx("strong",{children:"Par :"})," ",n.createdBy]}),S.jsxs("div",{className:"mt-6",children:[S.jsx("h3",{className:"text-md font-semibold mb-2",children:"📚 AR disponibles"}),s.length===0?S.jsx("p",{className:"text-gray-400 italic",children:"Aucun AR chargé."}):S.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:s.map(M=>S.jsxs("div",{className:"border border-gray-300 p-3 rounded bg-white shadow-sm flex flex-col gap-1",children:[S.jsxs("div",{className:"flex justify-between items-center",children:[S.jsx("div",{className:"text-sm font-semibold",children:M.label||"Sans titre"}),S.jsxs("div",{className:"flex gap-2",children:[S.jsx("button",{onClick:()=>b(M.id),className:"text-indigo-600 hover:text-indigo-800",title:"Modifier l’AR",children:S.jsx(L2,{size:16})}),S.jsx("button",{onClick:()=>A(M.id),className:"text-red-500 hover:text-red-700",title:"Supprimer l’AR",children:S.jsx(Dm,{size:16})})]})]}),S.jsxs("div",{className:"text-xs text-gray-600",children:[S.jsx("strong",{children:"Type :"})," ",M.type||"—"]}),M.description&&S.jsx("div",{className:"text-xs text-gray-500 mt-1 italic",children:M.description}),P(M)]},M.id))})]}),c&&S.jsx(uA,{isOpen:!0,onClose:()=>d(!1),sessionCode:a}),p&&S.jsx(cA,{ar:s.find(M=>M.id===p),onClose:T})]})}function fA(a,n){const s=R.useRef(n);R.useEffect(function(){n!==s.current&&a.attributionControl!=null&&(s.current!=null&&a.attributionControl.removeAttribution(s.current),n!=null&&a.attributionControl.addAttribution(n)),s.current=n},[a,n])}function dA(a,n,s){n.center!==s.center&&a.setLatLng(n.center),n.radius!=null&&n.radius!==s.radius&&a.setRadius(n.radius)}const mA=1;function pA(a){return Object.freeze({__version:mA,map:a})}function km(a,n){return Object.freeze({...a,...n})}const zm=R.createContext(null);function Pm(){const a=R.use(zm);if(a==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return a}function Y0(a){function n(s,o){const{instance:c,context:d}=a(s).current;R.useImperativeHandle(o,()=>c);const{children:p}=s;return p==null?null:Ac.createElement(zm,{value:d},p)}return R.forwardRef(n)}function _A(a){function n(s,o){const{instance:c}=a(s).current;return R.useImperativeHandle(o,()=>c),null}return R.forwardRef(n)}function F0(a,n){const s=R.useRef(void 0);R.useEffect(function(){return n!=null&&a.instance.on(n),s.current=n,function(){s.current!=null&&a.instance.off(s.current),s.current=null}},[a,n])}function Im(a,n){const s=a.pane??n.pane;return s?{...a,pane:s}:a}var Cl={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var gA=Cl.exports,Vv;function vA(){return Vv||(Vv=1,function(a,n){(function(s,o){o(n)})(gA,function(s){var o="1.9.4";function c(i){var l,h,_,y;for(h=1,_=arguments.length;h<_;h++){y=arguments[h];for(l in y)i[l]=y[l]}return i}var d=Object.create||function(){function i(){}return function(l){return i.prototype=l,new i}}();function p(i,l){var h=Array.prototype.slice;if(i.bind)return i.bind.apply(i,h.call(arguments,1));var _=h.call(arguments,2);return function(){return i.apply(l,_.length?_.concat(h.call(arguments)):arguments)}}var b=0;function g(i){return"_leaflet_id"in i||(i._leaflet_id=++b),i._leaflet_id}function v(i,l,h){var _,y,w,O;return O=function(){_=!1,y&&(w.apply(h,y),y=!1)},w=function(){_?y=arguments:(i.apply(h,arguments),setTimeout(O,l),_=!0)},w}function A(i,l,h){var _=l[1],y=l[0],w=_-y;return i===_&&h?i:((i-y)%w+w)%w+y}function T(){return!1}function C(i,l){if(l===!1)return i;var h=Math.pow(10,l===void 0?6:l);return Math.round(i*h)/h}function P(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function M(i){return P(i).split(/\s+/)}function k(i,l){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?d(i.options):{});for(var h in l)i.options[h]=l[h];return i.options}function B(i,l,h){var _=[];for(var y in i)_.push(encodeURIComponent(h?y.toUpperCase():y)+"="+encodeURIComponent(i[y]));return(!l||l.indexOf("?")===-1?"?":"&")+_.join("&")}var U=/\{ *([\w_ -]+) *\}/g;function Q(i,l){return i.replace(U,function(h,_){var y=l[_];if(y===void 0)throw new Error("No value provided for variable "+h);return typeof y=="function"&&(y=y(l)),y})}var $=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function ft(i,l){for(var h=0;h<i.length;h++)if(i[h]===l)return h;return-1}var lt="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Ct(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var kt=0;function dt(i){var l=+new Date,h=Math.max(0,16-(l-kt));return kt=l+h,window.setTimeout(i,h)}var xt=window.requestAnimationFrame||Ct("RequestAnimationFrame")||dt,qt=window.cancelAnimationFrame||Ct("CancelAnimationFrame")||Ct("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function Rt(i,l,h){if(h&&xt===dt)i.call(l);else return xt.call(window,p(i,l))}function pt(i){i&&qt.call(window,i)}var we={__proto__:null,extend:c,create:d,bind:p,get lastId(){return b},stamp:g,throttle:v,wrapNum:A,falseFn:T,formatNum:C,trim:P,splitWords:M,setOptions:k,getParamString:B,template:Q,isArray:$,indexOf:ft,emptyImageUrl:lt,requestFn:xt,cancelFn:qt,requestAnimFrame:Rt,cancelAnimFrame:pt};function Ft(){}Ft.extend=function(i){var l=function(){k(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},h=l.__super__=this.prototype,_=d(h);_.constructor=l,l.prototype=_;for(var y in this)Object.prototype.hasOwnProperty.call(this,y)&&y!=="prototype"&&y!=="__super__"&&(l[y]=this[y]);return i.statics&&c(l,i.statics),i.includes&&(Kt(i.includes),c.apply(null,[_].concat(i.includes))),c(_,i),delete _.statics,delete _.includes,_.options&&(_.options=h.options?d(h.options):{},c(_.options,i.options)),_._initHooks=[],_.callInitHooks=function(){if(!this._initHooksCalled){h.callInitHooks&&h.callInitHooks.call(this),this._initHooksCalled=!0;for(var w=0,O=_._initHooks.length;w<O;w++)_._initHooks[w].call(this)}},l},Ft.include=function(i){var l=this.prototype.options;return c(this.prototype,i),i.options&&(this.prototype.options=l,this.mergeOptions(i.options)),this},Ft.mergeOptions=function(i){return c(this.prototype.options,i),this},Ft.addInitHook=function(i){var l=Array.prototype.slice.call(arguments,1),h=typeof i=="function"?i:function(){this[i].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(h),this};function Kt(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=$(i)?i:[i];for(var l=0;l<i.length;l++)i[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Y={on:function(i,l,h){if(typeof i=="object")for(var _ in i)this._on(_,i[_],l);else{i=M(i);for(var y=0,w=i.length;y<w;y++)this._on(i[y],l,h)}return this},off:function(i,l,h){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var _ in i)this._off(_,i[_],l);else{i=M(i);for(var y=arguments.length===1,w=0,O=i.length;w<O;w++)y?this._off(i[w]):this._off(i[w],l,h)}return this},_on:function(i,l,h,_){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(i,l,h)===!1){h===this&&(h=void 0);var y={fn:l,ctx:h};_&&(y.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(y)}},_off:function(i,l,h){var _,y,w;if(this._events&&(_=this._events[i],!!_)){if(arguments.length===1){if(this._firingCount)for(y=0,w=_.length;y<w;y++)_[y].fn=T;delete this._events[i];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var O=this._listens(i,l,h);if(O!==!1){var j=_[O];this._firingCount&&(j.fn=T,this._events[i]=_=_.slice()),_.splice(O,1)}}},fire:function(i,l,h){if(!this.listens(i,h))return this;var _=c({},l,{type:i,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var y=this._events[i];if(y){this._firingCount=this._firingCount+1||1;for(var w=0,O=y.length;w<O;w++){var j=y[w],V=j.fn;j.once&&this.off(i,V,j.ctx),V.call(j.ctx||this,_)}this._firingCount--}}return h&&this._propagateEvent(_),this},listens:function(i,l,h,_){typeof i!="string"&&console.warn('"string" type argument expected');var y=l;typeof l!="function"&&(_=!!l,y=void 0,h=void 0);var w=this._events&&this._events[i];if(w&&w.length&&this._listens(i,y,h)!==!1)return!0;if(_){for(var O in this._eventParents)if(this._eventParents[O].listens(i,l,h,_))return!0}return!1},_listens:function(i,l,h){if(!this._events)return!1;var _=this._events[i]||[];if(!l)return!!_.length;h===this&&(h=void 0);for(var y=0,w=_.length;y<w;y++)if(_[y].fn===l&&_[y].ctx===h)return y;return!1},once:function(i,l,h){if(typeof i=="object")for(var _ in i)this._on(_,i[_],l,!0);else{i=M(i);for(var y=0,w=i.length;y<w;y++)this._on(i[y],l,h,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[g(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[g(i)],this},_propagateEvent:function(i){for(var l in this._eventParents)this._eventParents[l].fire(i.type,c({layer:i.target,propagatedFrom:i.target},i),!0)}};Y.addEventListener=Y.on,Y.removeEventListener=Y.clearAllEventListeners=Y.off,Y.addOneTimeEventListener=Y.once,Y.fireEvent=Y.fire,Y.hasEventListeners=Y.listens;var at=Ft.extend(Y);function nt(i,l,h){this.x=h?Math.round(i):i,this.y=h?Math.round(l):l}var jt=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};nt.prototype={clone:function(){return new nt(this.x,this.y)},add:function(i){return this.clone()._add(N(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(N(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new nt(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new nt(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=jt(this.x),this.y=jt(this.y),this},distanceTo:function(i){i=N(i);var l=i.x-this.x,h=i.y-this.y;return Math.sqrt(l*l+h*h)},equals:function(i){return i=N(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=N(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+C(this.x)+", "+C(this.y)+")"}};function N(i,l,h){return i instanceof nt?i:$(i)?new nt(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new nt(i.x,i.y):new nt(i,l,h)}function F(i,l){if(i)for(var h=l?[i,l]:i,_=0,y=h.length;_<y;_++)this.extend(h[_])}F.prototype={extend:function(i){var l,h;if(!i)return this;if(i instanceof nt||typeof i[0]=="number"||"x"in i)l=h=N(i);else if(i=it(i),l=i.min,h=i.max,!l||!h)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=h.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(h.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(h.y,this.max.y)),this},getCenter:function(i){return N((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return N(this.min.x,this.max.y)},getTopRight:function(){return N(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var l,h;return typeof i[0]=="number"||i instanceof nt?i=N(i):i=it(i),i instanceof F?(l=i.min,h=i.max):l=h=i,l.x>=this.min.x&&h.x<=this.max.x&&l.y>=this.min.y&&h.y<=this.max.y},intersects:function(i){i=it(i);var l=this.min,h=this.max,_=i.min,y=i.max,w=y.x>=l.x&&_.x<=h.x,O=y.y>=l.y&&_.y<=h.y;return w&&O},overlaps:function(i){i=it(i);var l=this.min,h=this.max,_=i.min,y=i.max,w=y.x>l.x&&_.x<h.x,O=y.y>l.y&&_.y<h.y;return w&&O},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var l=this.min,h=this.max,_=Math.abs(l.x-h.x)*i,y=Math.abs(l.y-h.y)*i;return it(N(l.x-_,l.y-y),N(h.x+_,h.y+y))},equals:function(i){return i?(i=it(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function it(i,l){return!i||i instanceof F?i:new F(i,l)}function tt(i,l){if(i)for(var h=l?[i,l]:i,_=0,y=h.length;_<y;_++)this.extend(h[_])}tt.prototype={extend:function(i){var l=this._southWest,h=this._northEast,_,y;if(i instanceof gt)_=i,y=i;else if(i instanceof tt){if(_=i._southWest,y=i._northEast,!_||!y)return this}else return i?this.extend(rt(i)||ut(i)):this;return!l&&!h?(this._southWest=new gt(_.lat,_.lng),this._northEast=new gt(y.lat,y.lng)):(l.lat=Math.min(_.lat,l.lat),l.lng=Math.min(_.lng,l.lng),h.lat=Math.max(y.lat,h.lat),h.lng=Math.max(y.lng,h.lng)),this},pad:function(i){var l=this._southWest,h=this._northEast,_=Math.abs(l.lat-h.lat)*i,y=Math.abs(l.lng-h.lng)*i;return new tt(new gt(l.lat-_,l.lng-y),new gt(h.lat+_,h.lng+y))},getCenter:function(){return new gt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new gt(this.getNorth(),this.getWest())},getSouthEast:function(){return new gt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof gt||"lat"in i?i=rt(i):i=ut(i);var l=this._southWest,h=this._northEast,_,y;return i instanceof tt?(_=i.getSouthWest(),y=i.getNorthEast()):_=y=i,_.lat>=l.lat&&y.lat<=h.lat&&_.lng>=l.lng&&y.lng<=h.lng},intersects:function(i){i=ut(i);var l=this._southWest,h=this._northEast,_=i.getSouthWest(),y=i.getNorthEast(),w=y.lat>=l.lat&&_.lat<=h.lat,O=y.lng>=l.lng&&_.lng<=h.lng;return w&&O},overlaps:function(i){i=ut(i);var l=this._southWest,h=this._northEast,_=i.getSouthWest(),y=i.getNorthEast(),w=y.lat>l.lat&&_.lat<h.lat,O=y.lng>l.lng&&_.lng<h.lng;return w&&O},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,l){return i?(i=ut(i),this._southWest.equals(i.getSouthWest(),l)&&this._northEast.equals(i.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ut(i,l){return i instanceof tt?i:new tt(i,l)}function gt(i,l,h){if(isNaN(i)||isNaN(l))throw new Error("Invalid LatLng object: ("+i+", "+l+")");this.lat=+i,this.lng=+l,h!==void 0&&(this.alt=+h)}gt.prototype={equals:function(i,l){if(!i)return!1;i=rt(i);var h=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return h<=(l===void 0?1e-9:l)},toString:function(i){return"LatLng("+C(this.lat,i)+", "+C(this.lng,i)+")"},distanceTo:function(i){return Gt.distance(this,rt(i))},wrap:function(){return Gt.wrapLatLng(this)},toBounds:function(i){var l=180*i/40075017,h=l/Math.cos(Math.PI/180*this.lat);return ut([this.lat-l,this.lng-h],[this.lat+l,this.lng+h])},clone:function(){return new gt(this.lat,this.lng,this.alt)}};function rt(i,l,h){return i instanceof gt?i:$(i)&&typeof i[0]!="object"?i.length===3?new gt(i[0],i[1],i[2]):i.length===2?new gt(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new gt(i.lat,"lng"in i?i.lng:i.lon,i.alt):l===void 0?null:new gt(i,l,h)}var ie={latLngToPoint:function(i,l){var h=this.projection.project(i),_=this.scale(l);return this.transformation._transform(h,_)},pointToLatLng:function(i,l){var h=this.scale(l),_=this.transformation.untransform(i,h);return this.projection.unproject(_)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var l=this.projection.bounds,h=this.scale(i),_=this.transformation.transform(l.min,h),y=this.transformation.transform(l.max,h);return new F(_,y)},infinite:!1,wrapLatLng:function(i){var l=this.wrapLng?A(i.lng,this.wrapLng,!0):i.lng,h=this.wrapLat?A(i.lat,this.wrapLat,!0):i.lat,_=i.alt;return new gt(h,l,_)},wrapLatLngBounds:function(i){var l=i.getCenter(),h=this.wrapLatLng(l),_=l.lat-h.lat,y=l.lng-h.lng;if(_===0&&y===0)return i;var w=i.getSouthWest(),O=i.getNorthEast(),j=new gt(w.lat-_,w.lng-y),V=new gt(O.lat-_,O.lng-y);return new tt(j,V)}},Gt=c({},ie,{wrapLng:[-180,180],R:6371e3,distance:function(i,l){var h=Math.PI/180,_=i.lat*h,y=l.lat*h,w=Math.sin((l.lat-i.lat)*h/2),O=Math.sin((l.lng-i.lng)*h/2),j=w*w+Math.cos(_)*Math.cos(y)*O*O,V=2*Math.atan2(Math.sqrt(j),Math.sqrt(1-j));return this.R*V}}),Tn=6378137,Di={R:Tn,MAX_LATITUDE:85.0511287798,project:function(i){var l=Math.PI/180,h=this.MAX_LATITUDE,_=Math.max(Math.min(h,i.lat),-h),y=Math.sin(_*l);return new nt(this.R*i.lng*l,this.R*Math.log((1+y)/(1-y))/2)},unproject:function(i){var l=180/Math.PI;return new gt((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*l,i.x*l/this.R)},bounds:function(){var i=Tn*Math.PI;return new F([-i,-i],[i,i])}()};function Zn(i,l,h,_){if($(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=l,this._c=h,this._d=_}Zn.prototype={transform:function(i,l){return this._transform(i.clone(),l)},_transform:function(i,l){return l=l||1,i.x=l*(this._a*i.x+this._b),i.y=l*(this._c*i.y+this._d),i},untransform:function(i,l){return l=l||1,new nt((i.x/l-this._b)/this._a,(i.y/l-this._d)/this._c)}};function An(i,l,h,_){return new Zn(i,l,h,_)}var gi=c({},Gt,{code:"EPSG:3857",projection:Di,transformation:function(){var i=.5/(Math.PI*Di.R);return An(i,.5,-i,.5)}()}),gs=c({},gi,{code:"EPSG:900913"});function nr(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function ir(i,l){var h="",_,y,w,O,j,V;for(_=0,w=i.length;_<w;_++){for(j=i[_],y=0,O=j.length;y<O;y++)V=j[y],h+=(y?"L":"M")+V.x+" "+V.y;h+=l?yt.svg?"z":"x":""}return h||"M0 0"}var se=document.documentElement.style,vs="ActiveXObject"in window,sr=vs&&!document.addEventListener,_a="msLaunchUri"in navigator&&!("documentMode"in document),vi=_n("webkit"),ar=_n("android"),ga=_n("android 2")||_n("android 3"),mo=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),po=ar&&_n("Google")&&mo<537&&!("AudioNode"in window),ei=!!window.opera,Ie=!_a&&_n("chrome"),ot=_n("gecko")&&!vi&&!ei&&!vs,et=!Ie&&_n("safari"),ht=_n("phantom"),Et="OTransition"in se,pe=navigator.platform.indexOf("Win")===0,en=vs&&"transition"in se,Ee="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ga,pn="MozPerspective"in se,va=!window.L_DISABLE_3D&&(en||Ee||pn)&&!Et&&!ht,Nn=typeof orientation<"u"||_n("mobile"),lh=Nn&&vi,Kl=Nn&&Ee,_o=!window.PointerEvent&&window.MSPointerEvent,rr=!!(window.PointerEvent||_o),ys="ontouchstart"in window||!!window.TouchEvent,uh=!window.L_NO_TOUCH&&(ys||rr),$l=Nn&&ei,Jl=Nn&&ot,go=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,vo=function(){var i=!1;try{var l=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",T,l),window.removeEventListener("testPassiveEventSupport",T,l)}catch{}return i}(),tu=function(){return!!document.createElement("canvas").getContext}(),yo=!!(document.createElementNS&&nr("svg").createSVGRect),yi=!!yo&&function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Be=!yo&&function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var l=i.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),nn=navigator.platform.indexOf("Mac")===0,bs=navigator.platform.indexOf("Linux")===0;function _n(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var yt={ie:vs,ielt9:sr,edge:_a,webkit:vi,android:ar,android23:ga,androidStock:po,opera:ei,chrome:Ie,gecko:ot,safari:et,phantom:ht,opera12:Et,win:pe,ie3d:en,webkit3d:Ee,gecko3d:pn,any3d:va,mobile:Nn,mobileWebkit:lh,mobileWebkit3d:Kl,msPointer:_o,pointer:rr,touch:uh,touchNative:ys,mobileOpera:$l,mobileGecko:Jl,retina:go,passiveEvents:vo,canvas:tu,svg:yo,vml:Be,inlineSvg:yi,mac:nn,linux:bs},eu=yt.msPointer?"MSPointerDown":"pointerdown",bo=yt.msPointer?"MSPointerMove":"pointermove",xs=yt.msPointer?"MSPointerUp":"pointerup",or=yt.msPointer?"MSPointerCancel":"pointercancel",bi={touchstart:eu,touchmove:bo,touchend:xs,touchcancel:or},ki={touchstart:su,touchmove:ya,touchend:ya,touchcancel:ya},qn={},zi=!1;function Le(i,l,h){return l==="touchstart"&&ch(),ki[l]?(h=ki[l].bind(this,h),i.addEventListener(bi[l],h,!1),h):(console.warn("wrong event specified:",l),T)}function nu(i,l,h){if(!bi[l]){console.warn("wrong event specified:",l);return}i.removeEventListener(bi[l],h,!1)}function iu(i){qn[i.pointerId]=i}function Pi(i){qn[i.pointerId]&&(qn[i.pointerId]=i)}function Ii(i){delete qn[i.pointerId]}function ch(){zi||(document.addEventListener(eu,iu,!0),document.addEventListener(bo,Pi,!0),document.addEventListener(xs,Ii,!0),document.addEventListener(or,Ii,!0),zi=!0)}function ya(i,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var h in qn)l.touches.push(qn[h]);l.changedTouches=[l],i(l)}}function su(i,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&Ce(l),ya(i,l)}function hh(i){var l={},h,_;for(_ in i)h=i[_],l[_]=h&&h.bind?h.bind(i):h;return i=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var lr=200;function ur(i,l){i.addEventListener("dblclick",l);var h=0,_;function y(w){if(w.detail!==1){_=w.detail;return}if(!(w.pointerType==="mouse"||w.sourceCapabilities&&!w.sourceCapabilities.firesTouchEvents)){var O=wo(w);if(!(O.some(function(V){return V instanceof HTMLLabelElement&&V.attributes.for})&&!O.some(function(V){return V instanceof HTMLInputElement||V instanceof HTMLSelectElement}))){var j=Date.now();j-h<=lr?(_++,_===2&&l(hh(w))):_=1,h=j}}}return i.addEventListener("click",y),{dblclick:l,simDblclick:y}}function ni(i,l){i.removeEventListener("dblclick",l.dblclick),i.removeEventListener("click",l.simDblclick)}var ba=Cs(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ss=Cs(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Bi=Ss==="webkitTransition"||Ss==="OTransition"?Ss+"End":"transitionend";function cr(i){return typeof i=="string"?document.getElementById(i):i}function ji(i,l){var h=i.style[l]||i.currentStyle&&i.currentStyle[l];if((!h||h==="auto")&&document.defaultView){var _=document.defaultView.getComputedStyle(i,null);h=_?_[l]:null}return h==="auto"?null:h}function Vt(i,l,h){var _=document.createElement(i);return _.className=l||"",h&&h.appendChild(_),_}function ue(i){var l=i.parentNode;l&&l.removeChild(i)}function Xe(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function Ui(i){var l=i.parentNode;l&&l.lastChild!==i&&l.appendChild(i)}function ws(i){var l=i.parentNode;l&&l.firstChild!==i&&l.insertBefore(i,l.firstChild)}function Es(i,l){if(i.classList!==void 0)return i.classList.contains(l);var h=Qe(i);return h.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(h)}function Lt(i,l){if(i.classList!==void 0)for(var h=M(l),_=0,y=h.length;_<y;_++)i.classList.add(h[_]);else if(!Es(i,l)){var w=Qe(i);xo(i,(w?w+" ":"")+l)}}function ce(i,l){i.classList!==void 0?i.classList.remove(l):xo(i,P((" "+Qe(i)+" ").replace(" "+l+" "," ")))}function xo(i,l){i.className.baseVal===void 0?i.className=l:i.className.baseVal=l}function Qe(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function sn(i,l){"opacity"in i.style?i.style.opacity=l:"filter"in i.style&&au(i,l)}function au(i,l){var h=!1,_="DXImageTransform.Microsoft.Alpha";try{h=i.filters.item(_)}catch{if(l===1)return}l=Math.round(l*100),h?(h.Enabled=l!==100,h.Opacity=l):i.style.filter+=" progid:"+_+"(opacity="+l+")"}function Cs(i){for(var l=document.documentElement.style,h=0;h<i.length;h++)if(i[h]in l)return i[h];return!1}function gn(i,l,h){var _=l||new nt(0,0);i.style[ba]=(yt.ie3d?"translate("+_.x+"px,"+_.y+"px)":"translate3d("+_.x+"px,"+_.y+"px,0)")+(h?" scale("+h+")":"")}function be(i,l){i._leaflet_pos=l,yt.any3d?gn(i,l):(i.style.left=l.x+"px",i.style.top=l.y+"px")}function xi(i){return i._leaflet_pos||new nt(0,0)}var Gn,xa,hr;if("onselectstart"in document)Gn=function(){Mt(window,"selectstart",Ce)},xa=function(){Xt(window,"selectstart",Ce)};else{var Ts=Cs(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Gn=function(){if(Ts){var i=document.documentElement.style;hr=i[Ts],i[Ts]="none"}},xa=function(){Ts&&(document.documentElement.style[Ts]=hr,hr=void 0)}}function Sa(){Mt(window,"dragstart",Ce)}function So(){Xt(window,"dragstart",Ce)}var fr,As;function wa(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(Ns(),fr=i,As=i.style.outlineStyle,i.style.outlineStyle="none",Mt(window,"keydown",Ns))}function Ns(){fr&&(fr.style.outlineStyle=As,fr=void 0,As=void 0,Xt(window,"keydown",Ns))}function Hi(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function Si(i){var l=i.getBoundingClientRect();return{x:l.width/i.offsetWidth||1,y:l.height/i.offsetHeight||1,boundingClientRect:l}}var ru={__proto__:null,TRANSFORM:ba,TRANSITION:Ss,TRANSITION_END:Bi,get:cr,getStyle:ji,create:Vt,remove:ue,empty:Xe,toFront:Ui,toBack:ws,hasClass:Es,addClass:Lt,removeClass:ce,setClass:xo,getClass:Qe,setOpacity:sn,testProp:Cs,setTransform:gn,setPosition:be,getPosition:xi,get disableTextSelection(){return Gn},get enableTextSelection(){return xa},disableImageDrag:Sa,enableImageDrag:So,preventOutline:wa,restoreOutline:Ns,getSizedParentNode:Hi,getScale:Si};function Mt(i,l,h,_){if(l&&typeof l=="object")for(var y in l)Zi(i,y,l[y],h);else{l=M(l);for(var w=0,O=l.length;w<O;w++)Zi(i,l[w],h,_)}return this}var Mn="_leaflet_events";function Xt(i,l,h,_){if(arguments.length===1)Vn(i),delete i[Mn];else if(l&&typeof l=="object")for(var y in l)Yn(i,y,l[y],h);else if(l=M(l),arguments.length===2)Vn(i,function(j){return ft(l,j)!==-1});else for(var w=0,O=l.length;w<O;w++)Yn(i,l[w],h,_);return this}function Vn(i,l){for(var h in i[Mn]){var _=h.split(/\d/)[0];(!l||l(_))&&Yn(i,_,null,null,h)}}var Ea={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Zi(i,l,h,_){var y=l+g(h)+(_?"_"+g(_):"");if(i[Mn]&&i[Mn][y])return this;var w=function(j){return h.call(_||i,j||window.event)},O=w;!yt.touchNative&&yt.pointer&&l.indexOf("touch")===0?w=Le(i,l,w):yt.touch&&l==="dblclick"?w=ur(i,w):"addEventListener"in i?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?i.addEventListener(Ea[l]||l,w,yt.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(w=function(j){j=j||window.event,Gi(i,j)&&O(j)},i.addEventListener(Ea[l],w,!1)):i.addEventListener(l,O,!1):i.attachEvent("on"+l,w),i[Mn]=i[Mn]||{},i[Mn][y]=w}function Yn(i,l,h,_,y){y=y||l+g(h)+(_?"_"+g(_):"");var w=i[Mn]&&i[Mn][y];if(!w)return this;!yt.touchNative&&yt.pointer&&l.indexOf("touch")===0?nu(i,l,w):yt.touch&&l==="dblclick"?ni(i,w):"removeEventListener"in i?i.removeEventListener(Ea[l]||l,w,!1):i.detachEvent("on"+l,w),i[Mn][y]=null}function ii(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function Ms(i){return Zi(i,"wheel",ii),this}function Rs(i){return Mt(i,"mousedown touchstart dblclick contextmenu",ii),i._leaflet_disable_click=!0,this}function Ce(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function Fn(i){return Ce(i),ii(i),this}function wo(i){if(i.composedPath)return i.composedPath();for(var l=[],h=i.target;h;)l.push(h),h=h.parentNode;return l}function We(i,l){if(!l)return new nt(i.clientX,i.clientY);var h=Si(l),_=h.boundingClientRect;return new nt((i.clientX-_.left)/h.x-l.clientLeft,(i.clientY-_.top)/h.y-l.clientTop)}var qi=yt.linux&&yt.chrome?window.devicePixelRatio:yt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ca(i){return yt.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/qi:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function Gi(i,l){var h=l.relatedTarget;if(!h)return!0;try{for(;h&&h!==i;)h=h.parentNode}catch{return!1}return h!==i}var fh={__proto__:null,on:Mt,off:Xt,stopPropagation:ii,disableScrollPropagation:Ms,disableClickPropagation:Rs,preventDefault:Ce,stop:Fn,getPropagationPath:wo,getMousePosition:We,getWheelDelta:Ca,isExternalTarget:Gi,addListener:Mt,removeListener:Xt},dr=at.extend({run:function(i,l,h,_){this.stop(),this._el=i,this._inProgress=!0,this._duration=h||.25,this._easeOutPower=1/Math.max(_||.5,.2),this._startPos=xi(i),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Rt(this._animate,this),this._step()},_step:function(i){var l=+new Date-this._startTime,h=this._duration*1e3;l<h?this._runFrame(this._easeOut(l/h),i):(this._runFrame(1),this._complete())},_runFrame:function(i,l){var h=this._startPos.add(this._offset.multiplyBy(i));l&&h._round(),be(this._el,h),this.fire("step")},_complete:function(){pt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),zt=at.extend({options:{crs:gi,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,l){l=k(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=p(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(rt(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ss&&yt.any3d&&!yt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Mt(this._proxy,Bi,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,l,h){if(l=l===void 0?this._zoom:this._limitZoom(l),i=this._limitCenter(rt(i),l,this.options.maxBounds),h=h||{},this._stop(),this._loaded&&!h.reset&&h!==!0){h.animate!==void 0&&(h.zoom=c({animate:h.animate},h.zoom),h.pan=c({animate:h.animate,duration:h.duration},h.pan));var _=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,l,h.zoom):this._tryAnimatedPan(i,h.pan);if(_)return clearTimeout(this._sizeTimer),this}return this._resetView(i,l,h.pan&&h.pan.noMoveStart),this},setZoom:function(i,l){return this._loaded?this.setView(this.getCenter(),i,{zoom:l}):(this._zoom=i,this)},zoomIn:function(i,l){return i=i||(yt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,l)},zoomOut:function(i,l){return i=i||(yt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,l)},setZoomAround:function(i,l,h){var _=this.getZoomScale(l),y=this.getSize().divideBy(2),w=i instanceof nt?i:this.latLngToContainerPoint(i),O=w.subtract(y).multiplyBy(1-1/_),j=this.containerPointToLatLng(y.add(O));return this.setView(j,l,{zoom:h})},_getBoundsCenterZoom:function(i,l){l=l||{},i=i.getBounds?i.getBounds():ut(i);var h=N(l.paddingTopLeft||l.padding||[0,0]),_=N(l.paddingBottomRight||l.padding||[0,0]),y=this.getBoundsZoom(i,!1,h.add(_));if(y=typeof l.maxZoom=="number"?Math.min(l.maxZoom,y):y,y===1/0)return{center:i.getCenter(),zoom:y};var w=_.subtract(h).divideBy(2),O=this.project(i.getSouthWest(),y),j=this.project(i.getNorthEast(),y),V=this.unproject(O.add(j).divideBy(2).add(w),y);return{center:V,zoom:y}},fitBounds:function(i,l){if(i=ut(i),!i.isValid())throw new Error("Bounds are not valid.");var h=this._getBoundsCenterZoom(i,l);return this.setView(h.center,h.zoom,l)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,l){return this.setView(i,this._zoom,{pan:l})},panBy:function(i,l){if(i=N(i).round(),l=l||{},!i.x&&!i.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new dr,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){Lt(this._mapPane,"leaflet-pan-anim");var h=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,h,l.duration||.25,l.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,l,h){if(h=h||{},h.animate===!1||!yt.any3d)return this.setView(i,l,h);this._stop();var _=this.project(this.getCenter()),y=this.project(i),w=this.getSize(),O=this._zoom;i=rt(i),l=l===void 0?O:l;var j=Math.max(w.x,w.y),V=j*this.getZoomScale(O,l),J=y.distanceTo(_)||1,ct=1.42,mt=ct*ct;function vt(ge){var Wn=ge?-1:1,ri=ge?V:j,Ai=V*V-j*j+Wn*mt*mt*J*J,oi=2*ri*mt*J,Ba=Ai/oi,Tr=Math.sqrt(Ba*Ba+1)-Ba,ja=Tr<1e-9?-18:Math.log(Tr);return ja}function Nt(ge){return(Math.exp(ge)-Math.exp(-ge))/2}function he(ge){return(Math.exp(ge)+Math.exp(-ge))/2}function xe(ge){return Nt(ge)/he(ge)}var Ue=vt(0);function vn(ge){return j*(he(Ue)/he(Ue+ct*ge))}function Cu(ge){return j*(he(Ue)*xe(Ue+ct*ge)-Nt(Ue))/mt}function Tu(ge){return 1-Math.pow(1-ge,1.5)}var Ia=Date.now(),Zs=(vt(1)-Ue)/ct,Au=h.duration?1e3*h.duration:1e3*Zs*.8;function qs(){var ge=(Date.now()-Ia)/Au,Wn=Tu(ge)*Zs;ge<=1?(this._flyToFrame=Rt(qs,this),this._move(this.unproject(_.add(y.subtract(_).multiplyBy(Cu(Wn)/J)),O),this.getScaleZoom(j/vn(Wn),O),{flyTo:!0})):this._move(i,l)._moveEnd(!0)}return this._moveStart(!0,h.noMoveStart),qs.call(this),this},flyToBounds:function(i,l){var h=this._getBoundsCenterZoom(i,l);return this.flyTo(h.center,h.zoom,l)},setMaxBounds:function(i){return i=ut(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var l=this.options.minZoom;return this.options.minZoom=i,this._loaded&&l!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var l=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&l!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,l){this._enforcingBounds=!0;var h=this.getCenter(),_=this._limitCenter(h,this._zoom,ut(i));return h.equals(_)||this.panTo(_,l),this._enforcingBounds=!1,this},panInside:function(i,l){l=l||{};var h=N(l.paddingTopLeft||l.padding||[0,0]),_=N(l.paddingBottomRight||l.padding||[0,0]),y=this.project(this.getCenter()),w=this.project(i),O=this.getPixelBounds(),j=it([O.min.add(h),O.max.subtract(_)]),V=j.getSize();if(!j.contains(w)){this._enforcingBounds=!0;var J=w.subtract(j.getCenter()),ct=j.extend(w).getSize().subtract(V);y.x+=J.x<0?-ct.x:ct.x,y.y+=J.y<0?-ct.y:ct.y,this.panTo(this.unproject(y),l),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=c({animate:!1,pan:!0},i===!0?{animate:!0}:i);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var h=this.getSize(),_=l.divideBy(2).round(),y=h.divideBy(2).round(),w=_.subtract(y);return!w.x&&!w.y?this:(i.animate&&i.pan?this.panBy(w):(i.pan&&this._rawPanBy(w),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(p(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:h}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=c({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=p(this._handleGeolocationResponse,this),h=p(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,h,i):navigator.geolocation.getCurrentPosition(l,h,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var l=i.code,h=i.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+h+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var l=i.coords.latitude,h=i.coords.longitude,_=new gt(l,h),y=_.toBounds(i.coords.accuracy*2),w=this._locateOptions;if(w.setView){var O=this.getBoundsZoom(y);this.setView(_,w.maxZoom?Math.min(O,w.maxZoom):O)}var j={latlng:_,bounds:y,timestamp:i.timestamp};for(var V in i.coords)typeof i.coords[V]=="number"&&(j[V]=i.coords[V]);this.fire("locationfound",j)}},addHandler:function(i,l){if(!l)return this;var h=this[i]=new l(this);return this._handlers.push(h),this.options[i]&&h.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ue(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(pt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)ue(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,l){var h="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),_=Vt("div",h,l||this._mapPane);return i&&(this._panes[i]=_),_},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),l=this.unproject(i.getBottomLeft()),h=this.unproject(i.getTopRight());return new tt(l,h)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,l,h){i=ut(i),h=N(h||[0,0]);var _=this.getZoom()||0,y=this.getMinZoom(),w=this.getMaxZoom(),O=i.getNorthWest(),j=i.getSouthEast(),V=this.getSize().subtract(h),J=it(this.project(j,_),this.project(O,_)).getSize(),ct=yt.any3d?this.options.zoomSnap:1,mt=V.x/J.x,vt=V.y/J.y,Nt=l?Math.max(mt,vt):Math.min(mt,vt);return _=this.getScaleZoom(Nt,_),ct&&(_=Math.round(_/(ct/100))*(ct/100),_=l?Math.ceil(_/ct)*ct:Math.floor(_/ct)*ct),Math.max(y,Math.min(w,_))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new nt(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,l){var h=this._getTopLeftPoint(i,l);return new F(h,h.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,l){var h=this.options.crs;return l=l===void 0?this._zoom:l,h.scale(i)/h.scale(l)},getScaleZoom:function(i,l){var h=this.options.crs;l=l===void 0?this._zoom:l;var _=h.zoom(i*h.scale(l));return isNaN(_)?1/0:_},project:function(i,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(rt(i),l)},unproject:function(i,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(N(i),l)},layerPointToLatLng:function(i){var l=N(i).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(i){var l=this.project(rt(i))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(rt(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(ut(i))},distance:function(i,l){return this.options.crs.distance(rt(i),rt(l))},containerPointToLayerPoint:function(i){return N(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return N(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var l=this.containerPointToLayerPoint(N(i));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(rt(i)))},mouseEventToContainerPoint:function(i){return We(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var l=this._container=cr(i);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Mt(l,"scroll",this._onScroll,this),this._containerId=g(l)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&yt.any3d,Lt(i,"leaflet-container"+(yt.touch?" leaflet-touch":"")+(yt.retina?" leaflet-retina":"")+(yt.ielt9?" leaflet-oldie":"")+(yt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=ji(i,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),be(this._mapPane,new nt(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Lt(i.markerPane,"leaflet-zoom-hide"),Lt(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,l,h){be(this._mapPane,new nt(0,0));var _=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var y=this._zoom!==l;this._moveStart(y,h)._move(i,l)._moveEnd(y),this.fire("viewreset"),_&&this.fire("load")},_moveStart:function(i,l){return i&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(i,l,h,_){l===void 0&&(l=this._zoom);var y=this._zoom!==l;return this._zoom=l,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),_?h&&h.pinch&&this.fire("zoom",h):((y||h&&h.pinch)&&this.fire("zoom",h),this.fire("move",h)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return pt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){be(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[g(this._container)]=this;var l=i?Xt:Mt;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),yt.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){pt(this._resizeRequest),this._resizeRequest=Rt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,l){for(var h=[],_,y=l==="mouseout"||l==="mouseover",w=i.target||i.srcElement,O=!1;w;){if(_=this._targets[g(w)],_&&(l==="click"||l==="preclick")&&this._draggableMoved(_)){O=!0;break}if(_&&_.listens(l,!0)&&(y&&!Gi(w,i)||(h.push(_),y))||w===this._container)break;w=w.parentNode}return!h.length&&!O&&!y&&this.listens(l,!0)&&(h=[this]),h},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var l=i.target||i.srcElement;if(!(!this._loaded||l._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(l))){var h=i.type;h==="mousedown"&&wa(l),this._fireDOMEvent(i,h)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,l,h){if(i.type==="click"){var _=c({},i);_.type="preclick",this._fireDOMEvent(_,_.type,h)}var y=this._findEventTargets(i,l);if(h){for(var w=[],O=0;O<h.length;O++)h[O].listens(l,!0)&&w.push(h[O]);y=w.concat(y)}if(y.length){l==="contextmenu"&&Ce(i);var j=y[0],V={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var J=j.getLatLng&&(!j._radius||j._radius<=10);V.containerPoint=J?this.latLngToContainerPoint(j.getLatLng()):this.mouseEventToContainerPoint(i),V.layerPoint=this.containerPointToLayerPoint(V.containerPoint),V.latlng=J?j.getLatLng():this.layerPointToLatLng(V.layerPoint)}for(O=0;O<y.length;O++)if(y[O].fire(l,V,!0),V.originalEvent._stopped||y[O].options.bubblingMouseEvents===!1&&ft(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,l=this._handlers.length;i<l;i++)this._handlers[i].disable()},whenReady:function(i,l){return this._loaded?i.call(l||this,{target:this}):this.on("load",i,l),this},_getMapPanePos:function(){return xi(this._mapPane)||new nt(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,l){var h=i&&l!==void 0?this._getNewPixelOrigin(i,l):this.getPixelOrigin();return h.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,l){var h=this.getSize()._divideBy(2);return this.project(i,l)._subtract(h)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,l,h){var _=this._getNewPixelOrigin(h,l);return this.project(i,l)._subtract(_)},_latLngBoundsToNewLayerBounds:function(i,l,h){var _=this._getNewPixelOrigin(h,l);return it([this.project(i.getSouthWest(),l)._subtract(_),this.project(i.getNorthWest(),l)._subtract(_),this.project(i.getSouthEast(),l)._subtract(_),this.project(i.getNorthEast(),l)._subtract(_)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,l,h){if(!h)return i;var _=this.project(i,l),y=this.getSize().divideBy(2),w=new F(_.subtract(y),_.add(y)),O=this._getBoundsOffset(w,h,l);return Math.abs(O.x)<=1&&Math.abs(O.y)<=1?i:this.unproject(_.add(O),l)},_limitOffset:function(i,l){if(!l)return i;var h=this.getPixelBounds(),_=new F(h.min.add(i),h.max.add(i));return i.add(this._getBoundsOffset(_,l))},_getBoundsOffset:function(i,l,h){var _=it(this.project(l.getNorthEast(),h),this.project(l.getSouthWest(),h)),y=_.min.subtract(i.min),w=_.max.subtract(i.max),O=this._rebound(y.x,-w.x),j=this._rebound(y.y,-w.y);return new nt(O,j)},_rebound:function(i,l){return i+l>0?Math.round(i-l)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(l))},_limitZoom:function(i){var l=this.getMinZoom(),h=this.getMaxZoom(),_=yt.any3d?this.options.zoomSnap:1;return _&&(i=Math.round(i/_)*_),Math.max(l,Math.min(h,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ce(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,l){var h=this._getCenterOffset(i)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(h)?!1:(this.panBy(h,l),!0)},_createAnimProxy:function(){var i=this._proxy=Vt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(l){var h=ba,_=this._proxy.style[h];gn(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),_===this._proxy.style[h]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ue(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),l=this.getZoom();gn(this._proxy,this.project(i,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,l,h){if(this._animatingZoom)return!0;if(h=h||{},!this._zoomAnimated||h.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var _=this.getZoomScale(l),y=this._getCenterOffset(i)._divideBy(1-1/_);return h.animate!==!0&&!this.getSize().contains(y)?!1:(Rt(function(){this._moveStart(!0,h.noMoveStart||!1)._animateZoom(i,l,!0)},this),!0)},_animateZoom:function(i,l,h,_){this._mapPane&&(h&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=l,Lt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:l,noUpdate:_}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(p(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ce(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ta(i,l){return new zt(i,l)}var an=Ft.extend({options:{position:"topright"},initialize:function(i){k(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var l=this._map;return l&&l.removeControl(this),this.options.position=i,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var l=this._container=this.onAdd(i),h=this.getPosition(),_=i._controlCorners[h];return Lt(l,"leaflet-control"),h.indexOf("bottom")!==-1?_.insertBefore(l,_.firstChild):_.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ue(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),Ls=function(i){return new an(i)};zt.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},l="leaflet-",h=this._controlContainer=Vt("div",l+"control-container",this._container);function _(y,w){var O=l+y+" "+l+w;i[y+w]=Vt("div",O,h)}_("top","left"),_("top","right"),_("bottom","left"),_("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)ue(this._controlCorners[i]);ue(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ou=an.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,l,h,_){return h<_?-1:_<h?1:0}},initialize:function(i,l,h){k(this,h),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var _ in i)this._addLayer(i[_],_);for(_ in l)this._addLayer(l[_],_,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return an.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,l){return this._addLayer(i,l),this._map?this._update():this},addOverlay:function(i,l){return this._addLayer(i,l,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var l=this._getLayer(g(i));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){Lt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(Lt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):ce(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ce(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",l=this._container=Vt("div",i),h=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Rs(l),Ms(l);var _=this._section=Vt("section",i+"-list");h&&(this._map.on("click",this.collapse,this),Mt(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var y=this._layersLink=Vt("a",i+"-toggle",l);y.href="#",y.title="Layers",y.setAttribute("role","button"),Mt(y,{keydown:function(w){w.keyCode===13&&this._expandSafely()},click:function(w){Ce(w),this._expandSafely()}},this),h||this.expand(),this._baseLayersList=Vt("div",i+"-base",_),this._separator=Vt("div",i+"-separator",_),this._overlaysList=Vt("div",i+"-overlays",_),l.appendChild(_)},_getLayer:function(i){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&g(this._layers[l].layer)===i)return this._layers[l]},_addLayer:function(i,l,h){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:l,overlay:h}),this.options.sortLayers&&this._layers.sort(p(function(_,y){return this.options.sortFunction(_.layer,y.layer,_.name,y.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Xe(this._baseLayersList),Xe(this._overlaysList),this._layerControlInputs=[];var i,l,h,_,y=0;for(h=0;h<this._layers.length;h++)_=this._layers[h],this._addItem(_),l=l||_.overlay,i=i||!_.overlay,y+=_.overlay?0:1;return this.options.hideSingleBase&&(i=i&&y>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=l&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var l=this._getLayer(g(i.target)),h=l.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;h&&this._map.fire(h,l)},_createRadioElement:function(i,l){var h='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(l?' checked="checked"':"")+"/>",_=document.createElement("div");return _.innerHTML=h,_.firstChild},_addItem:function(i){var l=document.createElement("label"),h=this._map.hasLayer(i.layer),_;i.overlay?(_=document.createElement("input"),_.type="checkbox",_.className="leaflet-control-layers-selector",_.defaultChecked=h):_=this._createRadioElement("leaflet-base-layers_"+g(this),h),this._layerControlInputs.push(_),_.layerId=g(i.layer),Mt(_,"click",this._onInputClick,this);var y=document.createElement("span");y.innerHTML=" "+i.name;var w=document.createElement("span");l.appendChild(w),w.appendChild(_),w.appendChild(y);var O=i.overlay?this._overlaysList:this._baseLayersList;return O.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,l,h,_=[],y=[];this._handlingClick=!0;for(var w=i.length-1;w>=0;w--)l=i[w],h=this._getLayer(l.layerId).layer,l.checked?_.push(h):l.checked||y.push(h);for(w=0;w<y.length;w++)this._map.hasLayer(y[w])&&this._map.removeLayer(y[w]);for(w=0;w<_.length;w++)this._map.hasLayer(_[w])||this._map.addLayer(_[w]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,l,h,_=this._map.getZoom(),y=i.length-1;y>=0;y--)l=i[y],h=this._getLayer(l.layerId).layer,l.disabled=h.options.minZoom!==void 0&&_<h.options.minZoom||h.options.maxZoom!==void 0&&_>h.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,Mt(i,"click",Ce),this.expand();var l=this;setTimeout(function(){Xt(i,"click",Ce),l._preventClick=!1})}}),dh=function(i,l,h){return new ou(i,l,h)},Eo=an.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var l="leaflet-control-zoom",h=Vt("div",l+" leaflet-bar"),_=this.options;return this._zoomInButton=this._createButton(_.zoomInText,_.zoomInTitle,l+"-in",h,this._zoomIn),this._zoomOutButton=this._createButton(_.zoomOutText,_.zoomOutTitle,l+"-out",h,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),h},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,l,h,_,y){var w=Vt("a",h,_);return w.innerHTML=i,w.href="#",w.title=l,w.setAttribute("role","button"),w.setAttribute("aria-label",l),Rs(w),Mt(w,"click",Fn),Mt(w,"click",y,this),Mt(w,"click",this._refocusOnMap,this),w},_updateDisabled:function(){var i=this._map,l="leaflet-disabled";ce(this._zoomInButton,l),ce(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(Lt(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(Lt(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});zt.mergeOptions({zoomControl:!0}),zt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Eo,this.addControl(this.zoomControl))});var Co=function(i){return new Eo(i)},lu=an.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var l="leaflet-control-scale",h=Vt("div",l),_=this.options;return this._addScales(_,l+"-line",h),i.on(_.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),h},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,l,h){i.metric&&(this._mScale=Vt("div",l,h)),i.imperial&&(this._iScale=Vt("div",l,h))},_update:function(){var i=this._map,l=i.getSize().y/2,h=i.distance(i.containerPointToLatLng([0,l]),i.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(h)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var l=this._getRoundNum(i),h=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,h,l/i)},_updateImperial:function(i){var l=i*3.2808399,h,_,y;l>5280?(h=l/5280,_=this._getRoundNum(h),this._updateScale(this._iScale,_+" mi",_/h)):(y=this._getRoundNum(l),this._updateScale(this._iScale,y+" ft",y/l))},_updateScale:function(i,l,h){i.style.width=Math.round(this.options.maxWidth*h)+"px",i.innerHTML=l},_getRoundNum:function(i){var l=Math.pow(10,(Math.floor(i)+"").length-1),h=i/l;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:1,l*h}}),mh=function(i){return new lu(i)},ph='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',To=an.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(yt.inlineSvg?ph+" ":"")+"Leaflet</a>"},initialize:function(i){k(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=Vt("div","leaflet-control-attribution"),Rs(this._container);for(var l in i._layers)i._layers[l].getAttribution&&this.addAttribution(i._layers[l].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var l in this._attributions)this._attributions[l]&&i.push(l);var h=[];this.options.prefix&&h.push(this.options.prefix),i.length&&h.push(i.join(", ")),this._container.innerHTML=h.join(' <span aria-hidden="true">|</span> ')}}});zt.mergeOptions({attributionControl:!0}),zt.addInitHook(function(){this.options.attributionControl&&new To().addTo(this)});var _h=function(i){return new To(i)};an.Layers=ou,an.Zoom=Eo,an.Scale=lu,an.Attribution=To,Ls.layers=dh,Ls.zoom=Co,Ls.scale=mh,Ls.attribution=_h;var Rn=Ft.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Rn.addTo=function(i,l){return i.addHandler(l,this),this};var gh={Events:Y},uu=yt.touch?"touchstart mousedown":"mousedown",wi=at.extend({options:{clickTolerance:3},initialize:function(i,l,h,_){k(this,_),this._element=i,this._dragStartTarget=l||i,this._preventOutline=h},enable:function(){this._enabled||(Mt(this._dragStartTarget,uu,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(wi._dragging===this&&this.finishDrag(!0),Xt(this._dragStartTarget,uu,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!Es(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){wi._dragging===this&&this.finishDrag();return}if(!(wi._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(wi._dragging=this,this._preventOutline&&wa(this._element),Sa(),Gn(),!this._moving)){this.fire("down");var l=i.touches?i.touches[0]:i,h=Hi(this._element);this._startPoint=new nt(l.clientX,l.clientY),this._startPos=xi(this._element),this._parentScale=Si(h);var _=i.type==="mousedown";Mt(document,_?"mousemove":"touchmove",this._onMove,this),Mt(document,_?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var l=i.touches&&i.touches.length===1?i.touches[0]:i,h=new nt(l.clientX,l.clientY)._subtract(this._startPoint);!h.x&&!h.y||Math.abs(h.x)+Math.abs(h.y)<this.options.clickTolerance||(h.x/=this._parentScale.x,h.y/=this._parentScale.y,Ce(i),this._moved||(this.fire("dragstart"),this._moved=!0,Lt(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Lt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(h),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),be(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){ce(document.body,"leaflet-dragging"),this._lastTarget&&(ce(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Xt(document,"mousemove touchmove",this._onMove,this),Xt(document,"mouseup touchend touchcancel",this._onUp,this),So(),xa();var l=this._moved&&this._moving;this._moving=!1,wi._dragging=!1,l&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function cu(i,l,h){var _,y=[1,4,2,8],w,O,j,V,J,ct,mt,vt;for(w=0,ct=i.length;w<ct;w++)i[w]._code=Vi(i[w],l);for(j=0;j<4;j++){for(mt=y[j],_=[],w=0,ct=i.length,O=ct-1;w<ct;O=w++)V=i[w],J=i[O],V._code&mt?J._code&mt||(vt=pr(J,V,mt,l,h),vt._code=Vi(vt,l),_.push(vt)):(J._code&mt&&(vt=pr(J,V,mt,l,h),vt._code=Vi(vt,l),_.push(vt)),_.push(V));i=_}return i}function mr(i,l){var h,_,y,w,O,j,V,J,ct;if(!i||i.length===0)throw new Error("latlngs not passed");je(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var mt=rt([0,0]),vt=ut(i),Nt=vt.getNorthWest().distanceTo(vt.getSouthWest())*vt.getNorthEast().distanceTo(vt.getNorthWest());Nt<1700&&(mt=Ao(i));var he=i.length,xe=[];for(h=0;h<he;h++){var Ue=rt(i[h]);xe.push(l.project(rt([Ue.lat-mt.lat,Ue.lng-mt.lng])))}for(j=V=J=0,h=0,_=he-1;h<he;_=h++)y=xe[h],w=xe[_],O=y.y*w.x-w.y*y.x,V+=(y.x+w.x)*O,J+=(y.y+w.y)*O,j+=O*3;j===0?ct=xe[0]:ct=[V/j,J/j];var vn=l.unproject(N(ct));return rt([vn.lat+mt.lat,vn.lng+mt.lng])}function Ao(i){for(var l=0,h=0,_=0,y=0;y<i.length;y++){var w=rt(i[y]);l+=w.lat,h+=w.lng,_++}return rt([l/_,h/_])}var vh={__proto__:null,clipPolygon:cu,polygonCenter:mr,centroid:Ao};function hu(i,l){if(!l||!i.length)return i.slice();var h=l*l;return i=xh(i,h),i=bh(i,h),i}function No(i,l,h){return Math.sqrt(Yi(i,l,h,!0))}function yh(i,l,h){return Yi(i,l,h)}function bh(i,l){var h=i.length,_=typeof Uint8Array<"u"?Uint8Array:Array,y=new _(h);y[0]=y[h-1]=1,Mo(i,y,l,0,h-1);var w,O=[];for(w=0;w<h;w++)y[w]&&O.push(i[w]);return O}function Mo(i,l,h,_,y){var w=0,O,j,V;for(j=_+1;j<=y-1;j++)V=Yi(i[j],i[_],i[y],!0),V>w&&(O=j,w=V);w>h&&(l[O]=1,Mo(i,l,h,_,O),Mo(i,l,h,O,y))}function xh(i,l){for(var h=[i[0]],_=1,y=0,w=i.length;_<w;_++)Sh(i[_],i[y])>l&&(h.push(i[_]),y=_);return y<w-1&&h.push(i[w-1]),h}var fu;function du(i,l,h,_,y){var w=_?fu:Vi(i,h),O=Vi(l,h),j,V,J;for(fu=O;;){if(!(w|O))return[i,l];if(w&O)return!1;j=w||O,V=pr(i,l,j,h,y),J=Vi(V,h),j===w?(i=V,w=J):(l=V,O=J)}}function pr(i,l,h,_,y){var w=l.x-i.x,O=l.y-i.y,j=_.min,V=_.max,J,ct;return h&8?(J=i.x+w*(V.y-i.y)/O,ct=V.y):h&4?(J=i.x+w*(j.y-i.y)/O,ct=j.y):h&2?(J=V.x,ct=i.y+O*(V.x-i.x)/w):h&1&&(J=j.x,ct=i.y+O*(j.x-i.x)/w),new nt(J,ct,y)}function Vi(i,l){var h=0;return i.x<l.min.x?h|=1:i.x>l.max.x&&(h|=2),i.y<l.min.y?h|=4:i.y>l.max.y&&(h|=8),h}function Sh(i,l){var h=l.x-i.x,_=l.y-i.y;return h*h+_*_}function Yi(i,l,h,_){var y=l.x,w=l.y,O=h.x-y,j=h.y-w,V=O*O+j*j,J;return V>0&&(J=((i.x-y)*O+(i.y-w)*j)/V,J>1?(y=h.x,w=h.y):J>0&&(y+=O*J,w+=j*J)),O=i.x-y,j=i.y-w,_?O*O+j*j:new nt(y,w)}function je(i){return!$(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function mu(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),je(i)}function Ro(i,l){var h,_,y,w,O,j,V,J;if(!i||i.length===0)throw new Error("latlngs not passed");je(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var ct=rt([0,0]),mt=ut(i),vt=mt.getNorthWest().distanceTo(mt.getSouthWest())*mt.getNorthEast().distanceTo(mt.getNorthWest());vt<1700&&(ct=Ao(i));var Nt=i.length,he=[];for(h=0;h<Nt;h++){var xe=rt(i[h]);he.push(l.project(rt([xe.lat-ct.lat,xe.lng-ct.lng])))}for(h=0,_=0;h<Nt-1;h++)_+=he[h].distanceTo(he[h+1])/2;if(_===0)J=he[0];else for(h=0,w=0;h<Nt-1;h++)if(O=he[h],j=he[h+1],y=O.distanceTo(j),w+=y,w>_){V=(w-_)/y,J=[j.x-V*(j.x-O.x),j.y-V*(j.y-O.y)];break}var Ue=l.unproject(N(J));return rt([Ue.lat+ct.lat,Ue.lng+ct.lng])}var pu={__proto__:null,simplify:hu,pointToSegmentDistance:No,closestPointOnSegment:yh,clipSegment:du,_getEdgeIntersection:pr,_getBitCode:Vi,_sqClosestPointOnSegment:Yi,isFlat:je,_flat:mu,polylineCenter:Ro},_r={project:function(i){return new nt(i.lng,i.lat)},unproject:function(i){return new gt(i.y,i.x)},bounds:new F([-180,-90],[180,90])},gr={R:6378137,R_MINOR:6356752314245179e-9,bounds:new F([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var l=Math.PI/180,h=this.R,_=i.lat*l,y=this.R_MINOR/h,w=Math.sqrt(1-y*y),O=w*Math.sin(_),j=Math.tan(Math.PI/4-_/2)/Math.pow((1-O)/(1+O),w/2);return _=-h*Math.log(Math.max(j,1e-10)),new nt(i.lng*l*h,_)},unproject:function(i){for(var l=180/Math.PI,h=this.R,_=this.R_MINOR/h,y=Math.sqrt(1-_*_),w=Math.exp(-i.y/h),O=Math.PI/2-2*Math.atan(w),j=0,V=.1,J;j<15&&Math.abs(V)>1e-7;j++)J=y*Math.sin(O),J=Math.pow((1-J)/(1+J),y/2),V=Math.PI/2-2*Math.atan(w*J)-O,O+=V;return new gt(O*l,i.x*l/h)}},_u={__proto__:null,LonLat:_r,Mercator:gr,SphericalMercator:Di},Os=c({},Gt,{code:"EPSG:3395",projection:gr,transformation:function(){var i=.5/(Math.PI*gr.R);return An(i,.5,-i,.5)}()}),gu=c({},Gt,{code:"EPSG:4326",projection:_r,transformation:An(1/180,1,-1/180,.5)}),wh=c({},ie,{projection:_r,transformation:An(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,l){var h=l.lng-i.lng,_=l.lat-i.lat;return Math.sqrt(h*h+_*_)},infinite:!0});ie.Earth=Gt,ie.EPSG3395=Os,ie.EPSG3857=gi,ie.EPSG900913=gs,ie.EPSG4326=gu,ie.Simple=wh;var Ln=at.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[g(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[g(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var l=i.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var h=this.getEvents();l.on(h,this),this.once("remove",function(){l.off(h,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});zt.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var l=g(i);return this._layers[l]?this:(this._layers[l]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var l=g(i);return this._layers[l]?(this._loaded&&i.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return g(i)in this._layers},eachLayer:function(i,l){for(var h in this._layers)i.call(l,this._layers[h]);return this},_addLayers:function(i){i=i?$(i)?i:[i]:[];for(var l=0,h=i.length;l<h;l++)this.addLayer(i[l])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[g(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var l=g(i);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,l=-1/0,h=this._getZoomSpan();for(var _ in this._zoomBoundLayers){var y=this._zoomBoundLayers[_].options;i=y.minZoom===void 0?i:Math.min(i,y.minZoom),l=y.maxZoom===void 0?l:Math.max(l,y.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=i===1/0?void 0:i,h!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Fi=Ln.extend({initialize:function(i,l){k(this,l),this._layers={};var h,_;if(i)for(h=0,_=i.length;h<_;h++)this.addLayer(i[h])},addLayer:function(i){var l=this.getLayerId(i);return this._layers[l]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var l=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(i){var l=typeof i=="number"?i:this.getLayerId(i);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var l=Array.prototype.slice.call(arguments,1),h,_;for(h in this._layers)_=this._layers[h],_[i]&&_[i].apply(_,l);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,l){for(var h in this._layers)i.call(l,this._layers[h]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return g(i)}}),vu=function(i,l){return new Fi(i,l)},un=Fi.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),Fi.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),Fi.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new tt;for(var l in this._layers){var h=this._layers[l];i.extend(h.getBounds?h.getBounds():h.getLatLng())}return i}}),Aa=function(i,l){return new un(i,l)},Ds=Ft.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){k(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,l){var h=this._getIconUrl(i);if(!h){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var _=this._createImg(h,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(_,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),_},_setIconStyles:function(i,l){var h=this.options,_=h[l+"Size"];typeof _=="number"&&(_=[_,_]);var y=N(_),w=N(l==="shadow"&&h.shadowAnchor||h.iconAnchor||y&&y.divideBy(2,!0));i.className="leaflet-marker-"+l+" "+(h.className||""),w&&(i.style.marginLeft=-w.x+"px",i.style.marginTop=-w.y+"px"),y&&(i.style.width=y.x+"px",i.style.height=y.y+"px")},_createImg:function(i,l){return l=l||document.createElement("img"),l.src=i,l},_getIconUrl:function(i){return yt.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function vr(i){return new Ds(i)}var ks=Ds.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof ks.imagePath!="string"&&(ks.imagePath=this._detectIconPath()),(this.options.imagePath||ks.imagePath)+Ds.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var l=function(h,_,y){var w=_.exec(h);return w&&w[y]};return i=l(i,/^url\((['"])?(.+)\1\)$/,2),i&&l(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=Vt("div","leaflet-default-icon-path",document.body),l=ji(i,"background-image")||ji(i,"backgroundImage");if(document.body.removeChild(i),l=this._stripUrl(l),l)return l;var h=document.querySelector('link[href$="leaflet.css"]');return h?h.href.substring(0,h.href.length-11-1):""}}),Lo=Rn.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new wi(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Lt(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ce(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var l=this._marker,h=l._map,_=this._marker.options.autoPanSpeed,y=this._marker.options.autoPanPadding,w=xi(l._icon),O=h.getPixelBounds(),j=h.getPixelOrigin(),V=it(O.min._subtract(j).add(y),O.max._subtract(j).subtract(y));if(!V.contains(w)){var J=N((Math.max(V.max.x,w.x)-V.max.x)/(O.max.x-V.max.x)-(Math.min(V.min.x,w.x)-V.min.x)/(O.min.x-V.min.x),(Math.max(V.max.y,w.y)-V.max.y)/(O.max.y-V.max.y)-(Math.min(V.min.y,w.y)-V.min.y)/(O.min.y-V.min.y)).multiplyBy(_);h.panBy(J,{animate:!1}),this._draggable._newPos._add(J),this._draggable._startPos._add(J),be(l._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=Rt(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(pt(this._panRequest),this._panRequest=Rt(this._adjustPan.bind(this,i)))},_onDrag:function(i){var l=this._marker,h=l._shadow,_=xi(l._icon),y=l._map.layerPointToLatLng(_);h&&be(h,_),l._latlng=y,i.latlng=y,i.oldLatLng=this._oldLatLng,l.fire("move",i).fire("drag",i)},_onDragEnd:function(i){pt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),zs=Ln.extend({options:{icon:new ks,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,l){k(this,l),this._latlng=rt(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var l=this._latlng;return this._latlng=rt(i),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),h=i.icon.createIcon(this._icon),_=!1;h!==this._icon&&(this._icon&&this._removeIcon(),_=!0,i.title&&(h.title=i.title),h.tagName==="IMG"&&(h.alt=i.alt||"")),Lt(h,l),i.keyboard&&(h.tabIndex="0",h.setAttribute("role","button")),this._icon=h,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Mt(h,"focus",this._panOnFocus,this);var y=i.icon.createShadow(this._shadow),w=!1;y!==this._shadow&&(this._removeShadow(),w=!0),y&&(Lt(y,l),y.alt=""),this._shadow=y,i.opacity<1&&this._updateOpacity(),_&&this.getPane().appendChild(this._icon),this._initInteraction(),y&&w&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Xt(this._icon,"focus",this._panOnFocus,this),ue(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ue(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&be(this._icon,i),this._shadow&&be(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(Lt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Lo)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Lo(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&sn(this._icon,i),this._shadow&&sn(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var l=this.options.icon.options,h=l.iconSize?N(l.iconSize):N(0,0),_=l.iconAnchor?N(l.iconAnchor):N(0,0);i.panInside(this._latlng,{paddingTopLeft:_,paddingBottomRight:h.subtract(_)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Oo(i,l){return new zs(i,l)}var si=Ln.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return k(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Na=si.extend({options:{fill:!0,radius:10},initialize:function(i,l){k(this,l),this._latlng=rt(i),this._radius=this.options.radius},setLatLng:function(i){var l=this._latlng;return this._latlng=rt(i),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var l=i&&i.radius||this._radius;return si.prototype.setStyle.call(this,i),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,l=this._radiusY||i,h=this._clickTolerance(),_=[i+h,l+h];this._pxBounds=new F(this._point.subtract(_),this._point.add(_))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function yu(i,l){return new Na(i,l)}var Do=Na.extend({initialize:function(i,l,h){if(typeof l=="number"&&(l=c({},h,{radius:l})),k(this,l),this._latlng=rt(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new tt(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:si.prototype.setStyle,_project:function(){var i=this._latlng.lng,l=this._latlng.lat,h=this._map,_=h.options.crs;if(_.distance===Gt.distance){var y=Math.PI/180,w=this._mRadius/Gt.R/y,O=h.project([l+w,i]),j=h.project([l-w,i]),V=O.add(j).divideBy(2),J=h.unproject(V).lat,ct=Math.acos((Math.cos(w*y)-Math.sin(l*y)*Math.sin(J*y))/(Math.cos(l*y)*Math.cos(J*y)))/y;(isNaN(ct)||ct===0)&&(ct=w/Math.cos(Math.PI/180*l)),this._point=V.subtract(h.getPixelOrigin()),this._radius=isNaN(ct)?0:V.x-h.project([J,i-ct]).x,this._radiusY=V.y-O.y}else{var mt=_.unproject(_.project(this._latlng).subtract([this._mRadius,0]));this._point=h.latLngToLayerPoint(this._latlng),this._radius=this._point.x-h.latLngToLayerPoint(mt).x}this._updateBounds()}});function Eh(i,l,h){return new Do(i,l,h)}var ai=si.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,l){k(this,l),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var l=1/0,h=null,_=Yi,y,w,O=0,j=this._parts.length;O<j;O++)for(var V=this._parts[O],J=1,ct=V.length;J<ct;J++){y=V[J-1],w=V[J];var mt=_(i,y,w,!0);mt<l&&(l=mt,h=_(i,y,w))}return h&&(h.distance=Math.sqrt(l)),h},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ro(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,l){return l=l||this._defaultShape(),i=rt(i),l.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new tt,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return je(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var l=[],h=je(i),_=0,y=i.length;_<y;_++)h?(l[_]=rt(i[_]),this._bounds.extend(l[_])):l[_]=this._convertLatLngs(i[_]);return l},_project:function(){var i=new F;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),l=new nt(i,i);this._rawPxBounds&&(this._pxBounds=new F([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(i,l,h){var _=i[0]instanceof gt,y=i.length,w,O;if(_){for(O=[],w=0;w<y;w++)O[w]=this._map.latLngToLayerPoint(i[w]),h.extend(O[w]);l.push(O)}else for(w=0;w<y;w++)this._projectLatlngs(i[w],l,h)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,h,_,y,w,O,j,V;for(h=0,y=0,w=this._rings.length;h<w;h++)for(V=this._rings[h],_=0,O=V.length;_<O-1;_++)j=du(V[_],V[_+1],i,_,!0),j&&(l[y]=l[y]||[],l[y].push(j[0]),(j[1]!==V[_+1]||_===O-2)&&(l[y].push(j[1]),y++))}},_simplifyPoints:function(){for(var i=this._parts,l=this.options.smoothFactor,h=0,_=i.length;h<_;h++)i[h]=hu(i[h],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,l){var h,_,y,w,O,j,V=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(h=0,w=this._parts.length;h<w;h++)for(j=this._parts[h],_=0,O=j.length,y=O-1;_<O;y=_++)if(!(!l&&_===0)&&No(i,j[y],j[_])<=V)return!0;return!1}});function Ch(i,l){return new ai(i,l)}ai._flat=mu;var Ps=ai.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return mr(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var l=ai.prototype._convertLatLngs.call(this,i),h=l.length;return h>=2&&l[0]instanceof gt&&l[0].equals(l[h-1])&&l.pop(),l},_setLatLngs:function(i){ai.prototype._setLatLngs.call(this,i),je(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return je(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,l=this.options.weight,h=new nt(l,l);if(i=new F(i.min.subtract(h),i.max.add(h)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var _=0,y=this._rings.length,w;_<y;_++)w=cu(this._rings[_],i,!0),w.length&&this._parts.push(w)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var l=!1,h,_,y,w,O,j,V,J;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(w=0,V=this._parts.length;w<V;w++)for(h=this._parts[w],O=0,J=h.length,j=J-1;O<J;j=O++)_=h[O],y=h[j],_.y>i.y!=y.y>i.y&&i.x<(y.x-_.x)*(i.y-_.y)/(y.y-_.y)+_.x&&(l=!l);return l||ai.prototype._containsPoint.call(this,i,!0)}});function cn(i,l){return new Ps(i,l)}var hn=un.extend({initialize:function(i,l){k(this,l),this._layers={},i&&this.addData(i)},addData:function(i){var l=$(i)?i:i.features,h,_,y;if(l){for(h=0,_=l.length;h<_;h++)y=l[h],(y.geometries||y.geometry||y.features||y.coordinates)&&this.addData(y);return this}var w=this.options;if(w.filter&&!w.filter(i))return this;var O=Ma(i,w);return O?(O.feature=Is(i),O.defaultOptions=O.options,this.resetStyle(O),w.onEachFeature&&w.onEachFeature(i,O),this.addLayer(O)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=c({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(l){this._setLayerStyle(l,i)},this)},_setLayerStyle:function(i,l){i.setStyle&&(typeof l=="function"&&(l=l(i.feature)),i.setStyle(l))}});function Ma(i,l){var h=i.type==="Feature"?i.geometry:i,_=h?h.coordinates:null,y=[],w=l&&l.pointToLayer,O=l&&l.coordsToLatLng||yr,j,V,J,ct;if(!_&&!h)return null;switch(h.type){case"Point":return j=O(_),ko(w,i,j,l);case"MultiPoint":for(J=0,ct=_.length;J<ct;J++)j=O(_[J]),y.push(ko(w,i,j,l));return new un(y);case"LineString":case"MultiLineString":return V=Ra(_,h.type==="LineString"?0:1,O),new ai(V,l);case"Polygon":case"MultiPolygon":return V=Ra(_,h.type==="Polygon"?1:2,O),new Ps(V,l);case"GeometryCollection":for(J=0,ct=h.geometries.length;J<ct;J++){var mt=Ma({geometry:h.geometries[J],type:"Feature",properties:i.properties},l);mt&&y.push(mt)}return new un(y);case"FeatureCollection":for(J=0,ct=h.features.length;J<ct;J++){var vt=Ma(h.features[J],l);vt&&y.push(vt)}return new un(y);default:throw new Error("Invalid GeoJSON object.")}}function ko(i,l,h,_){return i?i(l,h):new zs(h,_&&_.markersInheritOptions&&_)}function yr(i){return new gt(i[1],i[0],i[2])}function Ra(i,l,h){for(var _=[],y=0,w=i.length,O;y<w;y++)O=l?Ra(i[y],l-1,h):(h||yr)(i[y]),_.push(O);return _}function La(i,l){return i=rt(i),i.alt!==void 0?[C(i.lng,l),C(i.lat,l),C(i.alt,l)]:[C(i.lng,l),C(i.lat,l)]}function br(i,l,h,_){for(var y=[],w=0,O=i.length;w<O;w++)y.push(l?br(i[w],je(i[w])?0:l-1,h,_):La(i[w],_));return!l&&h&&y.length>0&&y.push(y[0].slice()),y}function On(i,l){return i.feature?c({},i.feature,{geometry:l}):Is(l)}function Is(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var Xi={toGeoJSON:function(i){return On(this,{type:"Point",coordinates:La(this.getLatLng(),i)})}};zs.include(Xi),Do.include(Xi),Na.include(Xi),ai.include({toGeoJSON:function(i){var l=!je(this._latlngs),h=br(this._latlngs,l?1:0,!1,i);return On(this,{type:(l?"Multi":"")+"LineString",coordinates:h})}}),Ps.include({toGeoJSON:function(i){var l=!je(this._latlngs),h=l&&!je(this._latlngs[0]),_=br(this._latlngs,h?2:l?1:0,!0,i);return l||(_=[_]),On(this,{type:(h?"Multi":"")+"Polygon",coordinates:_})}}),Fi.include({toMultiPoint:function(i){var l=[];return this.eachLayer(function(h){l.push(h.toGeoJSON(i).geometry.coordinates)}),On(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(i){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(i);var h=l==="GeometryCollection",_=[];return this.eachLayer(function(y){if(y.toGeoJSON){var w=y.toGeoJSON(i);if(h)_.push(w.geometry);else{var O=Is(w);O.type==="FeatureCollection"?_.push.apply(_,O.features):_.push(O)}}}),h?On(this,{geometries:_,type:"GeometryCollection"}):{type:"FeatureCollection",features:_}}});function xr(i,l){return new hn(i,l)}var bu=xr,Xn=Ln.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,l,h){this._url=i,this._bounds=ut(l),k(this,h)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Lt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ue(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&Ui(this._image),this},bringToBack:function(){return this._map&&ws(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=ut(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",l=this._image=i?this._url:Vt("img");if(Lt(l,"leaflet-image-layer"),this._zoomAnimated&&Lt(l,"leaflet-zoom-animated"),this.options.className&&Lt(l,this.options.className),l.onselectstart=T,l.onmousemove=T,l.onload=p(this.fire,this,"load"),l.onerror=p(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(i){var l=this._map.getZoomScale(i.zoom),h=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;gn(this._image,h,l)},_reset:function(){var i=this._image,l=new F(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),h=l.getSize();be(i,l.min),i.style.width=h.x+"px",i.style.height=h.y+"px"},_updateOpacity:function(){sn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),Bs=function(i,l,h){return new Xn(i,l,h)},Sr=Xn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",l=this._image=i?this._url:Vt("video");if(Lt(l,"leaflet-image-layer"),this._zoomAnimated&&Lt(l,"leaflet-zoom-animated"),this.options.className&&Lt(l,this.options.className),l.onselectstart=T,l.onmousemove=T,l.onloadeddata=p(this.fire,this,"load"),i){for(var h=l.getElementsByTagName("source"),_=[],y=0;y<h.length;y++)_.push(h[y].src);this._url=h.length>0?_:[l.src];return}$(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var w=0;w<this._url.length;w++){var O=Vt("source");O.src=this._url[w],l.appendChild(O)}}});function xu(i,l,h){return new Sr(i,l,h)}var Ei=Xn.extend({_initImage:function(){var i=this._image=this._url;Lt(i,"leaflet-image-layer"),this._zoomAnimated&&Lt(i,"leaflet-zoom-animated"),this.options.className&&Lt(i,this.options.className),i.onselectstart=T,i.onmousemove=T}});function Su(i,l,h){return new Ei(i,l,h)}var Dn=Ln.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,l){i&&(i instanceof gt||$(i))?(this._latlng=rt(i),k(this,l)):(k(this,i),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&sn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&sn(this._container,1),this.bringToFront(),this.options.interactive&&(Lt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(sn(this._container,0),this._removeTimeout=setTimeout(p(ue,void 0,this._container),200)):ue(this._container),this.options.interactive&&(ce(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=rt(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ui(this._container),this},bringToBack:function(){return this._map&&ws(this._container),this},_prepareOpen:function(i){var l=this._source;if(!l._map)return!1;if(l instanceof un){l=null;var h=this._source._layers;for(var _ in h)if(h[_]._map){l=h[_];break}if(!l)return!1;this._source=l}if(!i)if(l.getCenter)i=l.getCenter();else if(l.getLatLng)i=l.getLatLng();else if(l.getBounds)i=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")i.innerHTML=l;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),l=N(this.options.offset),h=this._getAnchor();this._zoomAnimated?be(this._container,i.add(h)):l=l.add(i).add(h);var _=this._containerBottom=-l.y,y=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=_+"px",this._container.style.left=y+"px"}},_getAnchor:function(){return[0,0]}});zt.include({_initOverlay:function(i,l,h,_){var y=l;return y instanceof i||(y=new i(_).setContent(l)),h&&y.setLatLng(h),y}}),Ln.include({_initOverlay:function(i,l,h,_){var y=h;return y instanceof i?(k(y,_),y._source=this):(y=l&&!_?l:new i(_,this),y.setContent(h)),y}});var Oa=Dn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,Dn.prototype.openOn.call(this,i)},onAdd:function(i){Dn.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof si||this._source.on("preclick",ii))},onRemove:function(i){Dn.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof si||this._source.off("preclick",ii))},getEvents:function(){var i=Dn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",l=this._container=Vt("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),h=this._wrapper=Vt("div",i+"-content-wrapper",l);if(this._contentNode=Vt("div",i+"-content",h),Rs(l),Ms(this._contentNode),Mt(l,"contextmenu",ii),this._tipContainer=Vt("div",i+"-tip-container",l),this._tip=Vt("div",i+"-tip",this._tipContainer),this.options.closeButton){var _=this._closeButton=Vt("a",i+"-close-button",l);_.setAttribute("role","button"),_.setAttribute("aria-label","Close popup"),_.href="#close",_.innerHTML='<span aria-hidden="true">&#215;</span>',Mt(_,"click",function(y){Ce(y),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,l=i.style;l.width="",l.whiteSpace="nowrap";var h=i.offsetWidth;h=Math.min(h,this.options.maxWidth),h=Math.max(h,this.options.minWidth),l.width=h+1+"px",l.whiteSpace="",l.height="";var _=i.offsetHeight,y=this.options.maxHeight,w="leaflet-popup-scrolled";y&&_>y?(l.height=y+"px",Lt(i,w)):ce(i,w),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),h=this._getAnchor();be(this._container,l.add(h))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,l=parseInt(ji(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+l,_=this._containerWidth,y=new nt(this._containerLeft,-h-this._containerBottom);y._add(xi(this._container));var w=i.layerPointToContainerPoint(y),O=N(this.options.autoPanPadding),j=N(this.options.autoPanPaddingTopLeft||O),V=N(this.options.autoPanPaddingBottomRight||O),J=i.getSize(),ct=0,mt=0;w.x+_+V.x>J.x&&(ct=w.x+_-J.x+V.x),w.x-ct-j.x<0&&(ct=w.x-j.x),w.y+h+V.y>J.y&&(mt=w.y+h-J.y+V.y),w.y-mt-j.y<0&&(mt=w.y-j.y),(ct||mt)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([ct,mt]))}},_getAnchor:function(){return N(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Th=function(i,l){return new Oa(i,l)};zt.mergeOptions({closePopupOnClick:!0}),zt.include({openPopup:function(i,l,h){return this._initOverlay(Oa,i,l,h).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),Ln.include({bindPopup:function(i,l){return this._popup=this._initOverlay(Oa,this._popup,i,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof un||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){Fn(i);var l=i.layer||i.target;if(this._popup._source===l&&!(l instanceof si)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=l,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var wr=Dn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){Dn.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){Dn.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=Dn.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",l=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Vt("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+g(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var l,h,_=this._map,y=this._container,w=_.latLngToContainerPoint(_.getCenter()),O=_.layerPointToContainerPoint(i),j=this.options.direction,V=y.offsetWidth,J=y.offsetHeight,ct=N(this.options.offset),mt=this._getAnchor();j==="top"?(l=V/2,h=J):j==="bottom"?(l=V/2,h=0):j==="center"?(l=V/2,h=J/2):j==="right"?(l=0,h=J/2):j==="left"?(l=V,h=J/2):O.x<w.x?(j="right",l=0,h=J/2):(j="left",l=V+(ct.x+mt.x)*2,h=J/2),i=i.subtract(N(l,h,!0)).add(ct).add(mt),ce(y,"leaflet-tooltip-right"),ce(y,"leaflet-tooltip-left"),ce(y,"leaflet-tooltip-top"),ce(y,"leaflet-tooltip-bottom"),Lt(y,"leaflet-tooltip-"+j),be(y,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&sn(this._container,i)},_animateZoom:function(i){var l=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(l)},_getAnchor:function(){return N(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Ah=function(i,l){return new wr(i,l)};zt.include({openTooltip:function(i,l,h){return this._initOverlay(wr,i,l,h).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),Ln.include({bindTooltip:function(i,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(wr,this._tooltip,i,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var l=i?"off":"on",h={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?h.add=this._openTooltip:(h.mouseover=this._openTooltip,h.mouseout=this.closeTooltip,h.click=this._openTooltip,this._map?this._addFocusListeners():h.add=this._addFocusListeners),this._tooltip.options.sticky&&(h.mousemove=this._moveTooltip),this[l](h),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof un||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var l=typeof i.getElement=="function"&&i.getElement();l&&(Mt(l,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),Mt(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var l=typeof i.getElement=="function"&&i.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var l=i.latlng,h,_;this._tooltip.options.sticky&&i.originalEvent&&(h=this._map.mouseEventToContainerPoint(i.originalEvent),_=this._map.containerPointToLayerPoint(h),l=this._map.layerPointToLatLng(_)),this._tooltip.setLatLng(l)}});var zo=Ds.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var l=i&&i.tagName==="DIV"?i:document.createElement("div"),h=this.options;if(h.html instanceof Element?(Xe(l),l.appendChild(h.html)):l.innerHTML=h.html!==!1?h.html:"",h.bgPos){var _=N(h.bgPos);l.style.backgroundPosition=-_.x+"px "+-_.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function wu(i){return new zo(i)}Ds.Default=ks;var Qi=Ln.extend({options:{tileSize:256,opacity:1,updateWhenIdle:yt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){k(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),ue(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ui(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ws(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=v(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof nt?i:new nt(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var l=this.getPane().children,h=-i(-1/0,1/0),_=0,y=l.length,w;_<y;_++)w=l[_].style.zIndex,l[_]!==this._container&&w&&(h=i(h,+w));isFinite(h)&&(this.options.zIndex=h+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!yt.ielt9){sn(this._container,this.options.opacity);var i=+new Date,l=!1,h=!1;for(var _ in this._tiles){var y=this._tiles[_];if(!(!y.current||!y.loaded)){var w=Math.min(1,(i-y.loaded)/200);sn(y.el,w),w<1?l=!0:(y.active?h=!0:this._onOpaqueTile(y),y.active=!0)}}h&&!this._noPrune&&this._pruneTiles(),l&&(pt(this._fadeFrame),this._fadeFrame=Rt(this._updateOpacity,this))}},_onOpaqueTile:T,_initContainer:function(){this._container||(this._container=Vt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,l=this.options.maxZoom;if(i!==void 0){for(var h in this._levels)h=Number(h),this._levels[h].el.children.length||h===i?(this._levels[h].el.style.zIndex=l-Math.abs(i-h),this._onUpdateLevel(h)):(ue(this._levels[h].el),this._removeTilesAtZoom(h),this._onRemoveLevel(h),delete this._levels[h]);var _=this._levels[i],y=this._map;return _||(_=this._levels[i]={},_.el=Vt("div","leaflet-tile-container leaflet-zoom-animated",this._container),_.el.style.zIndex=l,_.origin=y.project(y.unproject(y.getPixelOrigin()),i).round(),_.zoom=i,this._setZoomTransform(_,y.getCenter(),y.getZoom()),T(_.el.offsetWidth),this._onCreateLevel(_)),this._level=_,_}},_onUpdateLevel:T,_onRemoveLevel:T,_onCreateLevel:T,_pruneTiles:function(){if(this._map){var i,l,h=this._map.getZoom();if(h>this.options.maxZoom||h<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)l=this._tiles[i],l.retain=l.current;for(i in this._tiles)if(l=this._tiles[i],l.current&&!l.active){var _=l.coords;this._retainParent(_.x,_.y,_.z,_.z-5)||this._retainChildren(_.x,_.y,_.z,_.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var l in this._tiles)this._tiles[l].coords.z===i&&this._removeTile(l)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)ue(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,l,h,_){var y=Math.floor(i/2),w=Math.floor(l/2),O=h-1,j=new nt(+y,+w);j.z=+O;var V=this._tileCoordsToKey(j),J=this._tiles[V];return J&&J.active?(J.retain=!0,!0):(J&&J.loaded&&(J.retain=!0),O>_?this._retainParent(y,w,O,_):!1)},_retainChildren:function(i,l,h,_){for(var y=2*i;y<2*i+2;y++)for(var w=2*l;w<2*l+2;w++){var O=new nt(y,w);O.z=h+1;var j=this._tileCoordsToKey(O),V=this._tiles[j];if(V&&V.active){V.retain=!0;continue}else V&&V.loaded&&(V.retain=!0);h+1<_&&this._retainChildren(y,w,h+1,_)}},_resetView:function(i){var l=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var l=this.options;return l.minNativeZoom!==void 0&&i<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<i?l.maxNativeZoom:i},_setView:function(i,l,h,_){var y=Math.round(l);this.options.maxZoom!==void 0&&y>this.options.maxZoom||this.options.minZoom!==void 0&&y<this.options.minZoom?y=void 0:y=this._clampZoom(y);var w=this.options.updateWhenZooming&&y!==this._tileZoom;(!_||w)&&(this._tileZoom=y,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),y!==void 0&&this._update(i),h||this._pruneTiles(),this._noPrune=!!h),this._setZoomTransforms(i,l)},_setZoomTransforms:function(i,l){for(var h in this._levels)this._setZoomTransform(this._levels[h],i,l)},_setZoomTransform:function(i,l,h){var _=this._map.getZoomScale(h,i.zoom),y=i.origin.multiplyBy(_).subtract(this._map._getNewPixelOrigin(l,h)).round();yt.any3d?gn(i.el,y,_):be(i.el,y)},_resetGrid:function(){var i=this._map,l=i.options.crs,h=this._tileSize=this.getTileSize(),_=this._tileZoom,y=this._map.getPixelWorldBounds(this._tileZoom);y&&(this._globalTileRange=this._pxBoundsToTileRange(y)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,l.wrapLng[0]],_).x/h.x),Math.ceil(i.project([0,l.wrapLng[1]],_).x/h.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([l.wrapLat[0],0],_).y/h.x),Math.ceil(i.project([l.wrapLat[1],0],_).y/h.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var l=this._map,h=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),_=l.getZoomScale(h,this._tileZoom),y=l.project(i,this._tileZoom).floor(),w=l.getSize().divideBy(_*2);return new F(y.subtract(w),y.add(w))},_update:function(i){var l=this._map;if(l){var h=this._clampZoom(l.getZoom());if(i===void 0&&(i=l.getCenter()),this._tileZoom!==void 0){var _=this._getTiledPixelBounds(i),y=this._pxBoundsToTileRange(_),w=y.getCenter(),O=[],j=this.options.keepBuffer,V=new F(y.getBottomLeft().subtract([j,-j]),y.getTopRight().add([j,-j]));if(!(isFinite(y.min.x)&&isFinite(y.min.y)&&isFinite(y.max.x)&&isFinite(y.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var J in this._tiles){var ct=this._tiles[J].coords;(ct.z!==this._tileZoom||!V.contains(new nt(ct.x,ct.y)))&&(this._tiles[J].current=!1)}if(Math.abs(h-this._tileZoom)>1){this._setView(i,h);return}for(var mt=y.min.y;mt<=y.max.y;mt++)for(var vt=y.min.x;vt<=y.max.x;vt++){var Nt=new nt(vt,mt);if(Nt.z=this._tileZoom,!!this._isValidTile(Nt)){var he=this._tiles[this._tileCoordsToKey(Nt)];he?he.current=!0:O.push(Nt)}}if(O.sort(function(Ue,vn){return Ue.distanceTo(w)-vn.distanceTo(w)}),O.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var xe=document.createDocumentFragment();for(vt=0;vt<O.length;vt++)this._addTile(O[vt],xe);this._level.el.appendChild(xe)}}}},_isValidTile:function(i){var l=this._map.options.crs;if(!l.infinite){var h=this._globalTileRange;if(!l.wrapLng&&(i.x<h.min.x||i.x>h.max.x)||!l.wrapLat&&(i.y<h.min.y||i.y>h.max.y))return!1}if(!this.options.bounds)return!0;var _=this._tileCoordsToBounds(i);return ut(this.options.bounds).overlaps(_)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var l=this._map,h=this.getTileSize(),_=i.scaleBy(h),y=_.add(h),w=l.unproject(_,i.z),O=l.unproject(y,i.z);return[w,O]},_tileCoordsToBounds:function(i){var l=this._tileCoordsToNwSe(i),h=new tt(l[0],l[1]);return this.options.noWrap||(h=this._map.wrapLatLngBounds(h)),h},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var l=i.split(":"),h=new nt(+l[0],+l[1]);return h.z=+l[2],h},_removeTile:function(i){var l=this._tiles[i];l&&(ue(l.el),delete this._tiles[i],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){Lt(i,"leaflet-tile");var l=this.getTileSize();i.style.width=l.x+"px",i.style.height=l.y+"px",i.onselectstart=T,i.onmousemove=T,yt.ielt9&&this.options.opacity<1&&sn(i,this.options.opacity)},_addTile:function(i,l){var h=this._getTilePos(i),_=this._tileCoordsToKey(i),y=this.createTile(this._wrapCoords(i),p(this._tileReady,this,i));this._initTile(y),this.createTile.length<2&&Rt(p(this._tileReady,this,i,null,y)),be(y,h),this._tiles[_]={el:y,coords:i,current:!0},l.appendChild(y),this.fire("tileloadstart",{tile:y,coords:i})},_tileReady:function(i,l,h){l&&this.fire("tileerror",{error:l,tile:h,coords:i});var _=this._tileCoordsToKey(i);h=this._tiles[_],h&&(h.loaded=+new Date,this._map._fadeAnimated?(sn(h.el,0),pt(this._fadeFrame),this._fadeFrame=Rt(this._updateOpacity,this)):(h.active=!0,this._pruneTiles()),l||(Lt(h.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:h.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),yt.ielt9||!this._map._fadeAnimated?Rt(this._pruneTiles,this):setTimeout(p(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var l=new nt(this._wrapX?A(i.x,this._wrapX):i.x,this._wrapY?A(i.y,this._wrapY):i.y);return l.z=i.z,l},_pxBoundsToTileRange:function(i){var l=this.getTileSize();return new F(i.min.unscaleBy(l).floor(),i.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function kn(i){return new Qi(i)}var Wi=Qi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,l){this._url=i,l=k(this,l),l.detectRetina&&yt.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,l){return this._url===i&&l===void 0&&(l=!0),this._url=i,l||this.redraw(),this},createTile:function(i,l){var h=document.createElement("img");return Mt(h,"load",p(this._tileOnLoad,this,l,h)),Mt(h,"error",p(this._tileOnError,this,l,h)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(h.referrerPolicy=this.options.referrerPolicy),h.alt="",h.src=this.getTileUrl(i),h},getTileUrl:function(i){var l={r:yt.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var h=this._globalTileRange.max.y-i.y;this.options.tms&&(l.y=h),l["-y"]=h}return Q(this._url,c(l,this.options))},_tileOnLoad:function(i,l){yt.ielt9?setTimeout(p(i,this,null,l),0):i(null,l)},_tileOnError:function(i,l,h){var _=this.options.errorTileUrl;_&&l.getAttribute("src")!==_&&(l.src=_),i(h,l)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,l=this.options.maxZoom,h=this.options.zoomReverse,_=this.options.zoomOffset;return h&&(i=l-i),i+_},_getSubdomain:function(i){var l=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var i,l;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(l=this._tiles[i].el,l.onload=T,l.onerror=T,!l.complete)){l.src=lt;var h=this._tiles[i].coords;ue(l),delete this._tiles[i],this.fire("tileabort",{tile:l,coords:h})}},_removeTile:function(i){var l=this._tiles[i];if(l)return l.el.setAttribute("src",lt),Qi.prototype._removeTile.call(this,i)},_tileReady:function(i,l,h){if(!(!this._map||h&&h.getAttribute("src")===lt))return Qi.prototype._tileReady.call(this,i,l,h)}});function fn(i,l){return new Wi(i,l)}var dn=Wi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,l){this._url=i;var h=c({},this.defaultWmsParams);for(var _ in l)_ in this.options||(h[_]=l[_]);l=k(this,l);var y=l.detectRetina&&yt.retina?2:1,w=this.getTileSize();h.width=w.x*y,h.height=w.y*y,this.wmsParams=h},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,Wi.prototype.onAdd.call(this,i)},getTileUrl:function(i){var l=this._tileCoordsToNwSe(i),h=this._crs,_=it(h.project(l[0]),h.project(l[1])),y=_.min,w=_.max,O=(this._wmsVersion>=1.3&&this._crs===gu?[y.y,y.x,w.y,w.x]:[y.x,y.y,w.x,w.y]).join(","),j=Wi.prototype.getTileUrl.call(this,i);return j+B(this.wmsParams,j,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+O},setParams:function(i,l){return c(this.wmsParams,i),l||this.redraw(),this}});function js(i,l){return new dn(i,l)}Wi.WMS=dn,fn.wms=js;var zn=Ln.extend({options:{padding:.1},initialize:function(i){k(this,i),g(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Lt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,l){var h=this._map.getZoomScale(l,this._zoom),_=this._map.getSize().multiplyBy(.5+this.options.padding),y=this._map.project(this._center,l),w=_.multiplyBy(-h).add(y).subtract(this._map._getNewPixelOrigin(i,l));yt.any3d?gn(this._container,w,h):be(this._container,w)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,l=this._map.getSize(),h=this._map.containerPointToLayerPoint(l.multiplyBy(-i)).round();this._bounds=new F(h,h.add(l.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Da=zn.extend({options:{tolerance:0},getEvents:function(){var i=zn.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){zn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");Mt(i,"mousemove",this._onMouseMove,this),Mt(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Mt(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){pt(this._redrawRequest),delete this._ctx,ue(this._container),Xt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var l in this._layers)i=this._layers[l],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){zn.prototype._update.call(this);var i=this._bounds,l=this._container,h=i.getSize(),_=yt.retina?2:1;be(l,i.min),l.width=_*h.x,l.height=_*h.y,l.style.width=h.x+"px",l.style.height=h.y+"px",yt.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){zn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[g(i)]=i;var l=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var l=i._order,h=l.next,_=l.prev;h?h.prev=_:this._drawLast=_,_?_.next=h:this._drawFirst=h,delete i._order,delete this._layers[g(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var l=i.options.dashArray.split(/[, ]+/),h=[],_,y;for(y=0;y<l.length;y++){if(_=Number(l[y]),isNaN(_))return;h.push(_)}i.options._dashArray=h}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||Rt(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var l=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new F,this._redrawBounds.extend(i._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(i._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var l=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,l=this._redrawBounds;if(this._ctx.save(),l){var h=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,h.x,h.y),this._ctx.clip()}this._drawing=!0;for(var _=this._drawFirst;_;_=_.next)i=_.layer,(!l||i._pxBounds&&i._pxBounds.intersects(l))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,l){if(this._drawing){var h,_,y,w,O=i._parts,j=O.length,V=this._ctx;if(j){for(V.beginPath(),h=0;h<j;h++){for(_=0,y=O[h].length;_<y;_++)w=O[h][_],V[_?"lineTo":"moveTo"](w.x,w.y);l&&V.closePath()}this._fillStroke(V,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var l=i._point,h=this._ctx,_=Math.max(Math.round(i._radius),1),y=(Math.max(Math.round(i._radiusY),1)||_)/_;y!==1&&(h.save(),h.scale(1,y)),h.beginPath(),h.arc(l.x,l.y/y,_,0,Math.PI*2,!1),y!==1&&h.restore(),this._fillStroke(h,i)}},_fillStroke:function(i,l){var h=l.options;h.fill&&(i.globalAlpha=h.fillOpacity,i.fillStyle=h.fillColor||h.color,i.fill(h.fillRule||"evenodd")),h.stroke&&h.weight!==0&&(i.setLineDash&&i.setLineDash(l.options&&l.options._dashArray||[]),i.globalAlpha=h.opacity,i.lineWidth=h.weight,i.strokeStyle=h.color,i.lineCap=h.lineCap,i.lineJoin=h.lineJoin,i.stroke())},_onClick:function(i){for(var l=this._map.mouseEventToLayerPoint(i),h,_,y=this._drawFirst;y;y=y.next)h=y.layer,h.options.interactive&&h._containsPoint(l)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(h))&&(_=h);this._fireEvent(_?[_]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,l)}},_handleMouseOut:function(i){var l=this._hoveredLayer;l&&(ce(this._container,"leaflet-interactive"),this._fireEvent([l],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,l){if(!this._mouseHoverThrottled){for(var h,_,y=this._drawFirst;y;y=y.next)h=y.layer,h.options.interactive&&h._containsPoint(l)&&(_=h);_!==this._hoveredLayer&&(this._handleMouseOut(i),_&&(Lt(this._container,"leaflet-interactive"),this._fireEvent([_],i,"mouseover"),this._hoveredLayer=_)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(p(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,l,h){this._map._fireDOMEvent(l,h||l.type,i)},_bringToFront:function(i){var l=i._order;if(l){var h=l.next,_=l.prev;if(h)h.prev=_;else return;_?_.next=h:h&&(this._drawFirst=h),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(i)}},_bringToBack:function(i){var l=i._order;if(l){var h=l.next,_=l.prev;if(_)_.next=h;else return;h?h.prev=_:_&&(this._drawLast=_),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(i)}}});function ka(i){return yt.canvas?new Da(i):null}var Ki=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Us={_initContainer:function(){this._container=Vt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(zn.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var l=i._container=Ki("shape");Lt(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",i._path=Ki("path"),l.appendChild(i._path),this._updateStyle(i),this._layers[g(i)]=i},_addPath:function(i){var l=i._container;this._container.appendChild(l),i.options.interactive&&i.addInteractiveTarget(l)},_removePath:function(i){var l=i._container;ue(l),i.removeInteractiveTarget(l),delete this._layers[g(i)]},_updateStyle:function(i){var l=i._stroke,h=i._fill,_=i.options,y=i._container;y.stroked=!!_.stroke,y.filled=!!_.fill,_.stroke?(l||(l=i._stroke=Ki("stroke")),y.appendChild(l),l.weight=_.weight+"px",l.color=_.color,l.opacity=_.opacity,_.dashArray?l.dashStyle=$(_.dashArray)?_.dashArray.join(" "):_.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=_.lineCap.replace("butt","flat"),l.joinstyle=_.lineJoin):l&&(y.removeChild(l),i._stroke=null),_.fill?(h||(h=i._fill=Ki("fill")),y.appendChild(h),h.color=_.fillColor||_.color,h.opacity=_.fillOpacity):h&&(y.removeChild(h),i._fill=null)},_updateCircle:function(i){var l=i._point.round(),h=Math.round(i._radius),_=Math.round(i._radiusY||h);this._setPath(i,i._empty()?"M0 0":"AL "+l.x+","+l.y+" "+h+","+_+" 0,"+65535*360)},_setPath:function(i,l){i._path.v=l},_bringToFront:function(i){Ui(i._container)},_bringToBack:function(i){ws(i._container)}},za=yt.vml?Ki:nr,Ci=zn.extend({_initContainer:function(){this._container=za("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=za("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ue(this._container),Xt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){zn.prototype._update.call(this);var i=this._bounds,l=i.getSize(),h=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,h.setAttribute("width",l.x),h.setAttribute("height",l.y)),be(h,i.min),h.setAttribute("viewBox",[i.min.x,i.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(i){var l=i._path=za("path");i.options.className&&Lt(l,i.options.className),i.options.interactive&&Lt(l,"leaflet-interactive"),this._updateStyle(i),this._layers[g(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){ue(i._path),i.removeInteractiveTarget(i._path),delete this._layers[g(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var l=i._path,h=i.options;l&&(h.stroke?(l.setAttribute("stroke",h.color),l.setAttribute("stroke-opacity",h.opacity),l.setAttribute("stroke-width",h.weight),l.setAttribute("stroke-linecap",h.lineCap),l.setAttribute("stroke-linejoin",h.lineJoin),h.dashArray?l.setAttribute("stroke-dasharray",h.dashArray):l.removeAttribute("stroke-dasharray"),h.dashOffset?l.setAttribute("stroke-dashoffset",h.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),h.fill?(l.setAttribute("fill",h.fillColor||h.color),l.setAttribute("fill-opacity",h.fillOpacity),l.setAttribute("fill-rule",h.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(i,l){this._setPath(i,ir(i._parts,l))},_updateCircle:function(i){var l=i._point,h=Math.max(Math.round(i._radius),1),_=Math.max(Math.round(i._radiusY),1)||h,y="a"+h+","+_+" 0 1,0 ",w=i._empty()?"M0 0":"M"+(l.x-h)+","+l.y+y+h*2+",0 "+y+-h*2+",0 ";this._setPath(i,w)},_setPath:function(i,l){i._path.setAttribute("d",l)},_bringToFront:function(i){Ui(i._path)},_bringToBack:function(i){ws(i._path)}});yt.vml&&Ci.include(Us);function $i(i){return yt.svg||yt.vml?new Ci(i):null}zt.include({getRenderer:function(i){var l=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var l=this._paneRenderers[i];return l===void 0&&(l=this._createRenderer({pane:i}),this._paneRenderers[i]=l),l},_createRenderer:function(i){return this.options.preferCanvas&&ka(i)||$i(i)}});var Eu=Ps.extend({initialize:function(i,l){Ps.prototype.initialize.call(this,this._boundsToLatLngs(i),l)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=ut(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function mn(i,l){return new Eu(i,l)}Ci.create=za,Ci.pointsToPath=ir,hn.geometryToLayer=Ma,hn.coordsToLatLng=yr,hn.coordsToLatLngs=Ra,hn.latLngToCoords=La,hn.latLngsToCoords=br,hn.getFeature=On,hn.asFeature=Is,zt.mergeOptions({boxZoom:!0});var Er=Rn.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){Mt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Xt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ue(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Gn(),Sa(),this._startPoint=this._map.mouseEventToContainerPoint(i),Mt(document,{contextmenu:Fn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=Vt("div","leaflet-zoom-box",this._container),Lt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var l=new F(this._point,this._startPoint),h=l.getSize();be(this._box,l.min),this._box.style.width=h.x+"px",this._box.style.height=h.y+"px"},_finish:function(){this._moved&&(ue(this._box),ce(this._container,"leaflet-crosshair")),xa(),So(),Xt(document,{contextmenu:Fn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(p(this._resetState,this),0);var l=new tt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});zt.addInitHook("addHandler","boxZoom",Er),zt.mergeOptions({doubleClickZoom:!0});var Qn=Rn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var l=this._map,h=l.getZoom(),_=l.options.zoomDelta,y=i.originalEvent.shiftKey?h-_:h+_;l.options.doubleClickZoom==="center"?l.setZoom(y):l.setZoomAround(i.containerPoint,y)}});zt.addInitHook("addHandler","doubleClickZoom",Qn),zt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Po=Rn.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new wi(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}Lt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ce(this._map._container,"leaflet-grab"),ce(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=ut(this._map.options.maxBounds);this._offsetLimit=it(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var l=this._lastTime=+new Date,h=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(h),this._times.push(l),this._prunePositions(l)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,l){return i-(i-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;i.x<l.min.x&&(i.x=this._viscousLimit(i.x,l.min.x)),i.y<l.min.y&&(i.y=this._viscousLimit(i.y,l.min.y)),i.x>l.max.x&&(i.x=this._viscousLimit(i.x,l.max.x)),i.y>l.max.y&&(i.y=this._viscousLimit(i.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,l=Math.round(i/2),h=this._initialWorldOffset,_=this._draggable._newPos.x,y=(_-l+h)%i+l-h,w=(_+l+h)%i-l-h,O=Math.abs(y+h)<Math.abs(w+h)?y:w;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=O},_onDragEnd:function(i){var l=this._map,h=l.options,_=!h.inertia||i.noInertia||this._times.length<2;if(l.fire("dragend",i),_)l.fire("moveend");else{this._prunePositions(+new Date);var y=this._lastPos.subtract(this._positions[0]),w=(this._lastTime-this._times[0])/1e3,O=h.easeLinearity,j=y.multiplyBy(O/w),V=j.distanceTo([0,0]),J=Math.min(h.inertiaMaxSpeed,V),ct=j.multiplyBy(J/V),mt=J/(h.inertiaDeceleration*O),vt=ct.multiplyBy(-mt/2).round();!vt.x&&!vt.y?l.fire("moveend"):(vt=l._limitOffset(vt,l.options.maxBounds),Rt(function(){l.panBy(vt,{duration:mt,easeLinearity:O,noMoveStart:!0,animate:!0})}))}}});zt.addInitHook("addHandler","dragging",Po),zt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Pa=Rn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),Mt(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Xt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,l=document.documentElement,h=i.scrollTop||l.scrollTop,_=i.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(_,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var l=this._panKeys={},h=this.keyCodes,_,y;for(_=0,y=h.left.length;_<y;_++)l[h.left[_]]=[-1*i,0];for(_=0,y=h.right.length;_<y;_++)l[h.right[_]]=[i,0];for(_=0,y=h.down.length;_<y;_++)l[h.down[_]]=[0,i];for(_=0,y=h.up.length;_<y;_++)l[h.up[_]]=[0,-1*i]},_setZoomDelta:function(i){var l=this._zoomKeys={},h=this.keyCodes,_,y;for(_=0,y=h.zoomIn.length;_<y;_++)l[h.zoomIn[_]]=i;for(_=0,y=h.zoomOut.length;_<y;_++)l[h.zoomOut[_]]=-i},_addHooks:function(){Mt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Xt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var l=i.keyCode,h=this._map,_;if(l in this._panKeys){if(!h._panAnim||!h._panAnim._inProgress)if(_=this._panKeys[l],i.shiftKey&&(_=N(_).multiplyBy(3)),h.options.maxBounds&&(_=h._limitOffset(N(_),h.options.maxBounds)),h.options.worldCopyJump){var y=h.wrapLatLng(h.unproject(h.project(h.getCenter()).add(_)));h.panTo(y)}else h.panBy(_)}else if(l in this._zoomKeys)h.setZoom(h.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&h._popup&&h._popup.options.closeOnEscapeKey)h.closePopup();else return;Fn(i)}}});zt.addInitHook("addHandler","keyboard",Pa),zt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ti=Rn.extend({addHooks:function(){Mt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Xt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var l=Ca(i),h=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var _=Math.max(h-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(p(this._performZoom,this),_),Fn(i)},_performZoom:function(){var i=this._map,l=i.getZoom(),h=this._map.options.zoomSnap||0;i._stop();var _=this._delta/(this._map.options.wheelPxPerZoomLevel*4),y=4*Math.log(2/(1+Math.exp(-Math.abs(_))))/Math.LN2,w=h?Math.ceil(y/h)*h:y,O=i._limitZoom(l+(this._delta>0?w:-w))-l;this._delta=0,this._startTime=null,O&&(i.options.scrollWheelZoom==="center"?i.setZoom(l+O):i.setZoomAround(this._lastMousePos,l+O))}});zt.addInitHook("addHandler","scrollWheelZoom",Ti);var Io=600;zt.mergeOptions({tapHold:yt.touchNative&&yt.safari&&yt.mobile,tapTolerance:15});var Cr=Rn.extend({addHooks:function(){Mt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Xt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var l=i.touches[0];this._startPos=this._newPos=new nt(l.clientX,l.clientY),this._holdTimeout=setTimeout(p(function(){this._cancel(),this._isTapValid()&&(Mt(document,"touchend",Ce),Mt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),Io),Mt(document,"touchend touchcancel contextmenu",this._cancel,this),Mt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){Xt(document,"touchend",Ce),Xt(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),Xt(document,"touchend touchcancel contextmenu",this._cancel,this),Xt(document,"touchmove",this._onMove,this)},_onMove:function(i){var l=i.touches[0];this._newPos=new nt(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,l){var h=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});h._simulated=!0,l.target.dispatchEvent(h)}});zt.addInitHook("addHandler","tapHold",Cr),zt.mergeOptions({touchZoom:yt.touch,bounceAtZoomLimits:!0});var Ji=Rn.extend({addHooks:function(){Lt(this._map._container,"leaflet-touch-zoom"),Mt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ce(this._map._container,"leaflet-touch-zoom"),Xt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var l=this._map;if(!(!i.touches||i.touches.length!==2||l._animatingZoom||this._zooming)){var h=l.mouseEventToContainerPoint(i.touches[0]),_=l.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(h.add(_)._divideBy(2))),this._startDist=h.distanceTo(_),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),Mt(document,"touchmove",this._onTouchMove,this),Mt(document,"touchend touchcancel",this._onTouchEnd,this),Ce(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var l=this._map,h=l.mouseEventToContainerPoint(i.touches[0]),_=l.mouseEventToContainerPoint(i.touches[1]),y=h.distanceTo(_)/this._startDist;if(this._zoom=l.getScaleZoom(y,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&y<1||this._zoom>l.getMaxZoom()&&y>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,y===1)return}else{var w=h._add(_)._divideBy(2)._subtract(this._centerPoint);if(y===1&&w.x===0&&w.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(w),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),pt(this._animRequest);var O=p(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Rt(O,this,!0),Ce(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,pt(this._animRequest),Xt(document,"touchmove",this._onTouchMove,this),Xt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});zt.addInitHook("addHandler","touchZoom",Ji),zt.BoxZoom=Er,zt.DoubleClickZoom=Qn,zt.Drag=Po,zt.Keyboard=Pa,zt.ScrollWheelZoom=Ti,zt.TapHold=Cr,zt.TouchZoom=Ji,s.Bounds=F,s.Browser=yt,s.CRS=ie,s.Canvas=Da,s.Circle=Do,s.CircleMarker=Na,s.Class=Ft,s.Control=an,s.DivIcon=zo,s.DivOverlay=Dn,s.DomEvent=fh,s.DomUtil=ru,s.Draggable=wi,s.Evented=at,s.FeatureGroup=un,s.GeoJSON=hn,s.GridLayer=Qi,s.Handler=Rn,s.Icon=Ds,s.ImageOverlay=Xn,s.LatLng=gt,s.LatLngBounds=tt,s.Layer=Ln,s.LayerGroup=Fi,s.LineUtil=pu,s.Map=zt,s.Marker=zs,s.Mixin=gh,s.Path=si,s.Point=nt,s.PolyUtil=vh,s.Polygon=Ps,s.Polyline=ai,s.Popup=Oa,s.PosAnimation=dr,s.Projection=_u,s.Rectangle=Eu,s.Renderer=zn,s.SVG=Ci,s.SVGOverlay=Ei,s.TileLayer=Wi,s.Tooltip=wr,s.Transformation=Zn,s.Util=we,s.VideoOverlay=Sr,s.bind=p,s.bounds=it,s.canvas=ka,s.circle=Eh,s.circleMarker=yu,s.control=Ls,s.divIcon=wu,s.extend=c,s.featureGroup=Aa,s.geoJSON=xr,s.geoJson=bu,s.gridLayer=kn,s.icon=vr,s.imageOverlay=Bs,s.latLng=rt,s.latLngBounds=ut,s.layerGroup=vu,s.map=Ta,s.marker=Oo,s.point=N,s.polygon=cn,s.polyline=Ch,s.popup=Th,s.rectangle=mn,s.setOptions=k,s.stamp=g,s.svg=$i,s.svgOverlay=Su,s.tileLayer=fn,s.tooltip=Ah,s.transformation=An,s.version=o,s.videoOverlay=xu;var Hs=window.L;s.noConflict=function(){return window.L=Hs,this},window.L=s})}(Cl,Cl.exports)),Cl.exports}var fo=vA();const Yv=Ud(fo);function oh(a,n,s){return Object.freeze({instance:a,context:n,container:s})}function Bm(a,n){return n==null?function(o,c){const d=R.useRef(void 0);return d.current||(d.current=a(o,c)),d}:function(o,c){const d=R.useRef(void 0);d.current||(d.current=a(o,c));const p=R.useRef(o),{instance:b}=d.current;return R.useEffect(function(){p.current!==o&&(n(b,o,p.current),p.current=o)},[b,o,n]),d}}function X0(a,n){R.useEffect(function(){return(n.layerContainer??n.map).addLayer(a.instance),function(){var d;(d=n.layerContainer)==null||d.removeLayer(a.instance),n.map.removeLayer(a.instance)}},[n,a])}function Q0(a){return function(s){const o=Pm(),c=a(Im(s,o),o);return fA(o.map,s.attribution),F0(c.current,s.eventHandlers),X0(c.current,o),c}}function yA(a,n){const s=R.useRef(void 0);R.useEffect(function(){if(n.pathOptions!==s.current){const c=n.pathOptions??{};a.instance.setStyle(c),s.current=c}},[a,n])}function bA(a){return function(s){const o=Pm(),c=a(Im(s,o),o);return F0(c.current,s.eventHandlers),X0(c.current,o),yA(c.current,s),c}}function xA(a,n){const s=Bm(a,n),o=Q0(s);return Y0(o)}function W0(a,n){const s=Bm(a,n),o=bA(s);return Y0(o)}function SA(a,n){const s=Bm(a,n),o=Q0(s);return _A(o)}function wA(a,n,s){const{opacity:o,zIndex:c}=n;o!=null&&o!==s.opacity&&a.setOpacity(o),c!=null&&c!==s.zIndex&&a.setZIndex(c)}function EA(){return Pm().map}function Fv(a){const n=EA();return R.useEffect(function(){return n.on(a),function(){n.off(a)}},[n,a]),n}const CA=W0(function({center:n,children:s,...o},c){const d=new fo.Circle(n,o);return oh(d,km(c,{overlayContainer:d}))},dA);function TA({bounds:a,boundsOptions:n,center:s,children:o,className:c,id:d,placeholder:p,style:b,whenReady:g,zoom:v,...A},T){const[C]=R.useState({className:c,id:d,style:b}),[P,M]=R.useState(null),k=R.useRef(void 0);R.useImperativeHandle(T,()=>(P==null?void 0:P.map)??null,[P]);const B=R.useCallback(Q=>{if(Q!==null&&!k.current){const $=new fo.Map(Q,A);k.current=$,s!=null&&v!=null?$.setView(s,v):a!=null&&$.fitBounds(a,n),g!=null&&$.whenReady(g),M(pA($))}},[]);R.useEffect(()=>()=>{P==null||P.map.remove()},[P]);const U=P?Ac.createElement(zm,{value:P},o):p??null;return Ac.createElement("div",{...C,ref:B},U)}const AA=R.forwardRef(TA),NA=xA(function({position:n,...s},o){const c=new fo.Marker(n,s);return oh(c,km(o,{overlayContainer:c}))},function(n,s,o){s.position!==o.position&&n.setLatLng(s.position),s.icon!=null&&s.icon!==o.icon&&n.setIcon(s.icon),s.zIndexOffset!=null&&s.zIndexOffset!==o.zIndexOffset&&n.setZIndexOffset(s.zIndexOffset),s.opacity!=null&&s.opacity!==o.opacity&&n.setOpacity(s.opacity),n.dragging!=null&&s.draggable!==o.draggable&&(s.draggable===!0?n.dragging.enable():n.dragging.disable())}),MA=W0(function({positions:n,...s},o){const c=new fo.Polyline(n,s);return oh(c,km(o,{overlayContainer:c}))},function(n,s,o){s.positions!==o.positions&&n.setLatLngs(s.positions)}),RA=SA(function({url:n,...s},o){const c=new fo.TileLayer(n,Im(s,o));return oh(c,o)},function(n,s,o){wA(n,s,o);const{url:c}=s;c!=null&&c!==o.url&&n.setUrl(c)});function LA(){const{selectedIds:a,bubbles:n,links:s,resources:o=[],linkEditMode:c,setLinkEditMode:d,resizeSelected:p,colorizeSelected:b,duplicateSelected:g,deleteSelected:v,createLinkBetweenSelected:A,increaseLinkThickness:T,decreaseLinkThickness:C,updateLinkThickness:P,openAssignationModal:M}=Hn(),[k,B]=R.useState(30),[U,Q]=R.useState(2),[$,ft]=R.useState(""),[lt,Ct]=R.useState(!1),[kt,dt]=R.useState({x:10,y:80}),[xt,qt]=R.useState({x:0,y:0}),Rt=R.useRef(null),pt=N=>{Ct(!0);const F=Rt.current.getBoundingClientRect();qt({x:N.clientX-F.left,y:N.clientY-F.top})},we=N=>{lt&&dt({x:N.clientX-xt.x,y:N.clientY-xt.y})},Ft=()=>Ct(!1),Kt=N=>{ft(N),setTimeout(()=>ft(""),1500)};let Y=!1,at=null,nt=null;if(a.length===1)Y=!0,at="bulle",nt=a[0];else if(a.length===2){const[N,F]=a,it=s.find(tt=>tt.from===N&&tt.to===F||tt.from===F&&tt.to===N);it&&(Y=!0,at="cordon",nt=it.id)}let jt=[];if(a.length===1){const N=n==null?void 0:n.find(F=>F.id===a[0]);N!=null&&N.arIds&&N.arIds.length>0&&(jt=o.filter(F=>N.arIds.includes(F.id)))}else if(a.length===2){const[N,F]=a,it=s==null?void 0:s.find(tt=>tt.from===N&&tt.to===F||tt.from===F&&tt.to===N);it!=null&&it.arIds&&it.arIds.length>0&&(jt=o.filter(tt=>it.arIds.includes(tt.id)))}return S.jsxs("div",{ref:Rt,onMouseDown:pt,onMouseMove:we,onMouseUp:Ft,onTouchStart:N=>pt(N.touches[0]),onTouchMove:N=>we(N.touches[0]),onTouchEnd:Ft,style:{position:"absolute",left:kt.x,top:kt.y,background:"rgba(255,255,255,0.7)",padding:"10px",borderRadius:"10px",boxShadow:"0 4px 12px rgba(0,0,0,0.2)",fontFamily:"sans-serif",zIndex:1,minWidth:130,userSelect:"none",touchAction:"none",cursor:lt?"grabbing":"grab",backdropFilter:"blur(4px)"},children:[S.jsx("div",{style:{marginBottom:8,fontWeight:"bold"},children:"🛠️ Outils Réso•°"}),S.jsx("button",{onClick:()=>d(!c),style:{background:c?"lightgreen":"white",border:"1px solid #aaa",padding:4,borderRadius:4,fontSize:12,marginBottom:8,width:"100%"},children:c?"Mode Liens ✔":"Mode Cordon Résonant"}),a.length===1&&S.jsxs(S.Fragment,{children:[S.jsxs("div",{style:{display:"flex",gap:6,marginBottom:6},children:[S.jsx("button",{onClick:()=>p(10),children:S.jsx(qv,{size:16})}),S.jsx("button",{onClick:()=>p(-10),children:S.jsx(Zv,{size:16})}),S.jsx("button",{onClick:g,children:S.jsx(u2,{size:16})}),S.jsx("button",{onClick:v,children:S.jsx(Dm,{size:16})}),S.jsx("button",{onClick:b,children:S.jsx(A2,{size:16})})]}),S.jsx("div",{style:{marginBottom:6},children:S.jsx("input",{type:"number",value:k,onChange:N=>B(Number(N.target.value)),onBlur:()=>p(k),placeholder:"Taille",style:{width:"100%",fontSize:12}})})]}),a.length===2&&S.jsxs(S.Fragment,{children:[S.jsxs("div",{style:{display:"flex",gap:6,marginBottom:6},children:[S.jsx("button",{onClick:A,children:S.jsx(m2,{size:16})}),S.jsx("button",{onClick:T,children:S.jsx(qv,{size:16})}),S.jsx("button",{onClick:C,children:S.jsx(Zv,{size:16})})]}),S.jsx("div",{style:{marginBottom:6},children:S.jsx("input",{type:"number",value:U,onChange:N=>Q(Number(N.target.value)),onBlur:()=>P(U),placeholder:"Épaisseur du cordon gps",style:{width:"100%",fontSize:12}})})]}),Y&&S.jsxs(S.Fragment,{children:[S.jsx("button",{onClick:()=>{M(nt,at),Kt(at==="bulle"?"🎭 Assignation à la bulle":"🎭 Assignation au cordon")},style:{fontSize:12,marginTop:6,width:"100%",background:"#6366f1",color:"white",border:"none",borderRadius:4,padding:"8px 0"},children:"🎭 Associer son ART (Acteur Ressource Transnumériste )"}),S.jsx("div",{style:{marginTop:6},children:jt.length>0?S.jsxs("div",{className:"text-xs text-gray-700",children:[S.jsx("b",{children:"ART associés:"}),S.jsx("ul",{children:jt.map(N=>S.jsx("li",{children:N.label||N.nom||N.id},N.id))})]}):S.jsx("span",{className:"text-xs text-gray-400",children:"Aucun ART pour l’instant."})})]}),$&&S.jsx("div",{style:{marginTop:8,fontSize:12,color:"green",textAlign:"center"},children:$})]})}function OA(){const{sessionCode:a,bubbles:n,links:s,syncStatus:o}=Hn(),[c,d]=R.useState(!0),[p,b]=R.useState([]);return R.useEffect(()=>{const g=[];g.push(a?`✅ sessionCode : ${a}`:"⛔ Pas de sessionCode"),g.push(n.length>0?`✅ ${n.length} bulle(s)`:"⛔ Aucune bulle"),g.push(`📡 synchro : ${o}`),g.push(`🔗 liens : ${s.length}`),b(g)},[a,n,s,o]),c?S.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,background:"#ffffffee",borderTop:"1px solid #ccc",padding:"6px 12px",fontSize:12,fontFamily:"monospace",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"space-between",overflowX:"auto",whiteSpace:"nowrap"},children:[S.jsxs("span",{children:["🧪 Startup : ",p.join(" | ")]}),S.jsx("button",{onClick:()=>d(!1),style:{background:"none",border:"none",cursor:"pointer",marginLeft:12},title:"Fermer",children:S.jsx(rh,{size:14})})]}):null}function DA(){const{bubbles:a,links:n,selectedIds:s,setSelectedIds:o,updateBubble:c,setIsDragging:d,addBubble:p,linkEditMode:b,assignTarget:g,setAssignTarget:v}=Hn();R.useEffect(()=>{delete Yv.Icon.Default.prototype._getIconUrl,Yv.Icon.Default.mergeOptions({iconUrl:"https://unpkg.com/leaflet@1.9.3/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.9.3/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.9.3/dist/images/marker-shadow.png"})},[]);function A(){return Fv({dblclick:M=>{const{lat:k,lng:B}=M.latlng;p(k,B)}}),null}function T(){return Fv({click:()=>o([])}),null}const C=M=>{o(k=>b?k.includes(M)?k.filter(B=>B!==M):k.length>=2?[k[1],M]:[...k,M]:k.includes(M)?k.filter(B=>B!==M):[...k,M])},P=g?g.type==="bulle"?a.find(M=>M.id===g.id)||g:g.type==="cordon"&&n.find(M=>M.id===g.id)||g:null;return S.jsxs("div",{style:{width:"100%",height:"100vh",position:"relative"},children:[S.jsx(OA,{style:{position:"absolute",bottom:100,left:"50%",transform:"translateX(-50%)",opacity:.8,zIndex:1e3}}),S.jsxs(AA,{center:[48.85,2.35],zoom:13,style:{height:"100%",width:"100%"},children:[S.jsx(RA,{url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png"}),S.jsx(A,{}),S.jsx(T,{}),n.map(M=>{const k=a.find(Q=>Q.id===M.from),B=a.find(Q=>Q.id===M.to);if(!k||!B)return null;const U=[[k.lat,k.lng],[B.lat,B.lng]];return S.jsx(MA,{positions:U,pathOptions:{color:M.color||"black",weight:M.thickness||3,opacity:.7}},M.id)}),a.map(M=>S.jsx(NA,{position:[M.lat,M.lng],draggable:!0,eventHandlers:{dragstart:()=>d(!0),dragend:k=>{const{lat:B,lng:U}=k.target.getLatLng();c(M.id,{lat:B,lng:U}),d(!1)},click:()=>C(M.id)}},M.id)),a.map(M=>{const k=s.includes(M.id);return S.jsx(CA,{center:[M.lat,M.lng],radius:M.r||30,pathOptions:{color:k?"purple":M.color||"#3388ff",fillColor:M.color||"#3388ff",weight:k?5:1,opacity:1,fillOpacity:.5,dashArray:k?null:"5,10"},eventHandlers:{click:()=>C(M.id)}},"c"+M.id)})]}),g?null:S.jsx(LA,{}),S.jsx(G0,{isOpen:!!g,onClose:()=>{v(null)},selected:P})]})}function kA(){return S.jsxs("div",{className:"p-6 max-w-3xl mx-auto text-sm leading-relaxed",children:[S.jsx("h1",{className:"text-2xl font-bold mb-4",children:"À propos de BubbleMap•°"}),S.jsxs("p",{className:"mb-4",children:["BubbleMap•° est une ",S.jsx("strong",{children:"Art-pplication expérimentale"}),", conçue pour explorer la résonance sonore et visuelle dans les pratiques thérapeutiques, éducatives ou collectives."]}),S.jsxs("p",{className:"mb-4",children:["Elle permet de cartographier en temps réel des bulles interactives, des connexions, des flux… et d’",S.jsx("strong",{children:"orchestrer des expériences sensibles et collaboratives"}),"."]}),S.jsx("h2",{className:"text-lg font-semibold mt-6 mb-2",children:"Sources d'inspiration"}),S.jsxs("ul",{className:"list-disc list-inside mb-4",children:[S.jsxs("li",{children:[S.jsx("strong",{children:"Jean-Pierre Courtial"})," : pour la cartographie des réseaux sémantiques et la dynamique des concepts."]}),S.jsxs("li",{children:[S.jsx("strong",{children:"Bruno Latour"})," : pour la théorie de l'acteur-réseau et la pensée des agencements hybrides."]}),S.jsxs("li",{children:[S.jsx("strong",{children:"Hartmut Rosa"})," : pour sa philosophie de la résonance et du rapport vivant au monde."]}),S.jsxs("li",{children:[S.jsx("strong",{children:"Mauricio Neubern"})," : pour son approche ethnoclinique de l'hypnose, centrée sur la co-construction et la culture."]})]}),S.jsx("h2",{className:"text-lg font-semibold mt-6 mb-2",children:"Créateur"}),S.jsxs("p",{className:"mb-4",children:["Ce projet a été imaginé et développé par Pierre-Henri Garnier (psychologue, hypnothérapeute, docteur en SIC), dans le cadre d'une recherche-action mêlant ",S.jsx("strong",{children:"art, science et soin"}),"."]}),S.jsx("p",{className:"text-gray-500 text-xs mt-8 italic",children:"BubbleMap•° est un prototype libre et ouvert. Toute résonance est bienvenue."})]})}function zA({session:a,connexion:n,nbBubbles:s,nbLinks:o,nbUsers:c,energy:d,styleIA:p,iaActive:b}){const g=[{label:"Session",value:a,icon:S.jsx(b2,{size:18}),info:"Code unique de votre carte de résonance."},{label:"Connexion",value:n,icon:S.jsx(C2,{size:18}),info:"Êtes-vous relié au paysage ?"},{label:"Bulles",value:s,icon:S.jsx(o2,{size:18}),info:"Nœuds vibrants de votre carte."},{label:"Liens",value:o,icon:S.jsx(_2,{size:18}),info:"Sentiers tissés entre les bulles."},{label:"Présences",value:c,icon:S.jsx(j2,{size:18}),info:"Participants connectés à votre bulle."},{label:"Énergie",value:d,icon:S.jsx(s2,{size:18}),info:"Indicateur global de vitalité du réseau."},{label:"Style IA",value:p,icon:S.jsx(Hv,{size:18}),info:"Langage choisi pour la co-création."},{label:"IA active",value:b,icon:S.jsx(Hv,{size:18}),info:"L’IA est-elle présente dans le paysage ?"}];return S.jsxs("div",{className:"w-full bg-white text-black p-4 rounded-xl shadow mb-4",children:[S.jsx("h2",{className:"text-xl font-bold mb-3 text-center",children:"🌐 Météo Réso•°"}),S.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map((v,A)=>S.jsxs("div",{className:"border border-black rounded-lg p-3 bg-white shadow group hover:shadow-xl transition",children:[S.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[v.icon,S.jsx("span",{className:"font-semibold",children:v.label}),S.jsxs("div",{className:"relative group",children:[S.jsx(q0,{size:14,className:"cursor-pointer"}),S.jsx("div",{className:"absolute z-10 hidden group-hover:block bg-black text-white text-xs px-2 py-1 rounded w-44 bottom-full left-1/2 -translate-x-1/2 mb-2 text-center",children:v.info})]})]}),S.jsx("div",{className:"text-lg font-bold mt-1",children:v.value})]},A))})]})}function PA(){const{groups:a=[],addGroup:n,addMemberToGroup:s,removeGroup:o,removeMemberFromGroup:c}=Hn(),[d,p]=R.useState(""),[b,g]=R.useState(""),[v,A]=R.useState(null),[T,C]=R.useState(!1),P=async()=>{const k=d.trim();if(!(!k||T)){if(a.some(B=>B.name.toLowerCase()===k.toLowerCase())){alert("Ce nom de groupe existe déjà.");return}C(!0);try{await n({name:k,id:"g_"+Date.now(),members:[]}),p("")}catch{alert("Erreur lors de l'ajout.")}C(!1)}},M=async k=>{const B=b.trim();if(!(!B||T)){C(!0);try{await s(k,B),g("")}catch{alert("Erreur lors de l'ajout du membre.")}C(!1)}};return S.jsxs("div",{className:"w-full p-4 rounded-xl shadow bg-gray-50 mt-2",children:[S.jsx("h3",{className:"font-bold mb-2",children:"👥 Groupes et participants"}),S.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:gap-3 mb-4",children:[S.jsx("input",{className:"border rounded px-2 py-1 text-sm w-full sm:w-auto",value:d,onChange:k=>p(k.target.value),placeholder:"Nom du groupe"}),S.jsx("button",{className:"bg-indigo-600 text-white px-3 py-1 rounded text-sm disabled:opacity-60",onClick:P,disabled:T||!d.trim(),children:T?"Ajout...":"Ajouter groupe"})]}),S.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:a.map((k,B)=>{var U,Q;return S.jsxs("div",{className:"border p-3 rounded bg-white",children:[S.jsxs("div",{className:"flex items-center mb-2",children:[S.jsx("span",{className:"font-semibold",children:k.name}),S.jsx("button",{className:`ml-2 text-xs px-2 py-1 rounded ${v===B?"bg-indigo-100":"bg-gray-200"}`,onClick:()=>A(v===B?null:B),children:v===B?"Annuler":"Ajouter membre"}),S.jsx("button",{onClick:()=>o(B),className:"ml-2 text-xs px-2 py-1 bg-red-100 rounded text-red-600",disabled:T,children:"Suppr"})]}),S.jsxs("ul",{className:"list-disc ml-5 mb-2",children:[((U=k.members)==null?void 0:U.length)===0&&S.jsx("li",{className:"text-gray-400",children:"Aucun membre"}),(Q=k.members)==null?void 0:Q.map(($,ft)=>S.jsxs("li",{className:"flex items-center",children:[$,S.jsx("button",{onClick:()=>c(B,ft),className:"ml-2 text-xs text-red-500",disabled:T,children:"✕"})]},ft))]}),v===B&&S.jsxs("div",{className:"flex gap-2 mt-2",children:[S.jsx("input",{className:"border rounded px-2 py-1 text-sm w-full",value:b,onChange:$=>g($.target.value),placeholder:"Nom du membre"}),S.jsx("button",{className:"bg-indigo-500 text-white px-3 py-1 rounded text-sm disabled:opacity-60",onClick:()=>M(B),disabled:T||!b.trim(),children:"Ajouter"})]})]},k.id||B)})})]})}function IA(){const{sessionCode:a,bubbles:n=[],links:s=[],participants:o=[],syncStatus:c,sessionMeta:d={},energy:p,iaStyle:b="Poétique",iaActive:g=!0}=Hn(),v=n.length,A=s.length,T=o.length,C=c!=="error",P=a||"aucune",M=b||"Poétique",k=typeof p=="number"?p:d.energy||0;return S.jsxs("main",{className:"w-full max-w-4xl mx-auto p-4",children:[S.jsx("section",{children:S.jsx(zA,{session:P,connexion:C?"🟢 Active":"🔴 Hors ligne",nbBubbles:v,nbLinks:A,nbUsers:T,energy:k,styleIA:M,iaActive:g?"Oui":"Non"})}),S.jsx("section",{children:S.jsx(PA,{})})]})}function BA(){return S.jsx(XT,{children:S.jsx(WT,{children:S.jsx(j1,{children:S.jsxs(p1,{children:[S.jsx(ci,{path:"/",element:S.jsx(KT,{})}),S.jsxs(ci,{path:"/cabine/:code",element:S.jsx(H2,{}),children:[S.jsx(ci,{index:!0,element:S.jsx(Hg,{to:"configreso",replace:!0})}),S.jsx(ci,{path:"map",element:S.jsx(DA,{})}),S.jsx(ci,{path:"pad",element:S.jsx(sA,{})}),S.jsx(ci,{path:"ia",element:S.jsx(tA,{})}),S.jsx(ci,{path:"orchestrator",element:S.jsx(hA,{})}),S.jsx(ci,{path:"infos",element:S.jsx(kA,{})}),S.jsx(ci,{path:"configreso",element:S.jsx(IA,{})})]}),S.jsx(ci,{path:"*",element:S.jsx(Hg,{to:"/",replace:!0})})]})})})})}bx.createRoot(document.getElementById("root")).render(S.jsx(Ac.StrictMode,{children:S.jsx(BA,{})}));
